{"version":2,"ops":[{"type":1,"author":{"id":"bc8a3197725c0467cd24911ff10ce52a2905729e"},"timestamp":1616609002,"metadata":{"github-id":"MDU6SXNzdWU4NDAwMTE5NjE=","github-url":"https://github.com/dandi/dandi-cli/issues/497","origin":"github"},"title":"question about metadata","message":"I have two questions:\n\n* I don't understand some changes between old metadata and new metadata, if I do this:\n```\n url = \"https://dandiarchive.org/dandiset/000027/draft\"\n ret = download(url, tmpdir)\n meta = Dandiset(Path(tmpdir) / \"000027\").metadata\n newmeta = migrate2newschema(meta)\n```\n`meta` looks like this:\n```\n{'age': {'maximum': 12.0, 'minimum': 12.0, 'unitText': 'TODO'}, 'contributors': [{}], 'description': 'Should be ignored by regular mortals.\\n\\nATM contains only a few files from http://github.com/dandi-datasets/nwb_test_data which more or less appropriate (do not lack critical metadata) for testing', 'identifier': '000027', 'keywords': ['development'], 'name': 'Test dataset for testing dandi-cli.', 'number_of_subjects': 1, 'organism': [{'species': 'Rattus norvegicus'}], 'sex': ['M']}\n```\nand `newmeta`:\n```\nDandisetMeta(contributor=[Person(roleName=[\u003cRoleType.Author: 'dandi:Author'\u003e], identifier='0000-0003-3456-2493', name=None, email=None, url=None, includeInCitation=True, awardNumber=None, affiliation=None, schemaKey='Person')], description='Should be ignored by regular mortals.\\n\\nATM contains only a few files from http://github.com/dandi-datasets/nwb_test_data which more or less appropriate (do not lack critical metadata) for testing', identifier='DANDI:000027', keywords=['development'], name='Test dataset for testing dandi-cli.', schemaVersion='0.1.1', about=None, studyTarget=None, license=None, protocol=None, ethicsApproval=None, acknowledgement=None, access=[AccessRequirements(status=\u003cAccessType.Open: 'dandi:Open'\u003e, contactPoint=None, description=None, embargoedUntil=None)], url=None, repository='https://dandiarchive.org/', relatedResource=None, wasGeneratedBy=None, citation=None, assetsSummary=None, manifestLocation=None, version=None, doi=None)\n```\nit's \"longer\" but it's missing many important info, e.g. `age`, `number_of_subjects`, etc. Is it on purpose?\n\n\n* the second questions -- if I'm not using `download`, but create `Dandiset` from dandisets that I got using `datalad install -J5 -r https://github.com/dandi/dandi-api-datasets`, I had yet another version of metadata (this one also missing `age` etc.\n```\n{'access': [{'status': 'dandi:Open'}], 'contributor': [{'identifier': '0000-0003-3456-2493', 'includeInCitation': 'true', 'roleName': ['dandi:Author'], 'schemaKey': 'Person'}], 'description': 'Should be ignored by regular mortals.\\n\\nATM contains only a few files from http://github.com/dandi-datasets/nwb_test_data which more or less appropriate (do not lack critical metadata) for testing', 'identifier': 'DANDI:000027', 'keywords': ['development'], 'name': 'Test dataset for testing dandi-cli.', 'repository': 'https://dandiarchive.org/', 'schemaVersion': '1.0.0-rc1'}\n```\n\nI guess it might be a similar unification issue as in #484, but I'm not sure at the end how to get information to `datesite` jsonfile. @yarikoptic suggestion to take `newmeta` wouldn't work IMO","files":null}]}