{"version":2,"ops":[{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1635512711,"metadata":{"github-id":"IC_kwDODBZtRc445_2K","github-url":"https://github.com/dandi/dandi-cli/issues/825#issuecomment-954727818"},"message":"Just to make sure: how dandi-cli was installed?","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1635512826,"metadata":{"github-id":"IC_kwDODBZtRc446AMm","github-url":"https://github.com/dandi/dandi-cli/issues/825#issuecomment-954729254"},"message":"Afaik https://github.com/dandi/dandischema/blob/master/setup.cfg#L30 should have taken care about installing those dependencies but may be something changed in dandi schema extra depends recently - didn't check yet","files":null},{"type":3,"author":{"id":"0ab0e40999605aa8d5ec6be68372511fdc4a2fdf"},"timestamp":1643959369,"metadata":{"github-id":"IC_kwDODBZtRc49YEjV","github-url":"https://github.com/dandi/dandi-cli/issues/825#issuecomment-1029720277"},"message":"@yarikoptic it's installed via the system package manager, which has been distributing up-to-date versions of dandi since October. *With newer* versions of jsonschema the dandi CLI no longer fails with:\n\n```\npkg_resources.DistributionNotFound: The 'uri_template' distribution was not found and is required by jsonschema\n```\n\nbut with\n\n```\npkg_resources.DistributionNotFound: The 'uri-template; extra == \"format\"' distribution was not found and is required by jsonschema\n```\n\nThe current solution we rely on is to use `\u003cjsonschema-4` but that's hardly future-proof. I followed up with this and [asked upstream](https://github.com/python-hyper/uritemplate/issues/76#issuecomment-1028526330), but they seem to think `uri-template; extra == \"format\"` is not something their package is supposed to be providing :-/ \n\nAny ideas?","files":null},{"type":3,"author":{"id":"364914f8b1c8a9131d300bf2978e4ffe2ff1aeeb"},"timestamp":1644425168,"metadata":{"github-id":"IC_kwDODBZtRc49oR8v","github-url":"https://github.com/dandi/dandi-cli/issues/825#issuecomment-1033969455"},"message":"@TheChymera Are you saying that your system package manager is installing jsonschema 4.x when installing dandi?  That seems wrong, since hdmf (a dependency of pynwb) requires `jsonschema \u003e=2.6.0, \u003c4`.","files":null},{"type":3,"author":{"id":"0ab0e40999605aa8d5ec6be68372511fdc4a2fdf"},"timestamp":1644477901,"metadata":{"github-id":"IC_kwDODBZtRc49qmMe","github-url":"https://github.com/dandi/dandi-cli/issues/825#issuecomment-1034576670"},"message":"@jwodder well, yes, it does, but that's because I told it to. The DANDI stack on Gentoo is maintained by me, so if anything is wrong I can fix it quite rapidly.\n\nI actually [checked in with HDMF upstream](https://github.com/hdmf-dev/hdmf/issues/674) a while ago, and they agreed that the jsonschema limitation was not needed. Is it that DANDI expects HDMF to be using `\u003cjsonschema-4` even though HDMF works fine with newer versions?","files":null},{"type":6,"author":{"id":"0ab0e40999605aa8d5ec6be68372511fdc4a2fdf"},"timestamp":1644477974,"metadata":{"github-id":"UCE_lALODBZtRc49qmMeziDMh6k"},"target":"58811ea4a7588ed400f346a459a0c08f06b29ab71346ff008dd5aa607b65b283","message":"@jwodder well, yes, it does, but that's because I told it to. The DANDI stack on Gentoo is maintained by me, so if anything is wrong I can fix it quite rapidly.\n\nI actually [checked in with HDMF upstream](https://github.com/hdmf-dev/hdmf/issues/674) a while ago (since `\u003e=jsonschema-4` has been available for quite a while now), and they agreed that the jsonschema limitation was not needed. Is it that DANDI expects HDMF to be using `\u003cjsonschema-4` even though HDMF works fine with newer versions?","files":null},{"type":6,"author":{"id":"0ab0e40999605aa8d5ec6be68372511fdc4a2fdf"},"timestamp":1644478897,"metadata":{"github-id":"UCE_lALODBZtRc49qmMeziDMmSg"},"target":"58811ea4a7588ed400f346a459a0c08f06b29ab71346ff008dd5aa607b65b283","message":"@jwodder well, yes, it does, but that's because I told it to. The DANDI stack on Gentoo is maintained by me, so if anything is wrong I can fix it quite rapidly.\n\nI actually [checked in with HDMF upstream](https://github.com/hdmf-dev/hdmf/issues/674) a while ago (since `\u003e=jsonschema-4` has been available for quite a while now), and they agreed that the jsonschema limitation was not needed. Is it that DANDI (or pynwb) expects HDMF to be using `\u003cjsonschema-4` even though HDMF works fine with newer versions?","files":null},{"type":3,"author":{"id":"364914f8b1c8a9131d300bf2978e4ffe2ff1aeeb"},"timestamp":1644500471,"metadata":{"github-id":"IC_kwDODBZtRc49r9wQ","github-url":"https://github.com/dandi/dandi-cli/issues/825#issuecomment-1034935312"},"message":"@TheChymera I don't know about pynwb, but dandi doesn't care.  However, dandischema requires `jsonschema[format]` (no version restrictions specified), so if you're installing jsonschema 4.x alongside dandi \u0026 dandischema, you'll need to install all of the dependencies in its `format` extra.  As of jsonschema 4.4.0, that includes `uri-template` â€” note the hyphen, so you want https://github.com/plinss/uri_template/ instead of https://github.com/python-hyper/uritemplate.","files":null},{"type":3,"author":{"id":"0ab0e40999605aa8d5ec6be68372511fdc4a2fdf"},"timestamp":1648515953,"metadata":{"github-id":"IC_kwDODBZtRc5Ac0XO","github-url":"https://github.com/dandi/dandi-cli/issues/825#issuecomment-1081296334"},"message":"@jwodder thanks again for clarifying this. It was indeed a name mix-up after the jsonschema update. Solved as of: https://gitweb.gentoo.org/repo/gentoo.git/commit/?id=e7963135d008f2a75f05b51d2ed4dcde078f5fcc","files":null},{"type":4,"author":{"id":"0ab0e40999605aa8d5ec6be68372511fdc4a2fdf"},"timestamp":1648515953,"metadata":{"github-id":"CE_lADODBZtRc499YWmzwAAAAF43Biz"},"status":2}]}