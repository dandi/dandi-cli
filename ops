{"version":2,"ops":[{"type":6,"author":{"id":"d8203afd43c9e0a9d07c45dd62b58a81d53a2ebe"},"timestamp":1754926648,"metadata":{"github-id":"UCE_lAHODBZtRc7FU0mWzoTYm1g"},"target":"5b082792ea833750a0e3d438186b07a93fae6d1e7d8d77361c3f46ee2d2df5a0","message":"Hi @yarikoptic @CodyCBakerPhD,\n\nAnastasia is trying to upload a single .trk file to lincbrain.org.  She has local files (.jp2, .zarr, .png) that are on not in the Dandiset on lincbrain.org.  Based on the logs it seems that the DANDI Client is going through all of those local files (to validate?) before uploading the .trk file.\n\nHowever, based on the [docs](https://dandi.readthedocs.io/en/latest/cmdline/upload.html) it seems that we should be able to pass a path to `dandi upload` ,and only validate and upload that file:\n\n```\nBy default, all *.nwb, *.zarr, and *.ngff assets in the Dandiset (ignoring directories starting with a period) will be considered for the upload. You can point to specific files you would like to validate and have uploaded.\n```\n\nBelow are the commands she has tried (among other variants):\n\nCommand 1\n```\ndandi upload -i linc sub-MF278-sample-brain-desc-CSD-tractography-prob-dhollander-seed-label99-x39.5-y16.5-z35.trk\n```\n\nCommand 2\n```\nDANDI_DEVEL=1 dandi upload -i linc --allow-any-path --validation skip derivatives/sub-MF278/dwi/sub-MF278-sample-brain-desc-CSD-tractography-prob-dhollander-seed-label99-x39.5-y16.5-z35.trk\n```\n\n\u003cdetails\u003e\n\n\u003csummary\u003eHead of the log file\u003c/summary\u003e\n \n```bash\n2025-08-11T11:06:08-0400 [INFO    ] dandi 418040:22946905679424 python 3.13.5, dandi 0.69.3, dandischema 0.11.0, h5py 3.14.0, hdmf 4.1.0, pynwb 3.0.0, requests 2.32.4, urllib3 2.4.0\n2025-08-11T11:06:08-0400 [INFO    ] dandi 418040:22946905679424 sys.argv = ['/space/aspasia/2/users/code/miniforge3/envs/dandi/bin/dandi', 'upload', '-i', 'linc', '--allow-any-path', '--validation', 'skip', 'derivatives/sub-MF278/dwi/sub-MF278-sample-brain-desc-CSD-tractography-prob-dhollander-seed-label99-x39.5-y16.5-z35.trk']\n2025-08-11T11:06:08-0400 [INFO    ] dandi 418040:22946905679424 os.getcwd() = /autofs/space/aspasia_002/users/linc/000003\n2025-08-11T11:06:08-0400 [DEBUG   ] urllib3.connectionpool 418040:22946905679424 Starting new HTTPS connection (1): rig.mit.edu:443\n2025-08-11T11:06:08-0400 [DEBUG   ] dandi 418040:22946905679424 Could not check dandi/dandi-cli for version updates: Connection to server could not be made\n2025-08-11T11:06:08-0400 [DEBUG   ] urllib3.connectionpool 418040:22946905679424 Starting new HTTPS connection (1): api.lincbrain.org:443\n2025-08-11T11:06:08-0400 [DEBUG   ] urllib3.connectionpool 418040:22946905679424 https://api.lincbrain.org:443 \"GET /api/info/ HTTP/1.1\" 200 358\n2025-08-11T11:06:08-0400 [DEBUG   ] dandi 418040:22946905679424 GET https://api.lincbrain.org/api/info/\n2025-08-11T11:06:08-0400 [DEBUG   ] urllib3.connectionpool 418040:22946905679424 Starting new HTTPS connection (1): api.lincbrain.org:443\n2025-08-11T11:06:08-0400 [DEBUG   ] urllib3.connectionpool 418040:22946905679424 https://api.lincbrain.org:443 \"GET /api/info/ HTTP/1.1\" 200 358\n2025-08-11T11:06:08-0400 [DEBUG   ] dandi 418040:22946905679424 Response: 200\n2025-08-11T11:06:08-0400 [DEBUG   ] dandi 418040:22946905679424 Using api key from DANDI_API_KEY environment variable\n2025-08-11T11:06:08-0400 [DEBUG   ] dandi 418040:22946905679424 GET https://api.lincbrain.org/api/auth/token\n2025-08-11T11:06:08-0400 [DEBUG   ] urllib3.connectionpool 418040:22946905679424 https://api.lincbrain.org:443 \"GET /api/auth/token HTTP/1.1\" 301 None\n2025-08-11T11:06:08-0400 [DEBUG   ] urllib3.connectionpool 418040:22946905679424 https://api.lincbrain.org:443 \"GET /api/auth/token/ HTTP/1.1\" 200 42\n2025-08-11T11:06:08-0400 [DEBUG   ] dandi 418040:22946905679424 Response: 200\n2025-08-11T11:06:08-0400 [DEBUG   ] dandi 418040:22946905679424 Found identifier DANDI:000003 in top level 'identifier'\n2025-08-11T11:06:09-0400 [DEBUG   ] h5py._conv 418040:22946905679424 Creating converter from 7 to 5\n2025-08-11T11:06:09-0400 [DEBUG   ] h5py._conv 418040:22946905679424 Creating converter from 5 to 7\n2025-08-11T11:06:09-0400 [DEBUG   ] h5py._conv 418040:22946905679424 Creating converter from 7 to 5\n2025-08-11T11:06:09-0400 [DEBUG   ] h5py._conv 418040:22946905679424 Creating converter from 5 to 7\n2025-08-11T11:06:09-0400 [DEBUG   ] numcodecs 418040:22946905679424 Registering codec 'zlib'\n2025-08-11T11:06:09-0400 [DEBUG   ] numcodecs 418040:22946905679424 Registering codec 'gzip'\n2025-08-11T11:06:09-0400 [DEBUG   ] numcodecs 418040:22946905679424 Registering codec 'bz2'\n2025-08-11T11:06:09-0400 [DEBUG   ] numcodecs 418040:22946905679424 Registering codec 'lzma'\n2025-08-11T11:06:09-0400 [DEBUG   ] numcodecs 418040:22946905679424 Registering codec 'blosc'\n2025-08-11T11:06:09-0400 [DEBUG   ] numcodecs 418040:22946905679424 Registering codec 'zstd'\n2025-08-11T11:06:09-0400 [DEBUG   ] numcodecs 418040:22946905679424 Registering codec 'lz4'\n2025-08-11T11:06:09-0400 [DEBUG   ] numcodecs 418040:22946905679424 Registering codec 'astype'\n2025-08-11T11:06:09-0400 [DEBUG   ] numcodecs 418040:22946905679424 Registering codec 'delta'\n2025-08-11T11:06:09-0400 [DEBUG   ] numcodecs 418040:22946905679424 Registering codec 'quantize'\n2025-08-11T11:06:09-0400 [DEBUG   ] numcodecs 418040:22946905679424 Registering codec 'fixedscaleoffset'\n2025-08-11T11:06:09-0400 [DEBUG   ] numcodecs 418040:22946905679424 Registering codec 'packbits'\n2025-08-11T11:06:09-0400 [DEBUG   ] numcodecs 418040:22946905679424 Registering codec 'categorize'\n2025-08-11T11:06:09-0400 [DEBUG   ] numcodecs 418040:22946905679424 Registering codec 'pickle'\n2025-08-11T11:06:09-0400 [DEBUG   ] numcodecs 418040:22946905679424 Registering codec 'base64'\n2025-08-11T11:06:09-0400 [DEBUG   ] numcodecs 418040:22946905679424 Registering codec 'shuffle'\n2025-08-11T11:06:09-0400 [DEBUG   ] numcodecs 418040:22946905679424 Registering codec 'bitround'\n2025-08-11T11:06:09-0400 [DEBUG   ] numcodecs 418040:22946905679424 Registering codec 'crc32'\n2025-08-11T11:06:09-0400 [DEBUG   ] numcodecs 418040:22946905679424 Registering codec 'adler32'\n2025-08-11T11:06:09-0400 [DEBUG   ] numcodecs 418040:22946905679424 Registering codec 'jenkins_lookup3'\n2025-08-11T11:06:09-0400 [DEBUG   ] numcodecs 418040:22946905679424 Registering codec 'json2'\n2025-08-11T11:06:09-0400 [DEBUG   ] numcodecs 418040:22946905679424 Registering codec 'vlen-utf8'\n2025-08-11T11:06:09-0400 [DEBUG   ] numcodecs 418040:22946905679424 Registering codec 'vlen-bytes'\n2025-08-11T11:06:09-0400 [DEBUG   ] numcodecs 418040:22946905679424 Registering codec 'vlen-array'\n2025-08-11T11:06:09-0400 [DEBUG   ] numcodecs 418040:22946905679424 Registering codec 'fletcher32'\n2025-08-11T11:06:09-0400 [DEBUG   ] numcodecs 418040:22946905679424 Registering codec 'msgpack2'\n2025-08-11T11:06:09-0400 [DEBUG   ] numcodecs 418040:22946905679424 Registering codec 'n5_wrapper'\n2025-08-11T11:06:10-0400 [INFO    ] dandi 418040:22946905679424 Found 2 files to consider\n2025-08-11T11:06:10-0400 [DEBUG   ] fscacher.cache 418040:22941210412800 Calling memoized version of \u003cfunction get_digest at 0x14dd6afeef20\u003e for /autofs/space/nyx_002/users/data/macaque/MF278/DSI/shelled_data/mrtrix/csdprob_dhollander_seed_label99_x39.5_y16.5_z35.trk\n2025-08-11T11:06:10-0400 [DEBUG   ] dandi 418040:22941210412800 GET https://api.lincbrain.org/api/dandisets/000003/versions/draft/assets/\n2025-08-11T11:06:11-0400 [DEBUG   ] urllib3.connectionpool 418040:22941210412800 https://api.lincbrain.org:443 \"GET /api/dandisets/000003/versions/draft/assets/?path=derivatives%2Fsub-MF278%2Fdwi%2Fsub-MF278-sample-brain-desc-CSD-tractography-prob-dhollander-seed-label99-x39.5-y16.5-z35.trk HTTP/1.1\" 200 52\n2025-08-11T11:06:11-0400 [DEBUG   ] dandi 418040:22941210412800 Response: 200\n2025-08-11T11:06:11-0400 [WARNING ] bidsschematools 418040:22941210412800 No BIDS reference root provided.\n2025-08-11T11:06:11-0400 [INFO    ] bidsschematools 418040:22941210412800 No schema path specified, defaulting to the bundled schema, `/autofs/space/aspasia_002/users/code/miniforge3/envs/dandi/lib/python3.13/site-packages/bidsschematools/data/schema.json`.\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 Checking file `/autofs/space/aspasia_002/users/linc/000003/participants.tsv`.\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 Trying file types:\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 \t* `/autofs/space/aspasia_002/users/linc/000003/participants.tsv`, with pattern: `(?:.*/)?(?P\u003cpath\u003edataset_description\\.json)(?:/.*)?\\Z`\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 \t* `/autofs/space/aspasia_002/users/linc/000003/participants.tsv`, with pattern: `(?:.*/)?(?P\u003cpath\u003eCITATION\\.cff)(?:/.*)?\\Z`\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 \t* `/autofs/space/aspasia_002/users/linc/000003/participants.tsv`, with pattern: `(?:.*/)?(?P\u003cstem\u003e(?s:README))(?P\u003cextension\u003e|\\.md|\\.rst|\\.txt)\\Z`\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 \t* `/autofs/space/aspasia_002/users/linc/000003/participants.tsv`, with pattern: `(?:.*/)?(?P\u003cpath\u003eCHANGES)(?:/.*)?\\Z`\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 \t* `/autofs/space/aspasia_002/users/linc/000003/participants.tsv`, with pattern: `(?:.*/)?(?P\u003cpath\u003eLICENSE)(?:/.*)?\\Z`\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 \t* `/autofs/space/aspasia_002/users/linc/000003/participants.tsv`, with pattern: `(?:.*/)?(?P\u003cpath\u003egenetic_info\\.json)(?:/.*)?\\Z`\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 \t* `/autofs/space/aspasia_002/users/linc/000003/participants.tsv`, with pattern: `(?:.*/)?(?P\u003cpath\u003ecode)(?:/.*)?\\Z`\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 \t* `/autofs/space/aspasia_002/users/linc/000003/participants.tsv`, with pattern: `(?:.*/)?(?P\u003cpath\u003ederivatives)(?:/.*)?\\Z`\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 \t* `/autofs/space/aspasia_002/users/linc/000003/participants.tsv`, with pattern: `(?:.*/)?(?P\u003cpath\u003esourcedata)(?:/.*)?\\Z`\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 \t* `/autofs/space/aspasia_002/users/linc/000003/participants.tsv`, with pattern: `(?:.*/)?(?P\u003cpath\u003estimuli)(?:/.*)?\\Z`\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 \t* `/autofs/space/aspasia_002/users/linc/000003/participants.tsv`, with pattern: `(?:.*/)?(?P\u003cstem\u003e(?s:participants))(?P\u003cextension\u003e\\.tsv|\\.json)\\Z`\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 Match identified.\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 Checking file `/autofs/space/aspasia_002/users/linc/000003/dataset_description.json`.\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 Trying file types:\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 \t* `/autofs/space/aspasia_002/users/linc/000003/dataset_description.json`, with pattern: `(?:.*/)?(?P\u003cpath\u003edataset_description\\.json)(?:/.*)?\\Z`\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 Match identified.\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 Checking file `/autofs/space/aspasia_002/users/linc/000003/sourcedata/README`.\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 Trying file types:\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 \t* `/autofs/space/aspasia_002/users/linc/000003/sourcedata/README`, with pattern: `(?:.*/)?(?P\u003cpath\u003edataset_description\\.json)(?:/.*)?\\Z`\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 \t* `/autofs/space/aspasia_002/users/linc/000003/sourcedata/README`, with pattern: `(?:.*/)?(?P\u003cpath\u003eCITATION\\.cff)(?:/.*)?\\Z`\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 \t* `/autofs/space/aspasia_002/users/linc/000003/sourcedata/README`, with pattern: `(?:.*/)?(?P\u003cstem\u003e(?s:README))(?P\u003cextension\u003e|\\.md|\\.rst|\\.txt)\\Z`\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 Match identified.\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 Checking file `/autofs/space/aspasia_002/users/linc/000003/sourcedata/sub-MN115/micr/mn115LY_c21_s25nDF.jp2`.\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 Trying file types:\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 \t* `/autofs/space/aspasia_002/users/linc/000003/sourcedata/sub-MN115/micr/mn115LY_c21_s25nDF.jp2`, with pattern: `(?:.*/)?(?P\u003cpath\u003edataset_description\\.json)(?:/.*)?\\Z`\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 \t* `/autofs/space/aspasia_002/users/linc/000003/sourcedata/sub-MN115/micr/mn115LY_c21_s25nDF.jp2`, with pattern: `(?:.*/)?(?P\u003cpath\u003eCITATION\\.cff)(?:/.*)?\\Z`\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 \t* `/autofs/space/aspasia_002/users/linc/000003/sourcedata/sub-MN115/micr/mn115LY_c21_s25nDF.jp2`, with pattern: `(?:.*/)?(?P\u003cstem\u003e(?s:README))(?P\u003cextension\u003e|\\.md|\\.rst|\\.txt)\\Z`\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 \t* `/autofs/space/aspasia_002/users/linc/000003/sourcedata/sub-MN115/micr/mn115LY_c21_s25nDF.jp2`, with pattern: `(?:.*/)?(?P\u003cpath\u003eCHANGES)(?:/.*)?\\Z`\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 \t* `/autofs/space/aspasia_002/users/linc/000003/sourcedata/sub-MN115/micr/mn115LY_c21_s25nDF.jp2`, with pattern: `(?:.*/)?(?P\u003cpath\u003eLICENSE)(?:/.*)?\\Z`\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 \t* `/autofs/space/aspasia_002/users/linc/000003/sourcedata/sub-MN115/micr/mn115LY_c21_s25nDF.jp2`, with pattern: `(?:.*/)?(?P\u003cpath\u003egenetic_info\\.json)(?:/.*)?\\Z`\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 \t* `/autofs/space/aspasia_002/users/linc/000003/sourcedata/sub-MN115/micr/mn115LY_c21_s25nDF.jp2`, with pattern: `(?:.*/)?(?P\u003cpath\u003ecode)(?:/.*)?\\Z`\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 \t* `/autofs/space/aspasia_002/users/linc/000003/sourcedata/sub-MN115/micr/mn115LY_c21_s25nDF.jp2`, with pattern: `(?:.*/)?(?P\u003cpath\u003ederivatives)(?:/.*)?\\Z`\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 \t* `/autofs/space/aspasia_002/users/linc/000003/sourcedata/sub-MN115/micr/mn115LY_c21_s25nDF.jp2`, with pattern: `(?:.*/)?(?P\u003cpath\u003esourcedata)(?:/.*)?\\Z`\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 Match identified.\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 Checking file `/autofs/space/aspasia_002/users/linc/000003/sourcedata/sub-MN115/micr/mn115LY_c21_s04nDF.jp2`.\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 Trying file types:\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 \t* `/autofs/space/aspasia_002/users/linc/000003/sourcedata/sub-MN115/micr/mn115LY_c21_s04nDF.jp2`, with pattern: `(?:.*/)?(?P\u003cpath\u003edataset_description\\.json)(?:/.*)?\\Z`\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 \t* `/autofs/space/aspasia_002/users/linc/000003/sourcedata/sub-MN115/micr/mn115LY_c21_s04nDF.jp2`, with pattern: `(?:.*/)?(?P\u003cpath\u003eCITATION\\.cff)(?:/.*)?\\Z`\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 \t* `/autofs/space/aspasia_002/users/linc/000003/sourcedata/sub-MN115/micr/mn115LY_c21_s04nDF.jp2`, with pattern: `(?:.*/)?(?P\u003cstem\u003e(?s:README))(?P\u003cextension\u003e|\\.md|\\.rst|\\.txt)\\Z`\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 \t* `/autofs/space/aspasia_002/users/linc/000003/sourcedata/sub-MN115/micr/mn115LY_c21_s04nDF.jp2`, with pattern: `(?:.*/)?(?P\u003cpath\u003eCHANGES)(?:/.*)?\\Z`\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 \t* `/autofs/space/aspasia_002/users/linc/000003/sourcedata/sub-MN115/micr/mn115LY_c21_s04nDF.jp2`, with pattern: `(?:.*/)?(?P\u003cpath\u003eLICENSE)(?:/.*)?\\Z`\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 \t* `/autofs/space/aspasia_002/users/linc/000003/sourcedata/sub-MN115/micr/mn115LY_c21_s04nDF.jp2`, with pattern: `(?:.*/)?(?P\u003cpath\u003egenetic_info\\.json)(?:/.*)?\\Z`\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 \t* `/autofs/space/aspasia_002/users/linc/000003/sourcedata/sub-MN115/micr/mn115LY_c21_s04nDF.jp2`, with pattern: `(?:.*/)?(?P\u003cpath\u003ecode)(?:/.*)?\\Z`\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 \t* `/autofs/space/aspasia_002/users/linc/000003/sourcedata/sub-MN115/micr/mn115LY_c21_s04nDF.jp2`, with pattern: `(?:.*/)?(?P\u003cpath\u003ederivatives)(?:/.*)?\\Z`\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 \t* `/autofs/space/aspasia_002/users/linc/000003/sourcedata/sub-MN115/micr/mn115LY_c21_s04nDF.jp2`, with pattern: `(?:.*/)?(?P\u003cpath\u003esourcedata)(?:/.*)?\\Z`\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 Match identified.\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 Checking file `/autofs/space/aspasia_002/users/linc/000003/sourcedata/sub-MN115/micr/mn115LY_c21_s27nDF.jp2`.\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 Trying file types:\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 \t* `/autofs/space/aspasia_002/users/linc/000003/sourcedata/sub-MN115/micr/mn115LY_c21_s27nDF.jp2`, with pattern: `(?:.*/)?(?P\u003cpath\u003edataset_description\\.json)(?:/.*)?\\Z`\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 \t* `/autofs/space/aspasia_002/users/linc/000003/sourcedata/sub-MN115/micr/mn115LY_c21_s27nDF.jp2`, with pattern: `(?:.*/)?(?P\u003cpath\u003eCITATION\\.cff)(?:/.*)?\\Z`\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 \t* `/autofs/space/aspasia_002/users/linc/000003/sourcedata/sub-MN115/micr/mn115LY_c21_s27nDF.jp2`, with pattern: `(?:.*/)?(?P\u003cstem\u003e(?s:README))(?P\u003cextension\u003e|\\.md|\\.rst|\\.txt)\\Z`\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 \t* `/autofs/space/aspasia_002/users/linc/000003/sourcedata/sub-MN115/micr/mn115LY_c21_s27nDF.jp2`, with pattern: `(?:.*/)?(?P\u003cpath\u003eCHANGES)(?:/.*)?\\Z`\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 \t* `/autofs/space/aspasia_002/users/linc/000003/sourcedata/sub-MN115/micr/mn115LY_c21_s27nDF.jp2`, with pattern: `(?:.*/)?(?P\u003cpath\u003eLICENSE)(?:/.*)?\\Z`\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 \t* `/autofs/space/aspasia_002/users/linc/000003/sourcedata/sub-MN115/micr/mn115LY_c21_s27nDF.jp2`, with pattern: `(?:.*/)?(?P\u003cpath\u003egenetic_info\\.json)(?:/.*)?\\Z`\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 \t* `/autofs/space/aspasia_002/users/linc/000003/sourcedata/sub-MN115/micr/mn115LY_c21_s27nDF.jp2`, with pattern: `(?:.*/)?(?P\u003cpath\u003ecode)(?:/.*)?\\Z`\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 \t* `/autofs/space/aspasia_002/users/linc/000003/sourcedata/sub-MN115/micr/mn115LY_c21_s27nDF.jp2`, with pattern: `(?:.*/)?(?P\u003cpath\u003ederivatives)(?:/.*)?\\Z`\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 \t* `/autofs/space/aspasia_002/users/linc/000003/sourcedata/sub-MN115/micr/mn115LY_c21_s27nDF.jp2`, with pattern: `(?:.*/)?(?P\u003cpath\u003esourcedata)(?:/.*)?\\Z`\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 Match identified.\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 Checking file `/autofs/space/aspasia_002/users/linc/000003/sourcedata/sub-MN115/micr/mn115LY_c21_s24mDF.jp2`.\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 Trying file types:\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 \t* \n```\n\n\u003c/details\u003e\n\nThank you.\n\ncc @ayendiki @satra","files":null},{"type":6,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1754936699,"metadata":{"github-id":"UCE_lAHODBZtRc7FU0mWzoTen34"},"target":"5b082792ea833750a0e3d438186b07a93fae6d1e7d8d77361c3f46ee2d2df5a0","message":"Hi @yarikoptic @CodyCBakerPhD,\n\nAnastasia is trying to upload a single .trk file to lincbrain.org.  She has local files (.jp2, .zarr, .png) that are on not in the Dandiset on lincbrain.org.  Based on the logs it seems that the DANDI Client is going through all of those local files (to validate?) before uploading the .trk file.\n\nHowever, based on the [docs](https://dandi.readthedocs.io/en/latest/cmdline/upload.html) it seems that we should be able to pass a path to `dandi upload` ,and only validate and upload that file:\n\n```\nBy default, all *.nwb, *.zarr, and *.ngff assets in the Dandiset (ignoring directories starting with a period) will be considered for the upload. You can point to specific files you would like to validate and have uploaded.\n```\n\nBelow are the commands she has tried (among other variants):\n\nCommand 1\n```\ndandi upload -i linc sub-MF278-sample-brain-desc-CSD-tractography-prob-dhollander-seed-label99-x39.5-y16.5-z35.trk\n```\n\nCommand 2\n```\nDANDI_DEVEL=1 dandi upload -i linc --allow-any-path --validation skip derivatives/sub-MF278/dwi/sub-MF278-sample-brain-desc-CSD-tractography-prob-dhollander-seed-label99-x39.5-y16.5-z35.trk\n```\n\n\u003cdetails\u003e\n\n\u003csummary\u003eHead of the log file\u003c/summary\u003e\n \n```bash\n2025-08-11T11:06:08-0400 [INFO    ] dandi 418040:22946905679424 python 3.13.5, dandi 0.69.3, dandischema 0.11.0, h5py 3.14.0, hdmf 4.1.0, pynwb 3.0.0, requests 2.32.4, urllib3 2.4.0\n2025-08-11T11:06:08-0400 [INFO    ] dandi 418040:22946905679424 sys.argv = ['/space/aspasia/2/users/code/miniforge3/envs/dandi/bin/dandi', 'upload', '-i', 'linc', '--allow-any-path', '--validation', 'skip', 'derivatives/sub-MF278/dwi/sub-MF278-sample-brain-desc-CSD-tractography-prob-dhollander-seed-label99-x39.5-y16.5-z35.trk']\n2025-08-11T11:06:08-0400 [INFO    ] dandi 418040:22946905679424 os.getcwd() = /autofs/space/aspasia_002/users/linc/000003\n2025-08-11T11:06:08-0400 [DEBUG   ] urllib3.connectionpool 418040:22946905679424 Starting new HTTPS connection (1): rig.mit.edu:443\n2025-08-11T11:06:08-0400 [DEBUG   ] dandi 418040:22946905679424 Could not check dandi/dandi-cli for version updates: Connection to server could not be made\n2025-08-11T11:06:08-0400 [DEBUG   ] urllib3.connectionpool 418040:22946905679424 Starting new HTTPS connection (1): api.lincbrain.org:443\n2025-08-11T11:06:08-0400 [DEBUG   ] urllib3.connectionpool 418040:22946905679424 https://api.lincbrain.org:443 \"GET /api/info/ HTTP/1.1\" 200 358\n2025-08-11T11:06:08-0400 [DEBUG   ] dandi 418040:22946905679424 GET https://api.lincbrain.org/api/info/\n2025-08-11T11:06:08-0400 [DEBUG   ] urllib3.connectionpool 418040:22946905679424 Starting new HTTPS connection (1): api.lincbrain.org:443\n2025-08-11T11:06:08-0400 [DEBUG   ] urllib3.connectionpool 418040:22946905679424 https://api.lincbrain.org:443 \"GET /api/info/ HTTP/1.1\" 200 358\n2025-08-11T11:06:08-0400 [DEBUG   ] dandi 418040:22946905679424 Response: 200\n2025-08-11T11:06:08-0400 [DEBUG   ] dandi 418040:22946905679424 Using api key from DANDI_API_KEY environment variable\n2025-08-11T11:06:08-0400 [DEBUG   ] dandi 418040:22946905679424 GET https://api.lincbrain.org/api/auth/token\n2025-08-11T11:06:08-0400 [DEBUG   ] urllib3.connectionpool 418040:22946905679424 https://api.lincbrain.org:443 \"GET /api/auth/token HTTP/1.1\" 301 None\n2025-08-11T11:06:08-0400 [DEBUG   ] urllib3.connectionpool 418040:22946905679424 https://api.lincbrain.org:443 \"GET /api/auth/token/ HTTP/1.1\" 200 42\n2025-08-11T11:06:08-0400 [DEBUG   ] dandi 418040:22946905679424 Response: 200\n2025-08-11T11:06:08-0400 [DEBUG   ] dandi 418040:22946905679424 Found identifier DANDI:000003 in top level 'identifier'\n2025-08-11T11:06:09-0400 [DEBUG   ] h5py._conv 418040:22946905679424 Creating converter from 7 to 5\n2025-08-11T11:06:09-0400 [DEBUG   ] h5py._conv 418040:22946905679424 Creating converter from 5 to 7\n2025-08-11T11:06:09-0400 [DEBUG   ] h5py._conv 418040:22946905679424 Creating converter from 7 to 5\n2025-08-11T11:06:09-0400 [DEBUG   ] h5py._conv 418040:22946905679424 Creating converter from 5 to 7\n2025-08-11T11:06:09-0400 [DEBUG   ] numcodecs 418040:22946905679424 Registering codec 'zlib'\n2025-08-11T11:06:09-0400 [DEBUG   ] numcodecs 418040:22946905679424 Registering codec 'gzip'\n2025-08-11T11:06:09-0400 [DEBUG   ] numcodecs 418040:22946905679424 Registering codec 'bz2'\n2025-08-11T11:06:09-0400 [DEBUG   ] numcodecs 418040:22946905679424 Registering codec 'lzma'\n2025-08-11T11:06:09-0400 [DEBUG   ] numcodecs 418040:22946905679424 Registering codec 'blosc'\n2025-08-11T11:06:09-0400 [DEBUG   ] numcodecs 418040:22946905679424 Registering codec 'zstd'\n2025-08-11T11:06:09-0400 [DEBUG   ] numcodecs 418040:22946905679424 Registering codec 'lz4'\n2025-08-11T11:06:09-0400 [DEBUG   ] numcodecs 418040:22946905679424 Registering codec 'astype'\n2025-08-11T11:06:09-0400 [DEBUG   ] numcodecs 418040:22946905679424 Registering codec 'delta'\n2025-08-11T11:06:09-0400 [DEBUG   ] numcodecs 418040:22946905679424 Registering codec 'quantize'\n2025-08-11T11:06:09-0400 [DEBUG   ] numcodecs 418040:22946905679424 Registering codec 'fixedscaleoffset'\n2025-08-11T11:06:09-0400 [DEBUG   ] numcodecs 418040:22946905679424 Registering codec 'packbits'\n2025-08-11T11:06:09-0400 [DEBUG   ] numcodecs 418040:22946905679424 Registering codec 'categorize'\n2025-08-11T11:06:09-0400 [DEBUG   ] numcodecs 418040:22946905679424 Registering codec 'pickle'\n2025-08-11T11:06:09-0400 [DEBUG   ] numcodecs 418040:22946905679424 Registering codec 'base64'\n2025-08-11T11:06:09-0400 [DEBUG   ] numcodecs 418040:22946905679424 Registering codec 'shuffle'\n2025-08-11T11:06:09-0400 [DEBUG   ] numcodecs 418040:22946905679424 Registering codec 'bitround'\n2025-08-11T11:06:09-0400 [DEBUG   ] numcodecs 418040:22946905679424 Registering codec 'crc32'\n2025-08-11T11:06:09-0400 [DEBUG   ] numcodecs 418040:22946905679424 Registering codec 'adler32'\n2025-08-11T11:06:09-0400 [DEBUG   ] numcodecs 418040:22946905679424 Registering codec 'jenkins_lookup3'\n2025-08-11T11:06:09-0400 [DEBUG   ] numcodecs 418040:22946905679424 Registering codec 'json2'\n2025-08-11T11:06:09-0400 [DEBUG   ] numcodecs 418040:22946905679424 Registering codec 'vlen-utf8'\n2025-08-11T11:06:09-0400 [DEBUG   ] numcodecs 418040:22946905679424 Registering codec 'vlen-bytes'\n2025-08-11T11:06:09-0400 [DEBUG   ] numcodecs 418040:22946905679424 Registering codec 'vlen-array'\n2025-08-11T11:06:09-0400 [DEBUG   ] numcodecs 418040:22946905679424 Registering codec 'fletcher32'\n2025-08-11T11:06:09-0400 [DEBUG   ] numcodecs 418040:22946905679424 Registering codec 'msgpack2'\n2025-08-11T11:06:09-0400 [DEBUG   ] numcodecs 418040:22946905679424 Registering codec 'n5_wrapper'\n2025-08-11T11:06:10-0400 [INFO    ] dandi 418040:22946905679424 Found 2 files to consider\n2025-08-11T11:06:10-0400 [DEBUG   ] fscacher.cache 418040:22941210412800 Calling memoized version of \u003cfunction get_digest at 0x14dd6afeef20\u003e for /autofs/space/nyx_002/users/data/macaque/MF278/DSI/shelled_data/mrtrix/csdprob_dhollander_seed_label99_x39.5_y16.5_z35.trk\n2025-08-11T11:06:10-0400 [DEBUG   ] dandi 418040:22941210412800 GET https://api.lincbrain.org/api/dandisets/000003/versions/draft/assets/\n2025-08-11T11:06:11-0400 [DEBUG   ] urllib3.connectionpool 418040:22941210412800 https://api.lincbrain.org:443 \"GET /api/dandisets/000003/versions/draft/assets/?path=derivatives%2Fsub-MF278%2Fdwi%2Fsub-MF278-sample-brain-desc-CSD-tractography-prob-dhollander-seed-label99-x39.5-y16.5-z35.trk HTTP/1.1\" 200 52\n2025-08-11T11:06:11-0400 [DEBUG   ] dandi 418040:22941210412800 Response: 200\n2025-08-11T11:06:11-0400 [WARNING ] bidsschematools 418040:22941210412800 No BIDS reference root provided.\n2025-08-11T11:06:11-0400 [INFO    ] bidsschematools 418040:22941210412800 No schema path specified, defaulting to the bundled schema, `/autofs/space/aspasia_002/users/code/miniforge3/envs/dandi/lib/python3.13/site-packages/bidsschematools/data/schema.json`.\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 Checking file `/autofs/space/aspasia_002/users/linc/000003/participants.tsv`.\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 Trying file types:\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 \t* `/autofs/space/aspasia_002/users/linc/000003/participants.tsv`, with pattern: `(?:.*/)?(?P\u003cpath\u003edataset_description\\.json)(?:/.*)?\\Z`\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 \t* `/autofs/space/aspasia_002/users/linc/000003/participants.tsv`, with pattern: `(?:.*/)?(?P\u003cpath\u003eCITATION\\.cff)(?:/.*)?\\Z`\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 \t* `/autofs/space/aspasia_002/users/linc/000003/participants.tsv`, with pattern: `(?:.*/)?(?P\u003cstem\u003e(?s:README))(?P\u003cextension\u003e|\\.md|\\.rst|\\.txt)\\Z`\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 \t* `/autofs/space/aspasia_002/users/linc/000003/participants.tsv`, with pattern: `(?:.*/)?(?P\u003cpath\u003eCHANGES)(?:/.*)?\\Z`\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 \t* `/autofs/space/aspasia_002/users/linc/000003/participants.tsv`, with pattern: `(?:.*/)?(?P\u003cpath\u003eLICENSE)(?:/.*)?\\Z`\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 \t* `/autofs/space/aspasia_002/users/linc/000003/participants.tsv`, with pattern: `(?:.*/)?(?P\u003cpath\u003egenetic_info\\.json)(?:/.*)?\\Z`\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 \t* `/autofs/space/aspasia_002/users/linc/000003/participants.tsv`, with pattern: `(?:.*/)?(?P\u003cpath\u003ecode)(?:/.*)?\\Z`\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 \t* `/autofs/space/aspasia_002/users/linc/000003/participants.tsv`, with pattern: `(?:.*/)?(?P\u003cpath\u003ederivatives)(?:/.*)?\\Z`\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 \t* `/autofs/space/aspasia_002/users/linc/000003/participants.tsv`, with pattern: `(?:.*/)?(?P\u003cpath\u003esourcedata)(?:/.*)?\\Z`\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 \t* `/autofs/space/aspasia_002/users/linc/000003/participants.tsv`, with pattern: `(?:.*/)?(?P\u003cpath\u003estimuli)(?:/.*)?\\Z`\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 \t* `/autofs/space/aspasia_002/users/linc/000003/participants.tsv`, with pattern: `(?:.*/)?(?P\u003cstem\u003e(?s:participants))(?P\u003cextension\u003e\\.tsv|\\.json)\\Z`\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 Match identified.\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 Checking file `/autofs/space/aspasia_002/users/linc/000003/dataset_description.json`.\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 Trying file types:\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 \t* `/autofs/space/aspasia_002/users/linc/000003/dataset_description.json`, with pattern: `(?:.*/)?(?P\u003cpath\u003edataset_description\\.json)(?:/.*)?\\Z`\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 Match identified.\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 Checking file `/autofs/space/aspasia_002/users/linc/000003/sourcedata/README`.\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 Trying file types:\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 \t* `/autofs/space/aspasia_002/users/linc/000003/sourcedata/README`, with pattern: `(?:.*/)?(?P\u003cpath\u003edataset_description\\.json)(?:/.*)?\\Z`\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 \t* `/autofs/space/aspasia_002/users/linc/000003/sourcedata/README`, with pattern: `(?:.*/)?(?P\u003cpath\u003eCITATION\\.cff)(?:/.*)?\\Z`\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 \t* `/autofs/space/aspasia_002/users/linc/000003/sourcedata/README`, with pattern: `(?:.*/)?(?P\u003cstem\u003e(?s:README))(?P\u003cextension\u003e|\\.md|\\.rst|\\.txt)\\Z`\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 Match identified.\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 Checking file `/autofs/space/aspasia_002/users/linc/000003/sourcedata/sub-MN115/micr/mn115LY_c21_s25nDF.jp2`.\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 Trying file types:\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 \t* `/autofs/space/aspasia_002/users/linc/000003/sourcedata/sub-MN115/micr/mn115LY_c21_s25nDF.jp2`, with pattern: `(?:.*/)?(?P\u003cpath\u003edataset_description\\.json)(?:/.*)?\\Z`\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 \t* `/autofs/space/aspasia_002/users/linc/000003/sourcedata/sub-MN115/micr/mn115LY_c21_s25nDF.jp2`, with pattern: `(?:.*/)?(?P\u003cpath\u003eCITATION\\.cff)(?:/.*)?\\Z`\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 \t* `/autofs/space/aspasia_002/users/linc/000003/sourcedata/sub-MN115/micr/mn115LY_c21_s25nDF.jp2`, with pattern: `(?:.*/)?(?P\u003cstem\u003e(?s:README))(?P\u003cextension\u003e|\\.md|\\.rst|\\.txt)\\Z`\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 \t* `/autofs/space/aspasia_002/users/linc/000003/sourcedata/sub-MN115/micr/mn115LY_c21_s25nDF.jp2`, with pattern: `(?:.*/)?(?P\u003cpath\u003eCHANGES)(?:/.*)?\\Z`\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 \t* `/autofs/space/aspasia_002/users/linc/000003/sourcedata/sub-MN115/micr/mn115LY_c21_s25nDF.jp2`, with pattern: `(?:.*/)?(?P\u003cpath\u003eLICENSE)(?:/.*)?\\Z`\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 \t* `/autofs/space/aspasia_002/users/linc/000003/sourcedata/sub-MN115/micr/mn115LY_c21_s25nDF.jp2`, with pattern: `(?:.*/)?(?P\u003cpath\u003egenetic_info\\.json)(?:/.*)?\\Z`\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 \t* `/autofs/space/aspasia_002/users/linc/000003/sourcedata/sub-MN115/micr/mn115LY_c21_s25nDF.jp2`, with pattern: `(?:.*/)?(?P\u003cpath\u003ecode)(?:/.*)?\\Z`\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 \t* `/autofs/space/aspasia_002/users/linc/000003/sourcedata/sub-MN115/micr/mn115LY_c21_s25nDF.jp2`, with pattern: `(?:.*/)?(?P\u003cpath\u003ederivatives)(?:/.*)?\\Z`\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 \t* `/autofs/space/aspasia_002/users/linc/000003/sourcedata/sub-MN115/micr/mn115LY_c21_s25nDF.jp2`, with pattern: `(?:.*/)?(?P\u003cpath\u003esourcedata)(?:/.*)?\\Z`\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 Match identified.\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 Checking file `/autofs/space/aspasia_002/users/linc/000003/sourcedata/sub-MN115/micr/mn115LY_c21_s04nDF.jp2`.\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 Trying file types:\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 \t* `/autofs/space/aspasia_002/users/linc/000003/sourcedata/sub-MN115/micr/mn115LY_c21_s04nDF.jp2`, with pattern: `(?:.*/)?(?P\u003cpath\u003edataset_description\\.json)(?:/.*)?\\Z`\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 \t* `/autofs/space/aspasia_002/users/linc/000003/sourcedata/sub-MN115/micr/mn115LY_c21_s04nDF.jp2`, with pattern: `(?:.*/)?(?P\u003cpath\u003eCITATION\\.cff)(?:/.*)?\\Z`\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 \t* `/autofs/space/aspasia_002/users/linc/000003/sourcedata/sub-MN115/micr/mn115LY_c21_s04nDF.jp2`, with pattern: `(?:.*/)?(?P\u003cstem\u003e(?s:README))(?P\u003cextension\u003e|\\.md|\\.rst|\\.txt)\\Z`\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 \t* `/autofs/space/aspasia_002/users/linc/000003/sourcedata/sub-MN115/micr/mn115LY_c21_s04nDF.jp2`, with pattern: `(?:.*/)?(?P\u003cpath\u003eCHANGES)(?:/.*)?\\Z`\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 \t* `/autofs/space/aspasia_002/users/linc/000003/sourcedata/sub-MN115/micr/mn115LY_c21_s04nDF.jp2`, with pattern: `(?:.*/)?(?P\u003cpath\u003eLICENSE)(?:/.*)?\\Z`\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 \t* `/autofs/space/aspasia_002/users/linc/000003/sourcedata/sub-MN115/micr/mn115LY_c21_s04nDF.jp2`, with pattern: `(?:.*/)?(?P\u003cpath\u003egenetic_info\\.json)(?:/.*)?\\Z`\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 \t* `/autofs/space/aspasia_002/users/linc/000003/sourcedata/sub-MN115/micr/mn115LY_c21_s04nDF.jp2`, with pattern: `(?:.*/)?(?P\u003cpath\u003ecode)(?:/.*)?\\Z`\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 \t* `/autofs/space/aspasia_002/users/linc/000003/sourcedata/sub-MN115/micr/mn115LY_c21_s04nDF.jp2`, with pattern: `(?:.*/)?(?P\u003cpath\u003ederivatives)(?:/.*)?\\Z`\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 \t* `/autofs/space/aspasia_002/users/linc/000003/sourcedata/sub-MN115/micr/mn115LY_c21_s04nDF.jp2`, with pattern: `(?:.*/)?(?P\u003cpath\u003esourcedata)(?:/.*)?\\Z`\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 Match identified.\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 Checking file `/autofs/space/aspasia_002/users/linc/000003/sourcedata/sub-MN115/micr/mn115LY_c21_s27nDF.jp2`.\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 Trying file types:\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 \t* `/autofs/space/aspasia_002/users/linc/000003/sourcedata/sub-MN115/micr/mn115LY_c21_s27nDF.jp2`, with pattern: `(?:.*/)?(?P\u003cpath\u003edataset_description\\.json)(?:/.*)?\\Z`\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 \t* `/autofs/space/aspasia_002/users/linc/000003/sourcedata/sub-MN115/micr/mn115LY_c21_s27nDF.jp2`, with pattern: `(?:.*/)?(?P\u003cpath\u003eCITATION\\.cff)(?:/.*)?\\Z`\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 \t* `/autofs/space/aspasia_002/users/linc/000003/sourcedata/sub-MN115/micr/mn115LY_c21_s27nDF.jp2`, with pattern: `(?:.*/)?(?P\u003cstem\u003e(?s:README))(?P\u003cextension\u003e|\\.md|\\.rst|\\.txt)\\Z`\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 \t* `/autofs/space/aspasia_002/users/linc/000003/sourcedata/sub-MN115/micr/mn115LY_c21_s27nDF.jp2`, with pattern: `(?:.*/)?(?P\u003cpath\u003eCHANGES)(?:/.*)?\\Z`\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 \t* `/autofs/space/aspasia_002/users/linc/000003/sourcedata/sub-MN115/micr/mn115LY_c21_s27nDF.jp2`, with pattern: `(?:.*/)?(?P\u003cpath\u003eLICENSE)(?:/.*)?\\Z`\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 \t* `/autofs/space/aspasia_002/users/linc/000003/sourcedata/sub-MN115/micr/mn115LY_c21_s27nDF.jp2`, with pattern: `(?:.*/)?(?P\u003cpath\u003egenetic_info\\.json)(?:/.*)?\\Z`\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 \t* `/autofs/space/aspasia_002/users/linc/000003/sourcedata/sub-MN115/micr/mn115LY_c21_s27nDF.jp2`, with pattern: `(?:.*/)?(?P\u003cpath\u003ecode)(?:/.*)?\\Z`\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 \t* `/autofs/space/aspasia_002/users/linc/000003/sourcedata/sub-MN115/micr/mn115LY_c21_s27nDF.jp2`, with pattern: `(?:.*/)?(?P\u003cpath\u003ederivatives)(?:/.*)?\\Z`\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 \t* `/autofs/space/aspasia_002/users/linc/000003/sourcedata/sub-MN115/micr/mn115LY_c21_s27nDF.jp2`, with pattern: `(?:.*/)?(?P\u003cpath\u003esourcedata)(?:/.*)?\\Z`\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 Match identified.\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 Checking file `/autofs/space/aspasia_002/users/linc/000003/sourcedata/sub-MN115/micr/mn115LY_c21_s24mDF.jp2`.\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 Trying file types:\n2025-08-11T11:06:13-0400 [DEBUG   ] bidsschematools 418040:22941210412800 \t* \n```\n\n\u003c/details\u003e\n\nThank you.\n\ncc @ayendiki @satra\n\nnote: extract from head of log with versions (might be outdated): python 3.13.5, dandi 0.69.3, dandischema 0.11.0, h5py 3.14.0, hdmf 4.1.0, pynwb 3.0.0, requests 2.32.4, urllib3 2.4.0","files":null},{"type":3,"author":{"id":"7eea5bdd45d6b031d3bf16a241db06db985fb528"},"timestamp":1754929208,"metadata":{"github-id":"IC_kwDODBZtRc69Sbg0","github-url":"https://github.com/dandi/dandi-cli/issues/1676#issuecomment-3175725108"},"message":"So, @yarikoptic may correct me, but as I look through the codebase for a BIDS dataset, the invocation at https://github.com/dandi/dandi-cli/blob/master/dandi/files/bids.py#L113-L116 is necessary to target the 'BIDS root' since that is how the BIDs validator expects - perusing their [usage documentation](https://bids-validator.readthedocs.io/en/stable/user_guide/command-line.html#usage) I do not see simple commands for specifying to validate only a subset of files or subset of the dataset\n\nIn a broader sense for BIDS it makes sense (to me anyway) to validate the entire entity as a whole and would require a pretty sophisticated enhancement to somehow 'cache' runs of previous validations relative to the current local file changes\n\nA simpler approach, if agreed to be desired, could be to generate a small 'mock' directory of symlinks imitating a BIDS dataset with only the `paths` contained therein together with any surrounding required BIDS metadata sidecars\n\nWas this a blocking issue or just a note on performance (upload taking a longer time to initialize than expected)?","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1754930869,"metadata":{"github-id":"IC_kwDODBZtRc69S97a","github-url":"https://github.com/dandi/dandi-cli/issues/1676#issuecomment-3175866074"},"message":"Unfortunately, ATM, it is indeed the fact that bids-validator operates on the entire dataset only, see (and potentially chime in or even contribute!):\n- https://github.com/bids-standard/bids-validator/issues/200\n\nBut with `--validation skip ` there should be no validation and with `--allow-any-path` indeed any specific path pointed to should be uploaded. In the example you showed -- it is only the .trk file. Did you try to point to those other specific files @kabilar @ayendiki","files":null},{"type":3,"author":{"id":"d8203afd43c9e0a9d07c45dd62b58a81d53a2ebe"},"timestamp":1754932143,"metadata":{"github-id":"IC_kwDODBZtRc69TWdw","github-url":"https://github.com/dandi/dandi-cli/issues/1676#issuecomment-3175966576"},"message":"\u003e But with `--validation skip ` there should be no validation and with `--allow-any-path` indeed any specific path pointed to should be uploaded. In the example you showed -- it is only the .trk file. Did you try to point to those other specific files\n\nHi @yarikoptic, we haven't.  What would that show?","files":null},{"type":3,"author":{"id":"d8203afd43c9e0a9d07c45dd62b58a81d53a2ebe"},"timestamp":1754932415,"metadata":{"github-id":"IC_kwDODBZtRc69TaMY","github-url":"https://github.com/dandi/dandi-cli/issues/1676#issuecomment-3175981848"},"message":"\u003e Was this a blocking issue or just a note on performance (upload taking a longer time to initialize than expected)?\n\nHi @CodyCBakerPhD, this unfortunately is blocking because this upload takes a long time to process, produces a large log file (\u003e1 GB), and fills up the user's quota on the system where the log file is stored.  And so the upload of the trk file doesn't happen.","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1754936793,"metadata":{"github-id":"IC_kwDODBZtRc69Uk0z","github-url":"https://github.com/dandi/dandi-cli/issues/1676#issuecomment-3176287539"},"message":"would you check with `-l WARNING` option to dandi if log file becomes more approachable?","files":null},{"type":3,"author":{"id":"d8203afd43c9e0a9d07c45dd62b58a81d53a2ebe"},"timestamp":1754940954,"metadata":{"github-id":"IC_kwDODBZtRc69V0cT","github-url":"https://github.com/dandi/dandi-cli/issues/1676#issuecomment-3176613651"},"message":"\u003e would you check with `-l WARNING` option to dandi if log file becomes more approachable?\n\ntagging @ayendiki","files":null},{"type":3,"author":{"id":"e21d3ca807eb00cd2ead0f00fba73f32cebda4e7"},"timestamp":1754945071,"metadata":{"github-id":"IC_kwDODBZtRc69Wq4y","github-url":"https://github.com/dandi/dandi-cli/issues/1676#issuecomment-3176836658"},"message":"\"dandi -l WARNING upload -i linc --validation skip\" worked! So the problem was that it was trying to log \u003e 1M lines about files that were not being uploaded. Is that desirable behavior?","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1754946229,"metadata":{"github-id":"IC_kwDODBZtRc69W39t","github-url":"https://github.com/dandi/dandi-cli/issues/1676#issuecomment-3176890221"},"message":"thank you @ayendiki ! it is not desirable and we should strive to address that (eventually ;) ).  Would you or @kabilar still have older huge file?  I wondered  if you could check for me if there were messages about files within .zarr/ folders, as kinda relating to a freshly filed\n\n- https://github.com/bids-standard/bids-validator/issues/227\n\n?","files":null},{"type":3,"author":{"id":"e21d3ca807eb00cd2ead0f00fba73f32cebda4e7"},"timestamp":1754946491,"metadata":{"github-id":"IC_kwDODBZtRc69W6io","github-url":"https://github.com/dandi/dandi-cli/issues/1676#issuecomment-3176900776"},"message":"As Kabi mentioned, it was also happening for .PNG and other files, so not a Zarr specific issue. However, it's possible that the \"not descending in .zarr sub-folders\" fix could address another issue we were having, when trying to move .zarr assets (which we ended up working around by moving the remote and local asset separately).","files":null}]}