{"version":2,"ops":[{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1651614775,"metadata":{"github-id":"IC_kwDODBZtRc5Cj3hy","github-url":"https://github.com/dandi/dandi-cli/issues/995#issuecomment-1116698738"},"message":"we are talking about staging right??\n\n```\n$\u003e curl -s -X GET \"https://api-staging.dandiarchive.org/api/info/\" -H \"accept: application/json\" | jq '.schema_version'\n\"0.6.3\"\n$\u003e curl -s -X GET \"https://api.dandiarchive.org/api/info/\" -H \"accept: application/json\" | jq '.schema_version'       \n\"0.6.2\"\n```\nthen indeed just try that #987 version -- I just tried, seems to work.  if we are not talking about staging -- then it is odd and please reopen.","files":null},{"type":4,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1651614775,"metadata":{"github-id":"CE_lADODBZtRc5I_a5hzwAAAAGGFU_f"},"status":2},{"type":3,"author":{"id":"7eea5bdd45d6b031d3bf16a241db06db985fb528"},"timestamp":1651692588,"metadata":{"github-id":"IC_kwDODBZtRc5Cn1-2","github-url":"https://github.com/dandi/dandi-cli/issues/995#issuecomment-1117740982"},"message":"@yarikoptic The issue was first discovered by a CI-based staging server test, yes. Pinning to that branch did resolve the issue there.\n\nBut I also just ran across this same exact error for a non-staging dandiset (000233). Neither `pip install -U dandi` nor `pip install -U dandischema` allowed `dandi upload` to work.","files":null},{"type":3,"author":{"id":"7eea5bdd45d6b031d3bf16a241db06db985fb528"},"timestamp":1651692643,"metadata":{"github-id":"IC_kwDODBZtRc5Cn2Lx","github-url":"https://github.com/dandi/dandi-cli/issues/995#issuecomment-1117741809"},"message":"\u003e  if we are not talking about staging -- then it is odd and please reopen.\n\nI don't have permissions to reopen. Would you prefer a different ticket #?","files":null},{"type":3,"author":{"id":"7eea5bdd45d6b031d3bf16a241db06db985fb528"},"timestamp":1651692760,"metadata":{"github-id":"IC_kwDODBZtRc5Cn3G-","github-url":"https://github.com/dandi/dandi-cli/issues/995#issuecomment-1117745598"},"message":"Or, rather, it seems the error is reversed for the non-staging set.\n\n```\nError: Server requires schema version 0.6.2; client only supports 0.6.3.  You may need to upgrade dandi and/or dandischema.\n```","files":null},{"type":3,"author":{"id":"7eea5bdd45d6b031d3bf16a241db06db985fb528"},"timestamp":1651692877,"metadata":{"github-id":"IC_kwDODBZtRc5Cn4r3","github-url":"https://github.com/dandi/dandi-cli/issues/995#issuecomment-1117752055"},"message":"Downgrading (despite the error message above) to `dandi==0.39.2` fixed this for the non-staging.","files":null},{"type":3,"author":{"id":"12cb25e6e3f19b53447b05d00d7d4d53c925c908"},"timestamp":1651693032,"metadata":{"github-id":"IC_kwDODBZtRc5Cn6Wz","github-url":"https://github.com/dandi/dandi-cli/issues/995#issuecomment-1117758899"},"message":"@yarikoptic - it's because no api-server release was done with the merge you did. only staging was updated. \n\n@CodyCBakerPhD - the production server is indeed on a separate mode.","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1651759266,"metadata":{"github-id":"IC_kwDODBZtRc5CrF9Y","github-url":"https://github.com/dandi/dandi-cli/issues/995#issuecomment-1118592856"},"message":"\u003e @yarikoptic - it's because no api-server release was done with the merge you did. only staging was updated.\n\nyeap.  We are releasing main deployment now... \nthe main point is that the original issue occurred against the staging with not patched client, after using patched client -- worked.  What happened against production in https://github.com/dandi/dandi-cli/issues/995#issuecomment-1117740982 -- most likely that the patched client (pip install would not downgrade) was used, so it didn't work for similar reason. explicit downgrade installed released version compatible with the deployed server","files":null}]}