{"version":2,"ops":[{"type":5,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1618953622,"metadata":{"github-id":"MDEyOkxhYmVsZWRFdmVudDQ2MjE2NDQ1NTc="},"added":["UX"],"removed":[]},{"type":5,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1618953622,"metadata":{"github-id":"MDEyOkxhYmVsZWRFdmVudDQ2MjE2NDQ1NTk="},"added":["cmd-upload"],"removed":[]},{"type":3,"author":{"id":"364914f8b1c8a9131d300bf2978e4ffe2ff1aeeb"},"timestamp":1619009712,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDgyNDAzNzA0OA==","github-url":"https://github.com/dandi/dandi-cli/issues/584#issuecomment-824037048"},"message":"@dchiquito How should the client respond when a 500 error occurs during upload?","files":null},{"type":3,"author":{"id":"818a29386a430d42cbb57ad6dcccbe0fb486ffc3"},"timestamp":1619019022,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDgyNDE1NDgxMg==","github-url":"https://github.com/dandi/dandi-cli/issues/584#issuecomment-824154812"},"message":"The request was being made to `dandiarchive.s3.amazonaws.com` to upload a part, and the AWS S3 servers returned the 500. I would assume that you can just retry the request in that case. The presigned URL should still be valid, and I would sincerely hope that any AWS 500 errors are transient.","files":null},{"type":3,"author":{"id":"364914f8b1c8a9131d300bf2978e4ffe2ff1aeeb"},"timestamp":1619020699,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDgyNDE3NDcyMQ==","github-url":"https://github.com/dandi/dandi-cli/issues/584#issuecomment-824174721"},"message":"@yarikoptic Currently, the REST client only retries connection errors and 503 responses.  Would it be acceptable to retry all 5xx responses?","files":null},{"type":6,"author":{"id":"364914f8b1c8a9131d300bf2978e4ffe2ff1aeeb"},"timestamp":1619021397,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdElzc3VlQ29tbWVudEVkaXQ6NDUzODIzMTM1"},"target":"e3399cc317523a3235b7210e8a94e137e5664e90d6669687c38ee54902b80478","message":"@yarikoptic Currently, the REST client only retries connection errors and 503 responses.  Would it be acceptable to retry all 5xx responses to all requests?","files":null},{"type":3,"author":{"id":"12cb25e6e3f19b53447b05d00d7d4d53c925c908"},"timestamp":1619021762,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDgyNDE4NzA0MQ==","github-url":"https://github.com/dandi/dandi-cli/issues/584#issuecomment-824187041"},"message":"would suggest doing retries (unless you can interpret the error exactly), and perhaps retries with exponential backoff up to maybe 3 times, wherever calls are critical (like uploads).","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1619023904,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDgyNDIxMDI0MA==","github-url":"https://github.com/dandi/dandi-cli/issues/584#issuecomment-824210240"},"message":"\u003e @yarikoptic Currently, the REST client only retries connection errors and 503 responses. Would it be acceptable to retry all 5xx responses to all requests?\n\nI do not think we should retry for every POST/PUT 500 (might result in some duplicates etc, should be approached consciously I think).  But in the case of S3 upload -- yes, we should.","files":null},{"type":4,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1619028753,"metadata":{"github-id":"MDExOkNsb3NlZEV2ZW50NDYyNjU1OTYxMA=="},"status":2}]}