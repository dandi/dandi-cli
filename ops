{"version":2,"ops":[{"type":3,"author":{"id":"364914f8b1c8a9131d300bf2978e4ffe2ff1aeeb"},"timestamp":1649768995,"metadata":{"github-id":"IC_kwDODBZtRc5BXm7u","github-url":"https://github.com/dandi/dandi-cli/issues/956#issuecomment-1096707822"},"message":"\u003e what specific CLI steps need to be followed to sync the assets and dandisets?\n\nWhat exactly do you mean by \"sync\"?\n\n\u003e can asset complete be forced through a debug flag if directly not available?\n\nWhat do you mean by \"asset complete\"?\n\n\u003e how should i quantify operation times? are there debug flags that can be enabled to record time to check?\n\nYour only option here is to calculate the differences between timestamps in the logs.\n\n\u003e i am assuming that CLI upload is still slower than out of band upload + CLI check. has this been tested. if not can someone test this?\n\nI was under the impression that you were the only person even doing anything with out-of-band upload.","files":null},{"type":3,"author":{"id":"12cb25e6e3f19b53447b05d00d7d4d53c925c908"},"timestamp":1649772386,"metadata":{"github-id":"IC_kwDODBZtRc5BX3wU","github-url":"https://github.com/dandi/dandi-cli/issues/956#issuecomment-1096776724"},"message":"\u003e What exactly do you mean by \"sync\"?\n\nthe state of the asset metadata matches what is in the blob and locally. i was assuming just using the `sync` command, but i don't think that will work fully for this use case.\n\n\u003e What do you mean by \"asset complete\"?\n\nthis should have been zarr/upload/complete. but the general notion here is to trigger the api end point so that the archive can verify/checksum the upload and update the metadata as needed, and for the CLI to check that it matches what it computed locally.\n\n\u003e Your only option here is to calculate the differences between timestamps in the logs.\n\ncould you please create an option in the CLI to track these in perhaps DEBUG mode? or an util to process the logs.\n\n\u003e you were the only person even doing anything with out-of-band upload.\n\nyes, and i am limited in my time in testing this. hence asking if someone could do the test. the primary reason in doing the out-of-band upload is that the in-band upload is significantly slower, and given the size of the dandiset, we did not have that kind of time. this is an optimization process that will come into play for dandisets into the future, and understanding why another tool is significantly faster and whether that kind of performance could be implemented in python would be good for us to know.","files":null},{"type":3,"author":{"id":"364914f8b1c8a9131d300bf2978e4ffe2ff1aeeb"},"timestamp":1649772944,"metadata":{"github-id":"IC_kwDODBZtRc5BX6fc","github-url":"https://github.com/dandi/dandi-cli/issues/956#issuecomment-1096787932"},"message":"* `dandi upload` always updates asset metadata on the server whenever an asset is uploaded.  For blob assets, whether an asset is uploaded is determined by the value of the `--existing` option.  For Zarr assets, metadata is always updated, entries are always synchronized, and `/zarr/{zarr_id}/ingest/` is always called.\n* The CLI no longer computes checksums for an entire Zarr and does not check the server's checksum for accuracy.\n\n\u003e could you please create an option in the CLI to track these in perhaps DEBUG mode? or an util to process the logs.\n\nCreate an issue describing exactly what you need and we'll see.","files":null}]}