{"version":2,"ops":[{"type":6,"author":{"id":"12cb25e6e3f19b53447b05d00d7d4d53c925c908"},"timestamp":1578071008,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdDMzMjI5NzA2OQ=="},"target":"b2b406971033fa36b2b1977d7788b461433f132aba0c3992c036652f24585a24","message":"turn dandi cli into pydandi/dandipy/...\n\nrelated to this i think if we turned dandi into a library, one should be able to do:\n\n```\nimport dandi as di\ndi.get_dataset('ds00001', dataset_base_dir='/data/', mmap=True)\n```\n\nand this call could use whatever necessary (datalad, dandi api, etc.,.) under the hood. in some ways this is similar to what reactopya does, but it does not provide direct access to the object. it would be nice if we had a zarr-based mode (https://zarr.readthedocs.io/en/stable/).","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1597267686,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY3MzExOTk1OQ==","github-url":"https://github.com/dandi/dandi-cli/issues/33#issuecomment-673119959"},"message":"we kinda have it already for some commands, e.g.\n\n```\n$\u003e python -c 'from dandi.download import download; download(\"DANDI:000006\", \".\")'   \n2020-08-12 17:25:02,048 [    INFO] Traversing remote dandisets (000006) recursively\nPATH                 SIZE DONE    DONE% CHECKSUM STATUS    MESSAGE         \ndandiset.yaml                                    skipped   already exists  \nSummary:                  0 Bytes                1 skipped 1 already exists\n                          \u003c0.00%                                           \nTraceback (most recent call last):\n  File \"\u003cstring\u003e\", line 1, in \u003cmodule\u003e\n  File \"/tmp/venvs/dev3-installfrompip/lib/python3.8/site-packages/dandi/download.py\", line 306, in download\n    for rec in gen_:\n  File \"/tmp/venvs/dev3-installfrompip/lib/python3.8/site-packages/dandi/download.py\", line 450, in download_generator\n    for resp in _download_generator:\n  File \"/tmp/venvs/dev3-installfrompip/lib/python3.8/site-packages/dandi/download.py\", line 662, in _download_file\n    raise FileExistsError(block)\nFileExistsError: File './000006/sub-anm369962/sub-anm369962_ses-20170309.nwb' already exists\n```\nbut we should unify and decide on their consistent behavior (on how to fail) and returned values. Also I guess we better have a dedicated `dandi.api` or `dandi.ui` (we have `datalad.ui`) module which collects all those methods -- I would not want to bring them up into the \"imported by default\" `__init__.py` - they might be heavy on imports etc, which might slow things (like `--help`) down.","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1601648984,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDcwMjc2Njk3MA==","github-url":"https://github.com/dandi/dandi-cli/issues/33#issuecomment-702766970"},"message":"ref: #249 outlines my thinking about API design for the Python interface -- go \"datalad way\" is the summary","files":null}]}