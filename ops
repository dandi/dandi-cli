{"version":2,"ops":[{"type":1,"author":{"id":"f068089e26f6e2e30d51a62e75a77af7d9dc5ecb"},"timestamp":1653002868,"metadata":{"github-id":"I_kwDODBZtRc5KDfB7","github-url":"https://github.com/dandi/dandi-cli/issues/1017","origin":"github"},"title":"error during dandiset download","message":"download appears to be successful, but threw this error in the end.\n\n```bash\n(base) MacBook-Pro-3:data bendichter$ dandi download DANDI:000008\nPATH                                               SIZE       DONE             DONE% CHECKSUM STATUS          MESSAGE   \ndandiset.yaml                                                                                 done            updated   \n...0420-slice-2_cell-20180420-sample-2_icephys.nwb 9.3 MB     9.3 MB            100%    ok    done                      \n...0420-slice-3_cell-20180420-sample-3_icephys.nwb 9.3 MB     9.3 MB            100%    ok    done                      \n...            \n...1003-slice-1_cell-20181003-sample-1_icephys.nwb 8.7 MB     8.7 MB            100%    ok    done                      \n...1003-slice-3_cell-20181003-sample-3_icephys.nwb 8.8 MB     8.8 MB            100%    ok    done                      \n...1003-slice-4_cell-20181003-sample-4_icephys.nwb 9.3 MB     9.3 MB            100%    ok    done                      \n...1003-slice-2_cell-20181003-sample-2_icephys.nwb 9.3 MB     9.3 MB            100%    ok    done                      \nSummary:                                           11.9 GB    11.9 GB                         1328 done       1 updated \n                                                              99.92%                          1 downloading             \n                                                              ETA: 32 minutes                                           \n\n\nERROR: 1 asynchronous worker failed\n\nProducing value for row ('sub-mouse-UWILU/sub-mouse-UWILU_ses-20181114-sample-2_slice-20181114-slice-1_cell-20181114-sample-2_icephys.nwb',) failed:\nTraceback (most recent call last):\n  File \"/Users/bendichter/opt/miniconda3/lib/python3.9/site-packages/urllib3/connectionpool.py\", line 703, in urlopen\n    httplib_response = self._make_request(\n  File \"/Users/bendichter/opt/miniconda3/lib/python3.9/site-packages/urllib3/connectionpool.py\", line 386, in _make_request\n    self._validate_conn(conn)\n  File \"/Users/bendichter/opt/miniconda3/lib/python3.9/site-packages/urllib3/connectionpool.py\", line 1040, in _validate_conn\n    conn.connect()\n  File \"/Users/bendichter/opt/miniconda3/lib/python3.9/site-packages/urllib3/connection.py\", line 416, in connect\n    self.sock = ssl_wrap_socket(\n  File \"/Users/bendichter/opt/miniconda3/lib/python3.9/site-packages/urllib3/util/ssl_.py\", line 449, in ssl_wrap_socket\n    ssl_sock = _ssl_wrap_socket_impl(\n  File \"/Users/bendichter/opt/miniconda3/lib/python3.9/site-packages/urllib3/util/ssl_.py\", line 493, in _ssl_wrap_socket_impl\n    return ssl_context.wrap_socket(sock, server_hostname=server_hostname)\n  File \"/Users/bendichter/opt/miniconda3/lib/python3.9/ssl.py\", line 500, in wrap_socket\n    return self.sslsocket_class._create(\n  File \"/Users/bendichter/opt/miniconda3/lib/python3.9/ssl.py\", line 1040, in _create\n    self.do_handshake()\n  File \"/Users/bendichter/opt/miniconda3/lib/python3.9/ssl.py\", line 1309, in do_handshake\n    self._sslobj.do_handshake()\nConnectionResetError: [Errno 54] Connection reset by peer\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/Users/bendichter/opt/miniconda3/lib/python3.9/site-packages/requests/adapters.py\", line 440, in send\n    resp = conn.urlopen(\n  File \"/Users/bendichter/opt/miniconda3/lib/python3.9/site-packages/urllib3/connectionpool.py\", line 785, in urlopen\n    retries = retries.increment(\n  File \"/Users/bendichter/opt/miniconda3/lib/python3.9/site-packages/urllib3/util/retry.py\", line 550, in increment\n    raise six.reraise(type(error), error, _stacktrace)\n  File \"/Users/bendichter/opt/miniconda3/lib/python3.9/site-packages/urllib3/packages/six.py\", line 769, in reraise\n    raise value.with_traceback(tb)\n  File \"/Users/bendichter/opt/miniconda3/lib/python3.9/site-packages/urllib3/connectionpool.py\", line 703, in urlopen\n    httplib_response = self._make_request(\n  File \"/Users/bendichter/opt/miniconda3/lib/python3.9/site-packages/urllib3/connectionpool.py\", line 386, in _make_request\n    self._validate_conn(conn)\n  File \"/Users/bendichter/opt/miniconda3/lib/python3.9/site-packages/urllib3/connectionpool.py\", line 1040, in _validate_conn\n    conn.connect()\n  File \"/Users/bendichter/opt/miniconda3/lib/python3.9/site-packages/urllib3/connection.py\", line 416, in connect\n    self.sock = ssl_wrap_socket(\n  File \"/Users/bendichter/opt/miniconda3/lib/python3.9/site-packages/urllib3/util/ssl_.py\", line 449, in ssl_wrap_socket\n    ssl_sock = _ssl_wrap_socket_impl(\n  File \"/Users/bendichter/opt/miniconda3/lib/python3.9/site-packages/urllib3/util/ssl_.py\", line 493, in _ssl_wrap_socket_impl\n    return ssl_context.wrap_socket(sock, server_hostname=server_hostname)\n  File \"/Users/bendichter/opt/miniconda3/lib/python3.9/ssl.py\", line 500, in wrap_socket\n    return self.sslsocket_class._create(\n  File \"/Users/bendichter/opt/miniconda3/lib/python3.9/ssl.py\", line 1040, in _create\n    self.do_handshake()\n  File \"/Users/bendichter/opt/miniconda3/lib/python3.9/ssl.py\", line 1309, in do_handshake\n    self._sslobj.do_handshake()\nurllib3.exceptions.ProtocolError: ('Connection aborted.', ConnectionResetError(54, 'Connection reset by peer'))\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/Users/bendichter/opt/miniconda3/lib/python3.9/site-packages/pyout/interface.py\", line 279, in _print_async_exceptions\n    future.result()\n  File \"/Users/bendichter/opt/miniconda3/lib/python3.9/concurrent/futures/_base.py\", line 438, in result\n    return self.__get_result()\n  File \"/Users/bendichter/opt/miniconda3/lib/python3.9/concurrent/futures/_base.py\", line 390, in __get_result\n    raise self._exception\n  File \"/Users/bendichter/opt/miniconda3/lib/python3.9/concurrent/futures/thread.py\", line 52, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Users/bendichter/opt/miniconda3/lib/python3.9/site-packages/pyout/interface.py\", line 482, in async_fn\n    for i in gen:\n  File \"/Users/bendichter/opt/miniconda3/lib/python3.9/site-packages/dandi/download.py\", line 645, in _download_file\n    for block in downloader(dldir.offset):\n  File \"/Users/bendichter/opt/miniconda3/lib/python3.9/site-packages/dandi/dandiapi.py\", line 1292, in downloader\n    result = self.client.session.get(url, stream=True, headers=headers)\n  File \"/Users/bendichter/opt/miniconda3/lib/python3.9/site-packages/requests/sessions.py\", line 542, in get\n    return self.request('GET', url, **kwargs)\n  File \"/Users/bendichter/opt/miniconda3/lib/python3.9/site-packages/requests/sessions.py\", line 529, in request\n    resp = self.send(prep, **send_kwargs)\n  File \"/Users/bendichter/opt/miniconda3/lib/python3.9/site-packages/requests/sessions.py\", line 645, in send\n    r = adapter.send(request, **kwargs)\n  File \"/Users/bendichter/opt/miniconda3/lib/python3.9/site-packages/requests/adapters.py\", line 501, in send\n    raise ConnectionError(err, request=request)\nrequests.exceptions.ConnectionError: ('Connection aborted.', ConnectionResetError(54, 'Connection reset by peer'))\n\n2022-05-19 19:26:14,509 [    INFO] Logs saved in /Users/bendichter/Library/Logs/dandi-cli/20220519225323Z-80015.log\n```","files":null}]}