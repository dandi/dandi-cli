{"version":2,"ops":[{"type":1,"author":{"id":"f068089e26f6e2e30d51a62e75a77af7d9dc5ecb"},"timestamp":1654615639,"metadata":{"github-id":"I_kwDODBZtRc5LTy9F","github-url":"https://github.com/dandi/dandi-cli/issues/1027","origin":"github"},"title":"getting asset s3 location in staging","message":"```python\nfrom dandi.dandiapi import DandiAPIClient\n\ndandiset_id, filepath = \"101116\", \"sub-001/sub-001_ecephys.nwb\"\n\n\nwith DandiAPIClient(\"https://api-staging.dandiarchive.org/api\") as client:\n    asset = client.get_dandiset(dandiset_id, \"draft\").get_asset_by_path(filepath)\n    s3_url = asset.get_content_url(follow_redirects=1, strip_query=True)\n```\n\n```pytb\nError 404 while sending HEAD request to https://api.dandiarchive.org/api/assets/9a13c458-7355-44a3-8b0e-c48026e1dc2e/download/: \n---------------------------------------------------------------------------\nHTTP404Error                              Traceback (most recent call last)\nInput In [14], in \u003cmodule\u003e\n      6 with DandiAPIClient(\"https://api-staging.dandiarchive.org/api\") as client:\n      7     asset = client.get_dandiset(dandiset_id, \"draft\").get_asset_by_path(filepath)\n----\u003e 8     s3_url = asset.get_content_url(follow_redirects=1, strip_query=True)\n\nFile /opt/conda/lib/python3.9/site-packages/dandi/dandiapi.py:1316, in BaseRemoteAsset.get_content_url(self, regex, follow_redirects, strip_query)\n   1314 elif follow_redirects:\n   1315     for _ in range(follow_redirects):\n-\u003e 1316         r = self.client.request(\n   1317             \"HEAD\", url, json_resp=False, allow_redirects=False\n   1318         )\n   1319         if \"Location\" in r.headers:\n   1320             url = r.headers[\"Location\"]\n\nFile /opt/conda/lib/python3.9/site-packages/dandi/dandiapi.py:252, in RESTFullAPIClient.request(self, method, path, params, data, files, json, headers, json_resp, retry_statuses, **kwargs)\n    250     lgr.error(\"%s: %s\", msg, result.text)\n    251 if result.status_code == 404:\n--\u003e 252     raise HTTP404Error(msg, response=result)\n    253 else:\n    254     raise requests.HTTPError(msg, response=result)\n\nHTTP404Error: Error 404 while sending HEAD request to https://api.dandiarchive.org/api/assets/9a13c458-7355-44a3-8b0e-c48026e1dc2e/download/\n```","files":null}]}