{"version":2,"ops":[{"type":1,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1597332328,"metadata":{"github-id":"MDU6SXNzdWU2Nzg1MjYzMTg=","github-url":"https://github.com/dandi/dandi-cli/issues/195","origin":"github"},"title":"RF: dandi/cli to avoid circular import","message":"probably to move all helper functions in a dedicated `cli/base.py` etc.\n\nOtherwise this demonstrates them:\n```\n$\u003e python -m pytest -v --doctest-modules dandi/cli\n======================================================================================================= test session starts =======================================================================================================\nplatform linux -- Python 3.8.5, pytest-4.6.9, py-1.8.1, pluggy-0.13.0 -- /home/yoh/proj/dandi/dandi-cli/venvs/dev3/bin/python\ncachedir: .pytest_cache\nhypothesis profile 'default' -\u003e database=DirectoryBasedExampleDatabase('/home/yoh/proj/dandi/dandi-cli/.hypothesis/examples')\nrootdir: /home/yoh/proj/dandi/dandi-cli, inifile: pytest.ini\nplugins: mock-3.2.0, cov-2.10.0, xdist-1.32.0, timeout-1.3.3, forked-1.1.3, hypothesis-4.36.2\ncollected 8 items / 2 errors / 6 selected                                                                                                                                                                                         \n\n============================================================================================================= ERRORS ==============================================================================================================\n___________________________________________________________________________________________ ERROR collecting dandi/cli/cmd_download.py ____________________________________________________________________________________________\ndandi/cli/cmd_download.py:4: in \u003cmodule\u003e\n    from .command import devel_option, main, map_to_click_exceptions\ndandi/cli/command.py:222: in \u003cmodule\u003e\n    from .cmd_download import download  # noqa: E402, F401\nE   ImportError: cannot import name 'download' from partially initialized module 'dandi.cli.cmd_download' (most likely due to a circular import) (/home/yoh/proj/dandi/dandi-cli/dandi/cli/cmd_download.py)\n___________________________________________________________________________________________ ERROR collecting dandi/cli/cmd_register.py ____________________________________________________________________________________________\ndandi/cli/cmd_register.py:3: in \u003cmodule\u003e\n    from .command import (\ndandi/cli/command.py:224: in \u003cmodule\u003e\n    from .cmd_register import register  # noqa: E402, F401\nE   ImportError: cannot import name 'register' from partially initialized module 'dandi.cli.cmd_register' (most likely due to a circular import) (/home/yoh/proj/dandi/dandi-cli/dandi/cli/cmd_register.py)\n!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! Interrupted: 2 errors during collection !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n===================================================================================================== 2 error in 0.16 seconds =============================================================\n```","files":null}]}