{"version":2,"ops":[{"type":1,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1611675384,"metadata":{"github-id":"MDU6SXNzdWU3OTQzMzE4NDI=","github-url":"https://github.com/dandi/dandi-cli/issues/345","origin":"github"},"title":"dandi-api: upload - (re)introduce handling of existing files","message":"We should reintroduce handling of existing files similar to girder based implementation \nhttps://github.com/dandi/dandi-cli/blob/master/dandi/upload.py#L342\nsince dandi-api does verify that there is no asset with a given path (https://github.com/dandi/dandi-api/issues/65). Since\n we have no locking, it would be a \"racy\" code but ATM I do not see another way around: we just would need to report an error if having uploaded an new file we still fail to mint a new asset for it (if another process uploaded for that path meanwhile as well).\n\nTODOs\n- [ ] Test for correct behavior upon possible values of `existing`\n- [ ] Test should be added which would\n  - trigger 'publish', i.e. making a release\n  - upload a new file (into a draft)\n  - verify that we can still get released file from the published version and","files":null}]}