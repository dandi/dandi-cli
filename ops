{"version":2,"ops":[{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1654622435,"metadata":{"github-id":"IC_kwDODBZtRc5Ee7Dt","github-url":"https://github.com/dandi/dandi-cli/issues/1027#issuecomment-1148956909"},"message":"so content url is incorrect (leads to main deployment , not staging)... and that is by dandi-archive itself:\n\n```\n$\u003e curl --silent https://api-staging.dandiarchive.org/api/dandisets/101116/versions/draft/assets/9a13c458-7355-44a3-8b0e-c48026e1dc2e/ | jq '.contentUrl'\n[\n  \"https://api.dandiarchive.org/api/assets/9a13c458-7355-44a3-8b0e-c48026e1dc2e/download/\",\n  \"https://dandi-api-staging-dandisets.s3.amazonaws.com/blobs/5f4/b7a/5f4b7a1f-7b95-4ad8-9579-4df6025371cc\"\n]\n```\nchecking if issue is known/filed to dandi-archive...","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1654622784,"metadata":{"github-id":"IC_kwDODBZtRc5Ee8U_","github-url":"https://github.com/dandi/dandi-cli/issues/1027#issuecomment-1148962111"},"message":"and that asset was produced/uploaded awhile back right?\n```\n    \"dateModified\": \"2022-01-12T19:35:10.912644+00:00\",\n    \"schemaVersion\": \"0.6.0\",\n```\nso it was before `dandischema` became \"smarter\" about `repository` and thus had hardcoded URI for the API I guess ... ATM it seems tobe all good: https://github.com/dandi/dandi-archive/issues/1081#issuecomment-1116843208\n\nSince we are talking about staging server, and on the real one even assets with older schema version would have their URLs pointing to coincidentally correct `api.dandiarchive.org` I don't think we should do anything, besides may be for this one for you to \"reupload\" to  update metadata and thus to gain correct(ed) entry for contentUrl.  I will close with this but we can continue discussion/reopen if you feel otherwise.","files":null},{"type":4,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1654622785,"metadata":{"github-id":"CE_lADODBZtRc5LTy9FzwAAAAGTISea"},"status":2},{"type":3,"author":{"id":"f068089e26f6e2e30d51a62e75a77af7d9dc5ecb"},"timestamp":1654625233,"metadata":{"github-id":"IC_kwDODBZtRc5EfGnO","github-url":"https://github.com/dandi/dandi-cli/issues/1027#issuecomment-1149004238"},"message":"@yarikoptic won't this be true for lots of files? Here, as I have said in other places, I don't think reupload is a good solution for updating old metadata. It is wasteful of bandwidth, it takes a long time, and I can only correct dandisets that I have access to. I think we need a way to update metadata server-side.","files":null},{"type":6,"author":{"id":"f068089e26f6e2e30d51a62e75a77af7d9dc5ecb"},"timestamp":1654625256,"metadata":{"github-id":"UCE_lALODBZtRc5EfGnOziP0KXs"},"target":"b1b2f35e3fa524523e9f5c2c503077599aa1e9b10c3b9023b0474cb19629e074","message":"@yarikoptic won't this be true for lots of files? Here, as I have said in other places, I don't think reupload is a good solution for updating old metadata. It is wasteful of bandwidth, it takes a long time, and I can only correct dandisets that I have write access to. I think we need a way to update metadata server-side.","files":null},{"type":4,"author":{"id":"f068089e26f6e2e30d51a62e75a77af7d9dc5ecb"},"timestamp":1654625233,"metadata":{"github-id":"REE_lADODBZtRc5LTy9FzwAAAAGTJREX"},"status":1},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1712771102,"metadata":{"github-id":"IC_kwDODBZtRc56FAVJ","github-url":"https://github.com/dandi/dandi-cli/issues/1027#issuecomment-2048132425"},"message":"I have tested with the same call and got correct url -- so I think the issue was addressed one way or another since then\n\n```shell\n‚ùØ curl --silent https://api-staging.dandiarchive.org/api/dandisets/101116/versions/draft/assets/9a13c458-7355-44a3-8b0e-c48026e1dc2e/ | jq '.contentUrl'\n[\n  \"https://api-staging.dandiarchive.org/api/assets/9a13c458-7355-44a3-8b0e-c48026e1dc2e/download/\",\n  \"https://dandi-api-staging-dandisets.s3.amazonaws.com/blobs/5f4/b7a/5f4b7a1f-7b95-4ad8-9579-4df6025371cc\"\n]\n```","files":null},{"type":4,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1712771105,"metadata":{"github-id":"CE_lADODBZtRc5LTy9FzwAAAALkpmBH"},"status":2}]}