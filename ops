{"version":2,"ops":[{"type":1,"author":{"id":"d8203afd43c9e0a9d07c45dd62b58a81d53a2ebe"},"timestamp":1721771863,"metadata":{"github-id":"I_kwDODBZtRc6QnMzc","github-url":"https://github.com/dandi/dandi-cli/issues/1468","origin":"github"},"title":"`dandi download` redownloads entire Dandiset when run within Dandiset directory","message":"## Use case\n\nIn the following use case, the DANDI Client is working as intended, but I would propose that the functionality may not always match user behavior.  It is a bit confusing to describe this use case, so let me know if you need further clarification.  Thank you.\n\n1. A user wants to edit file(s) of a Dandiset that exists locally and then upload the edited files.\n2. Since they have the Dandiset locally, the observed behavior is to change the current working directory to within the Dandiset directory (i.e. `cd ~/dataset_id`).\n3. They then may run `dandi download \u003curl\u003e` to pull down the latest files from collaborators, edit files locally, and then run `dandi upload`.\n4. This workflow actually downloads the entire Dandiset again creating a new tree within the current working directory (i.e. `~/dataset_id`).  The workaround would be to change into the parent directory or the add the option `-o ..`.\n\n## Possible solution\n\n1. If a user runs `dandi download \u003curl\u003e` within a directory that has a corresponding `dandiset.yaml` file, perhaps the DANDI Client can run a check and update the existing Dandiset directory?\n\ncc @aaronkanzer @kilimanjaro2","files":null}]}