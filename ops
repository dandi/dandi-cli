{"version":2,"ops":[{"type":1,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1626895718,"metadata":{"github-id":"MDU6SXNzdWU5NTAwNDI2MjQ=","github-url":"https://github.com/dandi/dandi-cli/issues/723","origin":"github"},"title":"Support downloading from top level `/assets` endpoint","message":"web-ui in the recent past switched to use top level `/assets/\u003cid\u003e/download/` end point for download urls, from previous original one which was bound to a particular dandiset version.  A quick attempt to just add a new url pattern:\n```diff\ndiff --git a/dandi/dandiarchive.py b/dandi/dandiarchive.py\nindex 6d183f9..41ff4e6 100644\n--- a/dandi/dandiarchive.py\n+++ b/dandi/dandiarchive.py\n@@ -289,6 +289,13 @@ class _dandi_url_parser:\n             \"https://\u003cserver\u003e[/api]/dandisets/\u003cdandiset id\u003e/versions/\u003cversion\u003e\"\n             \"/assets/\u003casset id\u003e[/download]\",\n         ),\n+        (\n+            re.compile(\n+                rf\"{server_grp}api/assets/(?P\u003casset_id\u003e[^?/]+)/download/?\"\n+            ),\n+            {},\n+            \"https://\u003cserver\u003e/api/assets/\u003casset id\u003e/download\",\n+        ),\n         (\n             re.compile(\n                 rf\"{server_grp}(?P\u003casset_type\u003edandiset)s/{dandiset_id_grp}\"\n```\nis not sufficient since then logic \"downstream\" expects knowing dandiset, and also needs adjustments.","files":null}]}