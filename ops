{"version":2,"ops":[{"type":6,"author":{"id":"0ab0e40999605aa8d5ec6be68372511fdc4a2fdf"},"timestamp":1643139749,"metadata":{"github-id":"UCE_lAHODBZtRc5CarbQzikFLQ8"},"target":"d1ef1cdbfe079d70907bde1b42a737ee333d9ffa519cc527722605991fd843a5","message":"This is the local test summary, I assume it could be related to data-fetching not working in the sandbox, in which case it would be cool if there was a direct test data archive which can be fetched explicitly (many of the tests have `urllib3.exceptions.NewConnectionError` in the full traceback) â€” or it could be something in addition to that as well, any info is welcome :)\n\n```\n========================================================= short test summary info ==========================================================\nFAILED dandi/cli/tests/test_command.py::test_smoke[command1] - AssertionError: Exited abnormally. out=Error: Ignore list for validate() c...\nFAILED dandi/cli/tests/test_ls.py::test_smoke[json] - KeyError: 'session_id'\nFAILED dandi/cli/tests/test_ls.py::test_smoke[json_pp] - KeyError: 'session_id'\nFAILED dandi/cli/tests/test_ls.py::test_smoke[json_lines] - KeyError: 'session_id'\nFAILED dandi/cli/tests/test_ls.py::test_smoke[yaml] - KeyError: 'session_id'\nFAILED dandi/cli/tests/test_ls.py::test_smoke_local_schema - KeyError: 'digest'\nFAILED dandi/tests/test_metadata.py::test_get_metadata - TypeError: Ignore list for get_metadata() contains an unexpected keyword argumen...\nFAILED dandi/tests/test_metadata.py::test_species - requests.exceptions.ConnectionError: HTTPConnectionPool(host='purl.obolibrary.org', p...\nFAILED dandi/tests/test_organize.py::test_ambiguous - assert 1 == 0\nFAILED dandi/tests/test_pynwb_utils.py::test_nwb_has_external_links - TypeError: Ignore list for nwb_has_external_links() contains an une...\nFAILED dandi/tests/test_utils.py::test_get_instance_dandi_with_api - ValueError: Invalid version string: '0+unknown'\nFAILED dandi/tests/test_utils.py::test_get_instance_url - ValueError: Invalid version string: '0+unknown'\nFAILED dandi/tests/test_utils.py::test_get_instance_cli_version_too_old - ValueError: Invalid version string: '0+unknown'\nFAILED dandi/tests/test_utils.py::test_get_instance_bad_cli_version - ValueError: https://example.dandi/ returned an incorrectly formatte...\nFAILED dandi/tests/test_validate.py::test_validate_simple1 - TypeError: Ignore list for validate() contains an unexpected keyword argumen...\nFAILED dandi/tests/test_validate.py::test_validate_simple2 - TypeError: Ignore list for validate() contains an unexpected keyword argumen...\nFAILED dandi/tests/test_validate.py::test_validate_simple2_new - TypeError: Ignore list for validate() contains an unexpected keyword arg...\nERROR dandi/tests/test_fixtures.py::test_organized_nwb_dir - AssertionError: [Parallel(n_jobs=-1)]: Using backend LokyBackend with 12 con...\nERROR dandi/tests/test_fixtures.py::test_organized_nwb_dir2 - AssertionError: [Parallel(n_jobs=-1)]: Using backend LokyBackend with 12 co...\n========================================== 17 failed, 189 passed, 140 skipped, 2 errors in 18.16s ==========================================\n```\n\nHere is the full build and test log: https://ppb.chymera.eu/6ff00d.log","files":null},{"type":3,"author":{"id":"364914f8b1c8a9131d300bf2978e4ffe2ff1aeeb"},"timestamp":1643155052,"metadata":{"github-id":"IC_kwDODBZtRc485jbr","github-url":"https://github.com/dandi/dandi-cli/issues/878#issuecomment-1021720299"},"message":"@TheChymera\n\n* Many of the failures seem to be caused by \"TypeError: Ignore list for \\* contains an unexpected keyword argument '_cache_fingerprint'\", which indicates that you're using an old version of fscacher that doesn't work with newer versions of joblib.  Upgrade fscacher and try again.\n* The tests that failed with \"ValueError: Invalid version string: '0+unknown'\" indicate that you're using a copy of dandi-cli without the relevant Git history needed to determine a version number.  You need to install dandi-cli from a full clone, an sdist, or a wheel, not a shallow clone.\n* I see only one test with `urllib3.exceptions.NewConnectionError` in the traceback, and that was because it wasn't marked with `skipif_no_network`; I've created a PR to fix it: #886.\n* I'm not certain about the remaining failures; see what happens to them after the above are taken care of.","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1643385844,"metadata":{"github-id":"IC_kwDODBZtRc49DoAZ","github-url":"https://github.com/dandi/dandi-cli/issues/878#issuecomment-1024360473"},"message":"I think @jwodder identified all possible causes for failing tests, and such that there is nothing to be done on dandi-cli side.  If there is anything to fix, @TheChymera please reopen or file new dedicated issue(s).","files":null},{"type":6,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1643385862,"metadata":{"github-id":"UCE_lALODBZtRc49DoAZziB9MwA"},"target":"5cc76a653f89720af66f6a656fb28c1767ee1e9405bcf8d9c2150005e1a32d0f","message":"I think @jwodder identified all possible causes for failing tests, and such that there is nothing to be done on dandi-cli side.  If there is anything to fix, @TheChymera please reopen or file new dedicated issue(s) or PRs.","files":null},{"type":4,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1643385844,"metadata":{"github-id":"CE_lADODBZtRc5CarbQzwAAAAFj8fFr"},"status":2},{"type":3,"author":{"id":"0ab0e40999605aa8d5ec6be68372511fdc4a2fdf"},"timestamp":1659019128,"metadata":{"github-id":"IC_kwDODBZtRc5Ha5WN","github-url":"https://github.com/dandi/dandi-cli/issues/878#issuecomment-1198232973"},"message":"Can confirm, issues solved as of the PyPI `0.45.1` release.","files":null}]}