{"version":2,"ops":[{"type":1,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1613499048,"metadata":{"github-id":"MDU6SXNzdWU4MDk1Mzc3Mzc=","github-url":"https://github.com/dandi/dandi-cli/issues/387","origin":"github"},"title":"upload (dandi-api): we keep replacing an asset which is already in the archive","message":"```\ndrogon:/mnt/backup/dandi/dandisets/000008\n$\u003e dandi --version\n0.10.0+156.gea86eee.dirty\n(dandi-devel) (git)/mnt/backup/dandi/dandisets/000008:[master]\n#179 !451 [0].....................................:Tue Feb 16 13:08:27:.\ndrogon:/mnt/backup/dandi/dandisets/000008\n$\u003e DANDI_DEVEL=1 dandi --pdb upload -i dandi-api --validation ignore sub-mouse-AAYYT/\n2021-02-16 13:08:33,439 [    INFO] Found 3 files to consider\nPATH                                                                                                            SIZE       ERRORS     UPLOAD STATUS                MESSAGE\nsub-mouse-AAYYT/sub-mouse-AAYYT_ses-20180420-sample-2_slice-20180420-slice-2_cell-20180420-sample-2_icephys.nwb 9.3 MB        4              extracting metadata          \nsub-mouse-AAYYT/sub-mouse-AAYYT_ses-20180420-sample-3_slice-20180420-slice-3_cell-20180420-sample-3_icephys.nwb 9.3 MB        4              extracting metadata          \nsub-mouse-AAYYT/sub-mouse-AAYYT_ses-20180420-sample-4_slice-20180420-slice-4_cell-20180420-sample-4_icephys.nwb 9.5 MB                       digesting                    \nsub-mouse-AAYYT/sub-mouse-AAYYT_ses-20180420-sample-2_slice-20180420-slice-2_cell-20180420-sample-2_icephys.nwb 9.3 MB        4              done                         \nsub-mouse-AAYYT/sub-mouse-AAYYT_ses-20180420-sample-3_slice-20180420-slice-3_cell-20180420-sample-3_icephys.nwb 9.3 MB        4              done                         \nsub-mouse-AAYYT/sub-mouse-AAYYT_ses-20180420-sample-4_slice-20180420-slice-4_cell-20180420-sample-4_icephys.nwb 9.5 MB        4              done                         \nSummary:                                                                                                        28.1 MB 3 with errors        3 done                       \n2021-02-16 13:08:36,268 [    INFO] Logs saved in /home/yoh/.cache/dandi-cli/log/20210216180831Z-2938.log\n(dandi-devel) (git)/mnt/backup/dandi/dandisets/000008:[master]\n#180 !452 [0].....................................:Tue Feb 16 13:08:36:.\ndrogon:/mnt/backup/dandi/dandisets/000008\n$\u003e DANDI_DEVEL=1 dandi --pdb upload -i dandi-api --validation ignore sub-mouse-AAYYT/\n2021-02-16 13:08:39,827 [    INFO] Found 3 files to consider\nPATH                                                                                                            SIZE       ERRORS     UPLOAD STATUS                MESSAGE\nsub-mouse-AAYYT/sub-mouse-AAYYT_ses-20180420-sample-2_slice-20180420-slice-2_cell-20180420-sample-2_icephys.nwb 9.3 MB        4              extracting metadata          \nsub-mouse-AAYYT/sub-mouse-AAYYT_ses-20180420-sample-3_slice-20180420-slice-3_cell-20180420-sample-3_icephys.nwb 9.3 MB        4              extracting metadata          \nsub-mouse-AAYYT/sub-mouse-AAYYT_ses-20180420-sample-4_slice-20180420-slice-4_cell-20180420-sample-4_icephys.nwb 9.5 MB                       digesting                    \nsub-mouse-AAYYT/sub-mouse-AAYYT_ses-20180420-sample-2_slice-20180420-slice-2_cell-20180420-sample-2_icephys.nwb 9.3 MB        4              done                         \nsub-mouse-AAYYT/sub-mouse-AAYYT_ses-20180420-sample-3_slice-20180420-slice-3_cell-20180420-sample-3_icephys.nwb 9.3 MB        4              done                         \nsub-mouse-AAYYT/sub-mouse-AAYYT_ses-20180420-sample-4_slice-20180420-slice-4_cell-20180420-sample-4_icephys.nwb 9.5 MB        4              done                         \nSummary:                                                                                                        28.1 MB 3 with errors        3 done                       \n2021-02-16 13:08:42,146 [    INFO] Logs saved in /home/yoh/.cache/dandi-cli/log/20210216180838Z-2959.log\n(dandi-devel) (git)/mnt/backup/dandi/dandisets/000008:[master]\n#181 !453 [0].....................................:Tue Feb 16 13:08:42:.\ndrogon:/mnt/backup/dandi/dandisets/000008\n$\u003e cat /home/yoh/.cache/dandi-cli/log/20210216180838Z-2959.log\n2021-02-16T13:08:38-0500 [INFO    ] dandi [META] sys.argv = ['/home/yoh/miniconda3/bin/dandi', '--pdb', 'upload', '-i', 'dandi-api', '--validation', 'ignore', 'sub-mouse-AAYYT/']\n2021-02-16T13:08:38-0500 [INFO    ] dandi [META] os.getcwd() = /mnt/backup/dandi/dandisets/000008\n2021-02-16T13:08:39-0500 [INFO    ] dandi Found 3 files to consider\n2021-02-16T13:08:40-0500 [INFO    ] dandi Replacing asset 96867e3d-456d-491a-8469-fdbf03e06e24\n2021-02-16T13:08:40-0500 [INFO    ] dandi Replacing asset 2a1c9561-5d6f-4630-8a15-c8304e50dd6a\n2021-02-16T13:08:40-0500 [INFO    ] dandi Replacing asset 0dcda3ae-90e3-4603-a01d-3819a2b2377e\n2021-02-16T13:08:42-0500 [INFO    ] dandi Logs saved in /home/yoh/.cache/dandi-cli/log/20210216180838Z-2959.log\n```\n\nIt should have not replaced asset \n- because I have no `--existing overwrite` or alike\n- because it didn't change\n\nAlso please move \"Replacing asset\" to DEBUG level  (#358 for a more general solution yet TODO)","files":null}]}