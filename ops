{"version":2,"ops":[{"type":3,"author":{"id":"364914f8b1c8a9131d300bf2978e4ffe2ff1aeeb"},"timestamp":1608323182,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDc0ODI5OTAwNQ==","github-url":"https://github.com/dandi/dandi-cli/issues/322#issuecomment-748299005"},"message":"@dchiquit `docker-compose run --rm django ./manage.py drf_create_token admin` is currently outputting some extra cruft that messes with the token extraction:\n\n```\nSystem check identified some issues:\n\nWARNINGS:\n?: (rest_framework.W001) You have specified a default PAGE_SIZE pagination rest_framework setting, without specifying also a DEFAULT_PAGINATION_CLASS.\nHINT: The default for DEFAULT_PAGINATION_CLASS is None. In previous versions this was PageNumberPagination. If you wish to define PAGE_SIZE globally whilst defining pagination_class on a per-view basis you may silence this check.\nGenerated token f98a70cafdd9c891690c32e95657d8799136cb2e for user admin\n```","files":null},{"type":6,"author":{"id":"364914f8b1c8a9131d300bf2978e4ffe2ff1aeeb"},"timestamp":1608323182,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdElzc3VlQ29tbWVudEVkaXQ6NDIyMjIyODQz"},"target":"49899e82c158a4ac183821066fec1ff2782c77560cff8dd68c46a3a4506e39ea","message":"@dchiquit FYI, `docker-compose run --rm django ./manage.py drf_create_token admin` is currently outputting some extra cruft that messes with the token extraction:\n\n```\nSystem check identified some issues:\n\nWARNINGS:\n?: (rest_framework.W001) You have specified a default PAGE_SIZE pagination rest_framework setting, without specifying also a DEFAULT_PAGINATION_CLASS.\nHINT: The default for DEFAULT_PAGINATION_CLASS is None. In previous versions this was PageNumberPagination. If you wish to define PAGE_SIZE globally whilst defining pagination_class on a per-view basis you may silence this check.\nGenerated token f98a70cafdd9c891690c32e95657d8799136cb2e for user admin\n```","files":null},{"type":3,"author":{"id":"364914f8b1c8a9131d300bf2978e4ffe2ff1aeeb"},"timestamp":1608323905,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDc0ODMwNzQyMQ==","github-url":"https://github.com/dandi/dandi-cli/issues/322#issuecomment-748307421"},"message":"@dchiquit Even after correcting the token extraction, I'm still getting a 401 when trying to create a Dandiset in the new API, and the response body says:\n\n```\n{\"detail\":\"Authentication credentials were not provided.\"}\n```\n\nI'm currently generating the token using `docker-compose run --rm django ./manage.py drf_create_token admin` and passing it in request headers as \"`Authorization: token {token}`\"; did something in the auth process change recently?","files":null},{"type":3,"author":{"id":"818a29386a430d42cbb57ad6dcccbe0fb486ffc3"},"timestamp":1608332991,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDc0ODM2Mzg2OA==","github-url":"https://github.com/dandi/dandi-cli/issues/322#issuecomment-748363868"},"message":"https://github.com/dandi/dandi-api/pull/43 should temporarily resolve the auth issues, and https://github.com/dandi/dandi-api/pull/44 should resolve the warning.\nI updated a helper library that tweaked some unexpected configurations under the hood, causing the warning and breaking token authentication. Things should be running smoother now.","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1608335523,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDc0ODM3NzkwOA==","github-url":"https://github.com/dandi/dandi-cli/issues/322#issuecomment-748377908"},"message":"Nice, especially then it would be nice to setup CI to set smoothness in stone ;-) @jwodder wdyt?\n\nPS holidays are upon us, so happy holidays, replies can be delayed until after ;-)","files":null},{"type":3,"author":{"id":"364914f8b1c8a9131d300bf2978e4ffe2ff1aeeb"},"timestamp":1608558213,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDc0ODk3OTk3NA==","github-url":"https://github.com/dandi/dandi-cli/issues/322#issuecomment-748979974"},"message":"The tests are passing again now.\n\n@yarikoptic What would this CI setup be testing that isn't already tested?","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1609776471,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDc1NDA2MzczNQ==","github-url":"https://github.com/dandi/dandi-cli/issues/322#issuecomment-754063735"},"message":"tests were passing 10 hours ago and #323 was just merged as well \"just in case\".  I guess we will be getting some fails/errors like the one listed [above](https://github.com/dandi/dandi-cli/issues/322#issuecomment-748307421) so indeed probably no need for additional CI setup/tests for now. Thanks!","files":null},{"type":4,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1609776471,"metadata":{"github-id":"MDExOkNsb3NlZEV2ZW50NDE2NTYzOTQxMw=="},"status":2}]}