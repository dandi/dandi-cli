{"version":2,"ops":[{"type":1,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1721327816,"metadata":{"github-id":"I_kwDODBZtRc6QEgT6","github-url":"https://github.com/dandi/dandi-cli/issues/1462","origin":"github"},"title":"Support partial zarr upload","message":"Original use-case\n\n- https://github.com/dandi/dandi-cli/issues/1474\n\nto modify some metadata files within zarr. Zarr itself might be huge (GBs) so it is a big waste to require download of the entire zarr folder to just update some metadata files. So relates also to ability for partial download\n\n- dandi/dandi-archive#1461 \n\n`dandi upload` if operating on a `.zarr` folder, should gain an option so upload only considers paths present but does not assume that it is \"all of zarr\" and remove the rest from remote zarr.  Then it needs to finalize zarr update with full manifest as with some files/folders of zarr present only in archive, and not locally.\n\nI think it should be `--zarr-mode full,partial-full,partial-lean`.  Modes\n- `full` -- current behavior (pretty much a sync IIRC)\n- `partial-full` -- if encountering zarr sub-folder locally, it would pretty much do `full` on that subfolder -- i.e. it would remove remote files under that subfolder if not present locally.  As a \"side-effect\" -- if encounters an empty sub-folder locally -- it would remove all the zarr subfiles potentially present with that folder prefix on archive (thus it would be easy to prune some undesired remote folders).   \n- `partial-lean` -- it would only concern with updates of files it encounters.","files":null}]}