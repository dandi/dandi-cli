{"version":2,"ops":[{"type":1,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1613500425,"metadata":{"github-id":"MDU6SXNzdWU4MDk1NTI3MDQ=","github-url":"https://github.com/dandi/dandi-cli/issues/389","origin":"github"},"title":"fscache checksum computation on a file","message":"Inspired by the necessity of #388.\n\nI initially had reservations about that but I think it should be ok - we can always disable caching using `DANDI_CACHE` to troubleshoot etc.    I guess we just need a helper function \n\n```\n@checksums.cache\ndef get_digest(filepath, digest=['sha256']):\n    return  Digester([\"sha256\"])(filepath)[\"sha256\"]\n```\n?\n\nthat should help significantly rerunning `upload` on files.\n\nIf we cached the checksum, we could call it even twice (in context of #388) and actually take advantage of that -- if checksum changes from one point to another during upload - we have an good indication that user is trying to upload a file which is still being modified.  WDYT @jwodder  ?","files":null}]}