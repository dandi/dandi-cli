{"version":2,"ops":[{"type":5,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1658425770,"metadata":{"github-id":"LE_lADODBZtRc5OS_1PzwAAAAGjowzA"},"added":["cmd-move"],"removed":[]},{"type":3,"author":{"id":"364914f8b1c8a9131d300bf2978e4ffe2ff1aeeb"},"timestamp":1658426306,"metadata":{"github-id":"IC_kwDODBZtRc5HCRkb","github-url":"https://github.com/dandi/dandi-cli/issues/1081#issuecomment-1191778587"},"message":"@yarikoptic The problem is that you're moving by regex, for which the syntax is `dandi move --regex \u003cpattern\u003e \u003creplacement\u003e`, i.e., the second argument replaces the part of the first argument that matches the filenames.  In the case of `dandi move --regex 'subjects/.*' .`, this has the effect of replacing the entire filename with `.`, and likewise for `dandi move --regex 'sub-.*' subjects/`.\n\nIf your goal is to move `subjects/sub-anm369962/` to just `sub-anm369962/`, you should be able to do that without using a regex with just:\n\n    dandi move -d https://dandiarchive.org/dandiset/000029/draft subjects/sub-anm369962/ sub-anm369962\n\nand then likewise for the other directory.\n\nIf you're working in a local clone of the repository, you can use the shell's globbing to move both directories at once:\n\n    dandi move -d https://dandiarchive.org/dandiset/000029/draft subjects/* .\n\nIf you would like to get this working using regexes, you can strip off the `subjects/` prefix from all assets that have it with:\n\n    dandi move -d https://dandiarchive.org/dandiset/000029/draft --regex subjects/ \"\"","files":null},{"type":6,"author":{"id":"364914f8b1c8a9131d300bf2978e4ffe2ff1aeeb"},"timestamp":1658426331,"metadata":{"github-id":"UCE_lALODBZtRc5HCRkbziVkLqE"},"target":"148e77dbbcecd2a344f57c4904b6095f5276059dd5edba735c43ca34d148377c","message":"@yarikoptic The problem is that you're moving by regex, for which the syntax is `dandi move --regex \u003cpattern\u003e \u003creplacement\u003e`, i.e., the second argument replaces the part of the filenames that matches the first argument.  In the case of `dandi move --regex 'subjects/.*' .`, this has the effect of replacing the entire filename with `.`, and likewise for `dandi move --regex 'sub-.*' subjects/`.\n\nIf your goal is to move `subjects/sub-anm369962/` to just `sub-anm369962/`, you should be able to do that without using a regex with just:\n\n    dandi move -d https://dandiarchive.org/dandiset/000029/draft subjects/sub-anm369962/ sub-anm369962\n\nand then likewise for the other directory.\n\nIf you're working in a local clone of the repository, you can use the shell's globbing to move both directories at once:\n\n    dandi move -d https://dandiarchive.org/dandiset/000029/draft subjects/* .\n\nIf you would like to get this working using regexes, you can strip off the `subjects/` prefix from all assets that have it with:\n\n    dandi move -d https://dandiarchive.org/dandiset/000029/draft --regex subjects/ \"\"","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1658427674,"metadata":{"github-id":"IC_kwDODBZtRc5HCWb9","github-url":"https://github.com/dandi/dandi-cli/issues/1081#issuecomment-1191798525"},"message":"**Thank you** for the explanation -- I apparently forgot how we thought to make `--regex` mode work! \n\n\u003e and then likewise for the other directory.\n\nsomewhat prohibitive -- it takes awhile to \"Fetching list of assets for Dandiset 000026\" ;)I think it would be great to get some Examples section in `dandi move --help` with e.g. like the one above, but probably made more specific - with anchoring on the front so I don't start moving some deeper `rawdata/` content.\n\n```\ndandi move --work-on remote --regex -d 'https://dandiarchive.org/dandiset/000029/draft' --dry-run '^(sub-.*/)' 'subjects/\\1'\n```\n\nrunning \n\n```\ndandi move --work-on remote -d 'https://dandiarchive.org/dandiset/000026/draft' --regex \"^rawdata/\" \"\"\n```\nnow","files":null},{"type":3,"author":{"id":"364914f8b1c8a9131d300bf2978e4ffe2ff1aeeb"},"timestamp":1658934459,"metadata":{"github-id":"IC_kwDODBZtRc5HVv7E","github-url":"https://github.com/dandi/dandi-cli/issues/1081#issuecomment-1196883652"},"message":"@yarikoptic If you want examples added to the documentation, please create a separate issue for that.  Is that all that's still needed for this issue?","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1659473155,"metadata":{"github-id":"IC_kwDODBZtRc5Ht1fa","github-url":"https://github.com/dandi/dandi-cli/issues/1081#issuecomment-1203197914"},"message":"ok, here is a dedicated issue https://github.com/dandi/dandi-cli/issues/1092","files":null},{"type":4,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1659473155,"metadata":{"github-id":"CE_lADODBZtRc5OS_1PzwAAAAGn_LK_"},"status":2}]}