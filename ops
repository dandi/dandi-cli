{"version":2,"ops":[{"type":6,"author":{"id":"12cb25e6e3f19b53447b05d00d7d4d53c925c908"},"timestamp":1583188569,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdElzc3VlRWRpdDozNTYyMDgzMjY="},"target":"95b68270f4565dee72d780166de776264226a08646c3a70c9d2c5bd275b4a157","message":"register/upload process\n\n1. Register a new dataset online, and use the UI to add minimal metadata. This should also: \n  - create a staged folder, set the identifier to the new dataset id, version set to \"staging\"\n  - create a dandiset.yaml file within the staged folder\n  - display the dataset id for the user to use with the CLI\n2. Retrieve an authorization token from the UI\n4. organize files into the dataset\n  - Retrieve the dataset\n  - this should update the dandiset.yaml file\n5. upload dataset to dandi\n\nupdate process questions:\n1. what is the reference dataset? local, remote, collaborator's\n2. across contributors in a team, how are operations (add/delete) synchronized?","files":null},{"type":5,"author":{"id":"12cb25e6e3f19b53447b05d00d7d4d53c925c908"},"timestamp":1583106508,"metadata":{"github-id":"MDEyOkxhYmVsZWRFdmVudDMwODYwMTM3NTQ="},"added":["discussion"],"removed":[]},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1583114182,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDU5MzE4MzUzNA==","github-url":"https://github.com/dandi/dandi-cli/issues/41#issuecomment-593183534"},"message":"forgot about the token!  so pretty much should be \"register on dandiarchive and retrieve authorization token\" before current \"5. Use dandi register ...\".\n\nI am ok to make workflow more dandiarchive-centric and will absorb current 1-4 (prepare nwb ... validate) as a detailed version of proposed here `4. organize files`.   Will look into that tomorrow.\n\nRe \"update\"\n1. reference -- I guess it depends on the step in the workflow.  If I am a new collaborator -- it would be dandiarchive's version.  If I am initial contributor to the archive, reference would be local since I will keep uploading new versions.  So I think there cannot be a single answer\n2. sync -- without introducing VCS features (e.g. establishing a trail of file UUIDs regenreated by pynwb upon save... which is may be what would be just sufficient, filed #43) we probably cannot provide much beyond some safeguards -- by default to not allow upload versions older than present on dandi,  and to download over newer local files.  So it would be for researchers to not shoot themselves in the foot, not unlike working with some shared folder on google or box.com","files":null},{"type":6,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1583114182,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdElzc3VlQ29tbWVudEVkaXQ6MzU1MDcyNzY4"},"target":"e290dc974f19f52d082bbb64c14dfca7f2644cc15d1d2ba5bf4835e92f41cadc","message":"forgot about the token!  so pretty much should be \"register on dandiarchive and retrieve authorization token\" before current \"5. Use dandi register ...\".\n\nI am ok to make workflow more dandiarchive-centric and will absorb current 1-4 (prepare nwb ... validate) as a detailed version of proposed here `4. organize files`.   Will look into that tomorrow.\n\nRe \"update\"\n1. reference -- I guess it depends on the step in the workflow.  If I am a new collaborator -- it would be dandiarchive's version.  If I am initial contributor to the archive, reference would be local since I will keep uploading new versions.  So I think there cannot be a single answer\n2. sync -- without introducing VCS features (e.g. establishing a trail of file UUIDs regenreated by pynwb upon save... which is may be what would be just sufficient, filed #43) we probably cannot provide much beyond some safeguards -- by default to not allow upload versions older than present on dandi,  and to download over newer local files.  So it would be for researchers to not shoot themselves in the foot, not unlike working with some shared folder on google or box.com.  _edit_ and without proper VCS in the back we would not be able to provide proper support for deletions, renames etc anyways.  So for now I would just rely on aforementioned basic safeguards until we (re)evaluable backend choices.","files":null},{"type":3,"author":{"id":"12cb25e6e3f19b53447b05d00d7d4d53c925c908"},"timestamp":1583114182,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDU5MzE4NDM0Mw==","github-url":"https://github.com/dandi/dandi-cli/issues/41#issuecomment-593184343"},"message":"\u003e not unlike working with some shared folder on google or box.com\n\nbut those provide versioning. so they can at least recover deleted files.\n\nwhile not super urgent, i think we would want to move to better versioning soon. the collaborative write process is always hairy!","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1583114289,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDU5MzE4NDY2NQ==","github-url":"https://github.com/dandi/dandi-cli/issues/41#issuecomment-593184665"},"message":"ha -- I just added an _edit_ about VCS - I am all for discussing versioning ;-)","files":null},{"type":3,"author":{"id":"c8082a0f6b38dd60d28641b213f904bcd85419c2"},"timestamp":1583190128,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDU5MzY2ODMzOA==","github-url":"https://github.com/dandi/dandi-cli/issues/41#issuecomment-593668338"},"message":"I think we should not do `create a dandiset.yaml file within the staged folder` for now, as that will break metadata editing in the UI. Let's hold off on that until we've thought through the metadata editing/versioning lifecycle, with both UI and CLI.","files":null},{"type":3,"author":{"id":"12cb25e6e3f19b53447b05d00d7d4d53c925c908"},"timestamp":1583192425,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDU5MzY4MDAxNw==","github-url":"https://github.com/dandi/dandi-cli/issues/41#issuecomment-593680017"},"message":"when the cli downloads the dataset it will be forced to create a local `dandiset.yaml`.  the nwb wrelated metadata will be extracted and add to the `dandiset.yaml`.  and this will be pushed back by the client. since it is a cli, we could do the conversion (folder metadata \u003c--\u003e file)  behind the scenes. \n\ntemporarily we could also enable a checkout flag, such that a team member can checkout the dandiset for modification, but other team members can overwrite the checkout. we leave it to a team's social networking to resolve this.","files":null}]}