{"version":2,"ops":[{"type":3,"author":{"id":"b0d2549539a17bb6d757efc1dda1b616cd002a7c"},"timestamp":1595973351,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY2NTMwMzgwOA==","github-url":"https://github.com/dandi/dandi-cli/issues/136#issuecomment-665303808"},"message":"I tried again just now, here the output (time is BST):\n```\n2020-07-28 22:29:16,190 [    INFO] Found 3 files to consider\nPATH                                            SIZE      ERRORS UPLOAD STATUS                MESSAGE\nPATH                                            SIZE      ERRORS UPLOAD STATUS                MESSAGE\ndandiset.yaml                                   630 Bytes   0           skipped               exists (same)\nsub-001/sub-001_ses-20200727T094620_ecephys.nwb 29.5 GB     0           ERROR                 ('Connection aborted.', OSError(\"(110, 'ETIMEDOUT')\"))\nsub-001/sub-001_ses-20200727T094534.nwb         8.4 MB      0           skipped               exists (same)\nSummary:                                        29.5 GB                 2 skipped             2 exists (same)\n                                                                        1 ERROR               1 ('Connection aborted.', OSError(\"(110, 'ETIMEDOUT')\"))\n```\nIt finished at Tue 28 Jul 22:49:12 BST 2020, so ran for about 20 min.\ndandi-cli version is 0.5.0, installed via pip.\nSystem is linux, an internal distribution based on Scientific Linux:\n```\nLSB Version:    :core-4.1-amd64:core-4.1-noarch\nDistributor ID: Scientific\nDescription:    Scientific Linux release 7.6 (Nitrogen)\nRelease:        7.6\nCodename:       Nitrogen\n```\nPython is 3.7.2, in a miniconda env.\nJust let me know if there are any further tests I can do. Note that the smaller NWB file transferred without problems.","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1595983729,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY2NTM2NzIwMw==","github-url":"https://github.com/dandi/dandi-cli/issues/136#issuecomment-665367203"},"message":"which dandiset on https://gui.dandiarchive.org/ it was uploaded to? (I thought you did directly in girder web ui) or it was not uploaded yet?","files":null},{"type":3,"author":{"id":"c8082a0f6b38dd60d28641b213f904bcd85419c2"},"timestamp":1596030844,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY2NTY3ODUxNA==","github-url":"https://github.com/dandi/dandi-cli/issues/136#issuecomment-665678514"},"message":"It was https://dandiarchive.org/dandiset/000028/draft\n\nnginx logs had a number of errors like this\n\n\u003e[28/Jul/2020:22:04:47 +0000] \"POST /api/v1/file/chunk?offset=67108864\u0026uploadId=5f20a02ef63d62e1dbd06959 HTTP/1.1\" 408 0 \"-\" \"python-requests/2.21.0\"\n\nThe return code 408 is because the client wasn't sending data before a timeout.","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1596032651,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY2NTY5NTc3MQ==","github-url":"https://github.com/dandi/dandi-cli/issues/136#issuecomment-665695771"},"message":"From slack conversation: upload attempts directly from the browser resulted in a similar issue but seems already directly relating to connection with S3. As far as  I see it;\n- From browser - girder provides direct upload URL to S3, but that one has a (similar?) choking point (does it use multipart?).\n- dandi-cli uses girder python client which does uploads of chunks to girder server (not directly to S3):\n```\n                uploadObj = self.post(\n                    'file/chunk?offset=%d\u0026uploadId=%s' % (offset, uploadId),\n                    data=_ProgressBytesIO(chunk, reporter=reporter))\n```\nand we never saw similar choking before I doubt that it is a client \"falling asleep\" issue although it could be.  Unfortunately this code is in girder client and there is no logging of any kind, so to provide more timing etc information the only place I could add it is probably within progress reporting if we think it might help to time things up.\n- girder server is then orchestrating upload to S3, which might (or not) be multipart; my guess is that at some point something chokes on girder server side with S3 upload and it leads it to throw client connection into timeout.  Is girder \"streaming\" to S3 or first stores that file on our girder instance (memory? disk?)?  Does it have local sufficient disk space (if doesn't stream)/memory to accommodate those big files?\n\n\n- meanwhile, @mgrauer -- could girder configuration be tuned up to increase timeout eg 4 times  (to 8 minutes), or you think that wouldn't help?\n\nAs for discussion of a more general \"resolution\", I have started https://github.com/dandi/dandi-publish/issues/110 .","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1596033024,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY2NTY5OTUxMA==","github-url":"https://github.com/dandi/dandi-cli/issues/136#issuecomment-665699510"},"message":"@mhhennig just checking -- do you have admin access on any of those boxes from which upload fails? may be we could craft a `netstat` (or alike) monitoring invocation so we would get precise timed protocol of interactions with our server .","files":null},{"type":3,"author":{"id":"b0d2549539a17bb6d757efc1dda1b616cd002a7c"},"timestamp":1596033422,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY2NTcwMzMyOQ==","github-url":"https://github.com/dandi/dandi-cli/issues/136#issuecomment-665703329"},"message":"No, I have no root access unfortunately. There's no good way atm to do monitoring, our building is still closed and here I only have slow broadband and a laptop...the machines I use are in some server room.\nCould try to ask someone else in a country with fewer infections to do testing though if it would help.","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1596033561,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY2NTcwNDY4NQ==","github-url":"https://github.com/dandi/dandi-cli/issues/136#issuecomment-665704685"},"message":"just to make it clear: I didn't need any \"physical\" access. But since no root -- it answers my question, thanks.  I will quickly add some logging at dandi-cli level for as much as it can do by itself ;-)  actually since it is all python, I could probably do LOTS! ;)  I will buzz you back shortly...","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1596036105,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY2NTcyOTczNw==","github-url":"https://github.com/dandi/dandi-cli/issues/136#issuecomment-665729737"},"message":"Ok, now there is a https://github.com/dandi/dandi-cli/pull/137 .  Please let me know if instructions below are too cumbersome etc, then I will just issue a new dandi-cli release on pypi (I would prefer to avoid it if possible -- needs more testing etc)\n\n1. establish virtualenv with dandi-cli from that branch, and activate it:\n```\npy=3; d=venvs/dev$py; virtualenv --python=python$py --system-site-packages $d \u0026\u0026 source $d/bin/activate \u0026\u0026 pip3 install git+https://github.com/dandi/dandi-cli.git@enh-logging \n```\n2. Run your upload for a troublesome file, disabling any parallelization and \"fancy\" output:\n```\nDANDI_LOG_GIRDER=1 DANDI_DEVEL=1 dandi -l DEBUG upload --devel-debug --existing force sub-001/sub-001_ses-20200727T094620_ecephys.nwb 2\u003e\u00261 | tee /tmp/mydandi.log\n```\nshare that `/tmp/mydandi.log` entirely or just a tail of it around the point of failure.\n\nYou should see records like (in below I am uploading to a local instance, so do not copy all the options from it, but from above):\n```\nlena:/tmp/000027\n$\u003e DANDI_LOG_GIRDER=1 DANDI_DEVEL=1 dandi -l DEBUG upload --devel-debug --existing force --validation ignore -i local-docker sub-759711149 2\u003e\u00261 | tee /tmp/mydandi.log\n...\n2020-07-29 11:20:28,824 [   DEBUG] PROGRESS[sub-759711149/sub-759711149.nwb]: 1409286144\n2020-07-29 11:20:28,889 [   DEBUG] REST\u003e: args=('POST', 'file/chunk?offset=1409286144\u0026uploadId=5f2193b582d2cb7363bd3131', None) kwargs={'files': None, 'data': \u003cgirder_client._ProgressBytesIO object at 0x7fce0a12d7c0\u003e, 'json': None, 'headers': None, 'jsonResp': True}\n2020-07-29 11:20:29,188 [   DEBUG] REST\u003c: {'_id': '5f2193b582d2cb7363bd3131', 'assetstoreId': '5e6ab9e6ed07da5d182247e2', 'created': '2020-07-29T15:20:21.605000+00:00', 'mimeType': 'application/octet-stream', 'name': 'sub-759711149.nwb', 'parentId': '5f2193b582d2cb7363bd3130', 'parentType': 'item', 'received': 1476395008, 'sha512state': \"b'39326e76f590807e3811aa6b9ab45a46d6e03b28586c7a87ddd02403251a83ec57ce4a15176a823fc606f9ea58e1f9df1d964564f292ac3c328aeaf1a33558fb000000c002000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000040000000'\", 'size': 2251686372, 'tempFile': '/home/assetstore/temp/tmp147o7mil', 'updated': '2020-07-29T15:20:29.186537+00:00', 'userId': '5e6ab9e5ed07da5d182247de'}\n2020-07-29 11:20:29,188 [   DEBUG] PROGRESS[sub-759711149/sub-759711149.nwb]: 1476395008\n2020-07-29 11:20:29,239 [   DEBUG] REST\u003e: args=('POST', 'file/chunk?offset=1476395008\u0026uploadId=5f2193b582d2cb7363bd3131', None) kwargs={'files': None, 'data': \u003cgirder_client._ProgressBytesIO object at 0x7fce02b20040\u003e, 'json': None, 'headers': None, 'jsonResp': True}\n2020-07-29 11:20:29,527 [   DEBUG] REST\u003c: {'_id': '5f2193b582d2cb7363bd3131', 'assetstoreId': '5e6ab9e6ed07da5d182247e2', 'created': '2020-07-29T15:20:21.605000+00:00', 'mimeType': 'application/octet-stream', 'name': 'sub-759711149.nwb', 'parentId': '5f2193b582d2cb7363bd3130', 'parentType': 'item', 'received': 1543503872, 'sha512state': \"b'da48bee581e4ac6706578eac6a5d640cc58dff51f1d86b047bf7f9ac3d6a4e16a45e0dcbcc43bc1d58d07c3310a1c727dc2c5d4281425c54d4f3e15b9f3e436d000000e002000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000040000000'\", 'size': 2251686372, 'tempFile': '/home/assetstore/temp/tmp147o7mil', 'updated': '2020-07-29T15:20:29.525607+00:00', 'userId': '5e6ab9e5ed07da5d182247de'}\n2020-07-29 11:20:29,527 [   DEBUG] PROGRESS[sub-759711149/sub-759711149.nwb]: 1543503872\n```\nso I expect us to get a better clue on when we are submitting a request and receiving response from the previous one etc.","files":null},{"type":3,"author":{"id":"b0d2549539a17bb6d757efc1dda1b616cd002a7c"},"timestamp":1596041199,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY2NTc3Njg2MA==","github-url":"https://github.com/dandi/dandi-cli/issues/136#issuecomment-665776860"},"message":"Just ran this, here's the end of the debug log:\n```\n2020-07-29 16:36:57,785 [   DEBUG] REST\u003c: {'_id': '5f2196b2f63d62e1dbd0695f', 'assetstoreId': '5d9618588a600b0dcb25b4a6', 'behavior': 's3', 'created': '2020-07-29T15:33:06.099000+00:00', 'mimeType': 'application/octet-stream', 'name': 'sub-001_ses-20200727T094620_ecephys.nwb', 'parentId': '5f219599f63d62e1dbd0695e', 'parentType': 'item', 'received': 201326592, 's3': {'chunkLength': 33554432, 'chunked': True, 'key': 'girder-assetstore/d8/27/d8278b9868af40419c4133d308eaea97', 'keyName': 'girder-assetstore/d8/27/d8278b9868af40419c4133d308eaea97', 'partNumber': 3, 'relpath': '/dandiarchive/girder-assetstore/d8/27/d8278b9868af40419c4133d308eaea97', 'request': {'headers': {'Content-Disposition': 'attachment; filename=\"sub-001_ses-20200727T094620_ecephys.nwb\"', 'Content-Type': 'application/octet-stream', 'x-amz-acl': 'private', 'x-amz-meta-uploader-id': '5f1de355f63d62e1dbd06948', 'x-amz-meta-uploader-ip': '129.215.24.71'}, 'method': 'POST', 'url': 'https://dandiarchive.s3.amazonaws.com/girder-assetstore/d8/27/d8278b9868af40419c4133d308eaea97?uploads=\u0026X-Amz-Algorithm=AWS4-HMAC-SHA256\u0026X-Amz-Credential=ASIA3GIMZPVVECMGAIM2%2F20200729%2Fus-east-2%2Fs3%2Faws4_request\u0026X-Amz-Date=20200729T153306Z\u0026X-Amz-Expires=3600\u0026X-Amz-SignedHeaders=content-disposition%3Bcontent-type%3Bhost%3Bx-amz-acl%3Bx-amz-meta-uploader-id%3Bx-amz-meta-uploader-ip\u0026X-Amz-Security-Token=FwoGZXIvYXdzEGEaDGsgV7CrjJVSz59JKyK%2FAU%2FUNxUv3xA48rHUvzjYSpq5auW3ZbnGlfDyn2A6g5zIWV%2Brok0nX0lSEVsyNZ4TDQsr%2BGswi7vOzxd%2B6pHCZ8CTAjs%2B67oQZHGbMvZcMMD4pmR%2F0w%2FHp4BB4%2BHdqLCHeGdw0GtEWT%2FXytlEhPhZBB4zdCj6iPgLfJ2X6bjl0t8HOMnrIZGGiCHzq2e55za2INruG%2FGigJcG8JRTN58oYDlyn5K67YWPH8WQ99o0Fs%2FJP4MG7b2G0ulUOiG93BITKLKthvkFMi2GGQVGOULBpIE7muawEba02mirETYvdYu21p%2Flz0%2BstFokKUCKRUWh7UfdEh0%3D\u0026X-Amz-Signature=0c2f7c886ad500041f83ca70e12d7d02fac8b415eb5584f6a48a9d41d2e9478a'}, 'uploadId': 'LWiP5rLWrTifay_RXeV6rJ19k1r4_gP1ONrIGv4sboDVoxxMlSiPTAI43No7EoglKlbqpVrzsQec8iqnM.pJa_sqjDs2G3480OOephWaXdE3sSkyOzc9uZPAy_me4Hq0nRgB_3EyEVDkkv7Issjagod.itpU.5HuQNs2EIcbTJs-'}, 'size': 29521959808, 'updated': '2020-07-29T15:36:57.711454+00:00', 'userId': '5f1de355f63d62e1dbd06948'}\n2020-07-29 16:36:57,785 [   DEBUG] PROGRESS[sub-001/sub-001_ses-20200727T094620_ecephys.nwb]: 201326592\n2020-07-29 16:36:57,854 [   DEBUG] REST\u003e: args=('POST', 'file/chunk?offset=201326592\u0026uploadId=5f2196b2f63d62e1dbd0695f', None) kwargs={'files': None, 'data': \u003cgirder_client._ProgressBytesIO object at 0x7f752b8ffe08\u003e, 'json': None, 'headers': None, 'jsonResp': True}\n^[^]^]{'size': 29521959808}\n{'status': 'checking girder'}\n{'status': 'validating'}\n{'errors': 0}\n{'status': 'extracting metadata'}\n{'status': 'digesting'}\n{'status': 'uploading'}\n{'upload': 0.22731845865400346}\n{'upload': 0.4546369173080069}\n{'upload': 0.6819553759620104}\nTraceback (most recent call last):\n  File \"/disk/scratch/mhennig/miniconda3/envs/spikesorting/lib/python3.7/site-packages/urllib3/contrib/pyopenssl.py\", line 340, in _send_until_done\n    return self.connection.send(data)\n  File \"/disk/scratch/mhennig/miniconda3/envs/spikesorting/lib/python3.7/site-packages/OpenSSL/SSL.py\", line 1757, in send\n    self._raise_ssl_error(self._ssl, result)\n  File \"/disk/scratch/mhennig/miniconda3/envs/spikesorting/lib/python3.7/site-packages/OpenSSL/SSL.py\", line 1663, in _raise_ssl_error\n    raise SysCallError(errno, errorcode.get(errno))\nOpenSSL.SSL.SysCallError: (110, 'ETIMEDOUT')\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/disk/scratch/mhennig/miniconda3/envs/spikesorting/lib/python3.7/site-packages/urllib3/connectionpool.py\", line 672, in urlopen\n    chunked=chunked,\n  File \"/disk/scratch/mhennig/miniconda3/envs/spikesorting/lib/python3.7/site-packages/urllib3/connectionpool.py\", line 387, in _make_request\n    conn.request(method, url, **httplib_request_kw)\n  File \"/disk/scratch/mhennig/miniconda3/envs/spikesorting/lib/python3.7/http/client.py\", line 1229, in request\n    self._send_request(method, url, body, headers, encode_chunked)\n  File \"/disk/scratch/mhennig/miniconda3/envs/spikesorting/lib/python3.7/http/client.py\", line 1275, in _send_request\n    self.endheaders(body, encode_chunked=encode_chunked)\n  File \"/disk/scratch/mhennig/miniconda3/envs/spikesorting/lib/python3.7/http/client.py\", line 1224, in endheaders\n    self._send_output(message_body, encode_chunked=encode_chunked)\n  File \"/disk/scratch/mhennig/miniconda3/envs/spikesorting/lib/python3.7/http/client.py\", line 1055, in _send_output\n    self.send(chunk)\n  File \"/disk/scratch/mhennig/miniconda3/envs/spikesorting/lib/python3.7/http/client.py\", line 977, in send\n    self.sock.sendall(data)\n  File \"/disk/scratch/mhennig/miniconda3/envs/spikesorting/lib/python3.7/site-packages/urllib3/contrib/pyopenssl.py\", line 352, in sendall\n    data[total_sent : total_sent + SSL_WRITE_BLOCKSIZE]\n  File \"/disk/scratch/mhennig/miniconda3/envs/spikesorting/lib/python3.7/site-packages/urllib3/contrib/pyopenssl.py\", line 346, in _send_until_done\n    raise SocketError(str(e))\nOSError: (110, 'ETIMEDOUT')\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/disk/scratch/mhennig/miniconda3/envs/spikesorting/lib/python3.7/site-packages/requests/adapters.py\", line 449, in send\n    timeout=timeout\n  File \"/disk/scratch/mhennig/miniconda3/envs/spikesorting/lib/python3.7/site-packages/urllib3/connectionpool.py\", line 720, in urlopen\n    method, url, error=e, _pool=self, _stacktrace=sys.exc_info()[2]\n  File \"/disk/scratch/mhennig/miniconda3/envs/spikesorting/lib/python3.7/site-packages/urllib3/util/retry.py\", line 400, in increment\n    raise six.reraise(type(error), error, _stacktrace)\n  File \"/disk/scratch/mhennig/miniconda3/envs/spikesorting/lib/python3.7/site-packages/urllib3/packages/six.py\", line 734, in reraise\n    raise value.with_traceback(tb)\n  File \"/disk/scratch/mhennig/miniconda3/envs/spikesorting/lib/python3.7/site-packages/urllib3/connectionpool.py\", line 672, in urlopen\n    chunked=chunked,\n  File \"/disk/scratch/mhennig/miniconda3/envs/spikesorting/lib/python3.7/site-packages/urllib3/connectionpool.py\", line 387, in _make_request\n    conn.request(method, url, **httplib_request_kw)\n  File \"/disk/scratch/mhennig/miniconda3/envs/spikesorting/lib/python3.7/http/client.py\", line 1229, in request\n    self._send_request(method, url, body, headers, encode_chunked)\n  File \"/disk/scratch/mhennig/miniconda3/envs/spikesorting/lib/python3.7/http/client.py\", line 1275, in _send_request\n    self.endheaders(body, encode_chunked=encode_chunked)\n  File \"/disk/scratch/mhennig/miniconda3/envs/spikesorting/lib/python3.7/http/client.py\", line 1224, in endheaders\n    self._send_output(message_body, encode_chunked=encode_chunked)\n  File \"/disk/scratch/mhennig/miniconda3/envs/spikesorting/lib/python3.7/http/client.py\", line 1055, in _send_output\n    self.send(chunk)\n  File \"/disk/scratch/mhennig/miniconda3/envs/spikesorting/lib/python3.7/http/client.py\", line 977, in send\n    self.sock.sendall(data)\n  File \"/disk/scratch/mhennig/miniconda3/envs/spikesorting/lib/python3.7/site-packages/urllib3/contrib/pyopenssl.py\", line 352, in sendall\n    data[total_sent : total_sent + SSL_WRITE_BLOCKSIZE]\n  File \"/disk/scratch/mhennig/miniconda3/envs/spikesorting/lib/python3.7/site-packages/urllib3/contrib/pyopenssl.py\", line 346, in _send_until_done\n    raise SocketError(str(e))\nurllib3.exceptions.ProtocolError: ('Connection aborted.', OSError(\"(110, 'ETIMEDOUT')\"))\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/disk/scratch/mhennig/miniconda3/envs/spikesorting/bin/dandi\", line 8, in \u003cmodule\u003e\n    sys.exit(main())\n  File \"/disk/scratch/mhennig/miniconda3/envs/spikesorting/lib/python3.7/site-packages/click/core.py\", line 764, in __call__\n    return self.main(*args, **kwargs)\n  File \"/disk/scratch/mhennig/miniconda3/envs/spikesorting/lib/python3.7/site-packages/click/core.py\", line 717, in main\n    rv = self.invoke(ctx)\n  File \"/disk/scratch/mhennig/miniconda3/envs/spikesorting/lib/python3.7/site-packages/click/core.py\", line 1137, in invoke\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\n  File \"/disk/scratch/mhennig/miniconda3/envs/spikesorting/lib/python3.7/site-packages/click/core.py\", line 956, in invoke\n    return ctx.invoke(self.callback, **ctx.params)\n  File \"/disk/scratch/mhennig/miniconda3/envs/spikesorting/lib/python3.7/site-packages/click/core.py\", line 555, in invoke\n    return callback(*args, **kwargs)\n  File \"/disk/scratch/mhennig/miniconda3/envs/spikesorting/lib/python3.7/site-packages/dandi/cli/command.py\", line 118, in wrapper\n    return f(*args, **kwargs)\n  File \"/disk/scratch/mhennig/miniconda3/envs/spikesorting/lib/python3.7/site-packages/dandi/cli/cmd_upload.py\", line 602, in upload\n    for v in process_path(path, relpath):\n  File \"/disk/scratch/mhennig/miniconda3/envs/spikesorting/lib/python3.7/site-packages/dandi/cli/cmd_upload.py\", line 472, in process_path\n    lambda c: client.uploadFileToItem(\n  File \"/disk/scratch/mhennig/miniconda3/envs/spikesorting/lib/python3.7/site-packages/dandi/support/generatorify.py\", line 83, in __next__\n    return self.send(None)\n  File \"/disk/scratch/mhennig/miniconda3/envs/spikesorting/lib/python3.7/site-packages/dandi/support/generatorify.py\", line 77, in send\n    return self._put(\"send\", value)\n  File \"/disk/scratch/mhennig/miniconda3/envs/spikesorting/lib/python3.7/site-packages/dandi/support/generatorify.py\", line 69, in _put\n    raise val\n  File \"/disk/scratch/mhennig/miniconda3/envs/spikesorting/lib/python3.7/site-packages/dandi/support/generatorify.py\", line 53, in thread_func\n    ret = func(callback)\n  File \"/disk/scratch/mhennig/miniconda3/envs/spikesorting/lib/python3.7/site-packages/dandi/cli/cmd_upload.py\", line 473, in \u003clambda\u003e\n    item_rec[\"_id\"], path, progressCallback=c\n  File \"/disk/scratch/mhennig/miniconda3/envs/spikesorting/lib/python3.7/site-packages/girder_client/__init__.py\", line 894, in uploadFileToItem\n    return self._uploadContents(obj, f, filesize, progressCallback=progressCallback)\n  File \"/disk/scratch/mhennig/miniconda3/envs/spikesorting/lib/python3.7/site-packages/girder_client/__init__.py\", line 1010, in _uploadContents\n    data=_ProgressBytesIO(chunk, reporter=reporter))\n  File \"/disk/scratch/mhennig/miniconda3/envs/spikesorting/lib/python3.7/site-packages/girder_client/__init__.py\", line 495, in post\n    data=data, json=json, headers=headers, jsonResp=jsonResp)\n  File \"/disk/scratch/mhennig/miniconda3/envs/spikesorting/lib/python3.7/site-packages/dandi/girder.py\", line 112, in sendRestRequest\n    res = super().sendRestRequest(*args, **kwargs)\n  File \"/disk/scratch/mhennig/miniconda3/envs/spikesorting/lib/python3.7/site-packages/girder_client/__init__.py\", line 470, in sendRestRequest\n    **kwargs)\n  File \"/disk/scratch/mhennig/miniconda3/envs/spikesorting/lib/python3.7/site-packages/requests/api.py\", line 119, in post\n    return request('post', url, data=data, json=json, **kwargs)\n  File \"/disk/scratch/mhennig/miniconda3/envs/spikesorting/lib/python3.7/site-packages/requests/api.py\", line 61, in request\n    return session.request(method=method, url=url, **kwargs)\n  File \"/disk/scratch/mhennig/miniconda3/envs/spikesorting/lib/python3.7/site-packages/requests/sessions.py\", line 530, in request\n    resp = self.send(prep, **send_kwargs)\n  File \"/disk/scratch/mhennig/miniconda3/envs/spikesorting/lib/python3.7/site-packages/requests/sessions.py\", line 643, in send\n    r = adapter.send(request, **kwargs)\n  File \"/disk/scratch/mhennig/miniconda3/envs/spikesorting/lib/python3.7/site-packages/requests/adapters.py\", line 498, in send\n    raise ConnectionError(err, request=request)\nrequests.exceptions.ConnectionError: ('Connection aborted.', OSError(\"(110, 'ETIMEDOUT')\"))\n```","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1596042281,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY2NTc4NjQwOQ==","github-url":"https://github.com/dandi/dandi-cli/issues/136#issuecomment-665786409"},"message":"Great, please edit and pasted a few more lines on top so we could see when previous `REST\u003e` was sent (we see only when reply to it was received).\n\nIt seems that I might need to flush stdout to get better depiction of order of things (log goes into stderr, and regular lives to stdout) and also report upload ratio in progress log record so we could match... Will do","files":null},{"type":3,"author":{"id":"b0d2549539a17bb6d757efc1dda1b616cd002a7c"},"timestamp":1596043148,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY2NTc5MzM1NQ==","github-url":"https://github.com/dandi/dandi-cli/issues/136#issuecomment-665793355"},"message":"Here's the whole thing:\nhttps://gist.github.com/mhhennig/f7ffec71fd6140f111fa2ee0cc59299d","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1596043960,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY2NTgwMDE3Ng==","github-url":"https://github.com/dandi/dandi-cli/issues/136#issuecomment-665800176"},"message":"oh, it is blowing up really quickly!  Here is those log lines prepended with duration (in ms, to the next line), so we see that it doesn't take abnormally long to submit that next request which never gets a reply\n```\n  541 2020-07-29 16:33:05,815 [   DEBUG] REST\u003e: args=('POST', 'file', {'parentType': 'item', 'parentId': '5f219599f63d62e1dbd0695e', 'name': 'sub-001_ses-20200727T094620_ecephys.nwb', 'size': 29521959808, 'mimeType': None}) kwargs={'files': None, 'data': None, 'json': None, 'headers': None, 'jsonResp': True}\n   62 2020-07-29 16:33:06,356 [   DEBUG] REST\u003c: {'_id': '5f2196b2f63d62e1dbd0695f', 'assetstoreId': '5d9618588a600b0dcb25b4a6', 'behavior': 's3', 'created': '2020-07-29T15:33:06.099026+00:00', 'mimeType': 'application/octet-stream', 'name': 'sub-001_ses-20200727T094620_ecephys.nwb', 'parentId': '5f219599f63d62e1dbd0695e', 'parentType': 'item', 'received': 0, 's3': {'chunkLength': 33554432, 'chunked': True, 'key': 'girder-assetstore/d8/27/d8278b9868af40419c4133d308eaea97', 'relpath': '/dandiarchive/girder-assetstore/d8/27/d8278b9868af40419c4133d308eaea97', 'request': {'headers': {'Content-Disposition': 'attachment; filename=\"sub-001_ses-20200727T094620_ecephys.nwb\"', 'Content-Type': 'application/octet-stream', 'x-amz-acl': 'private', 'x-amz-meta-uploader-id': '5f1de355f63d62e1dbd06948', 'x-amz-meta-uploader-ip': '129.215.24.71'}, 'method': 'POST', 'url': 'https://dandiarchive.s3.amazonaws.com/girder-assetstore/d8/27/d8278b9868af40419c4133d308eaea97?uploads=\u0026X-Amz-Algorithm=AWS4-HMAC-SHA256\u0026X-Amz-Credential=ASIA3GIMZPVVECMGAIM2%2F20200729%2Fus-east-2%2Fs3%2Faws4_request\u0026X-Amz-Date=20200729T153306Z\u0026X-Amz-Expires=3600\u0026X-Amz-SignedHeaders=content-disposition%3Bcontent-type%3Bhost%3Bx-amz-acl%3Bx-amz-meta-uploader-id%3Bx-amz-meta-uploader-ip\u0026X-Amz-Security-Token=FwoGZXIvYXdzEGEaDGsgV7CrjJVSz59JKyK%2FAU%2FUNxUv3xA48rHUvzjYSpq5auW3ZbnGlfDyn2A6g5zIWV%2Brok0nX0lSEVsyNZ4TDQsr%2BGswi7vOzxd%2B6pHCZ8CTAjs%2B67oQZHGbMvZcMMD4pmR%2F0w%2FHp4BB4%2BHdqLCHeGdw0GtEWT%2FXytlEhPhZBB4zdCj6iPgLfJ2X6bjl0t8HOMnrIZGGiCHzq2e55za2INruG%2FGigJcG8JRTN58oYDlyn5K67YWPH8WQ99o0Fs%2FJP4MG7b2G0ulUOiG93BITKLKthvkFMi2GGQVGOULBpIE7muawEba02mirETYvdYu21p%2Flz0%2BstFokKUCKRUWh7UfdEh0%3D\u0026X-Amz-Signature=0c2f7c886ad500041f83ca70e12d7d02fac8b415eb5584f6a48a9d41d2e9478a'}}, 'size': 29521959808, 'updated': '2020-07-29T15:33:06.294875+00:00', 'userId': '5f1de355f63d62e1dbd06948'}\n77271 2020-07-29 16:33:06,418 [   DEBUG] REST\u003e: args=('POST', 'file/chunk?offset=0\u0026uploadId=5f2196b2f63d62e1dbd0695f', None) kwargs={'files': None, 'data': \u003cgirder_client._ProgressBytesIO object at 0x7f752b8ffe60\u003e, 'json': None, 'headers': None, 'jsonResp': True}\n    0 2020-07-29 16:34:23,689 [   DEBUG] REST\u003c: {'_id': '5f2196b2f63d62e1dbd0695f', 'assetstoreId': '5d9618588a600b0dcb25b4a6', 'behavior': 's3', 'created': '2020-07-29T15:33:06.099000+00:00', 'mimeType': 'application/octet-stream', 'name': 'sub-001_ses-20200727T094620_ecephys.nwb', 'parentId': '5f219599f63d62e1dbd0695e', 'parentType': 'item', 'received': 67108864, 's3': {'chunkLength': 33554432, 'chunked': True, 'key': 'girder-assetstore/d8/27/d8278b9868af40419c4133d308eaea97', 'keyName': 'girder-assetstore/d8/27/d8278b9868af40419c4133d308eaea97', 'partNumber': 1, 'relpath': '/dandiarchive/girder-assetstore/d8/27/d8278b9868af40419c4133d308eaea97', 'request': {'headers': {'Content-Disposition': 'attachment; filename=\"sub-001_ses-20200727T094620_ecephys.nwb\"', 'Content-Type': 'application/octet-stream', 'x-amz-acl': 'private', 'x-amz-meta-uploader-id': '5f1de355f63d62e1dbd06948', 'x-amz-meta-uploader-ip': '129.215.24.71'}, 'method': 'POST', 'url': 'https://dandiarchive.s3.amazonaws.com/girder-assetstore/d8/27/d8278b9868af40419c4133d308eaea97?uploads=\u0026X-Amz-Algorithm=AWS4-HMAC-SHA256\u0026X-Amz-Credential=ASIA3GIMZPVVECMGAIM2%2F20200729%2Fus-east-2%2Fs3%2Faws4_request\u0026X-Amz-Date=20200729T153306Z\u0026X-Amz-Expires=3600\u0026X-Amz-SignedHeaders=content-disposition%3Bcontent-type%3Bhost%3Bx-amz-acl%3Bx-amz-meta-uploader-id%3Bx-amz-meta-uploader-ip\u0026X-Amz-Security-Token=FwoGZXIvYXdzEGEaDGsgV7CrjJVSz59JKyK%2FAU%2FUNxUv3xA48rHUvzjYSpq5auW3ZbnGlfDyn2A6g5zIWV%2Brok0nX0lSEVsyNZ4TDQsr%2BGswi7vOzxd%2B6pHCZ8CTAjs%2B67oQZHGbMvZcMMD4pmR%2F0w%2FHp4BB4%2BHdqLCHeGdw0GtEWT%2FXytlEhPhZBB4zdCj6iPgLfJ2X6bjl0t8HOMnrIZGGiCHzq2e55za2INruG%2FGigJcG8JRTN58oYDlyn5K67YWPH8WQ99o0Fs%2FJP4MG7b2G0ulUOiG93BITKLKthvkFMi2GGQVGOULBpIE7muawEba02mirETYvdYu21p%2Flz0%2BstFokKUCKRUWh7UfdEh0%3D\u0026X-Amz-Signature=0c2f7c886ad500041f83ca70e12d7d02fac8b415eb5584f6a48a9d41d2e9478a'}, 'uploadId': 'LWiP5rLWrTifay_RXeV6rJ19k1r4_gP1ONrIGv4sboDVoxxMlSiPTAI43No7EoglKlbqpVrzsQec8iqnM.pJa_sqjDs2G3480OOephWaXdE3sSkyOzc9uZPAy_me4Hq0nRgB_3EyEVDkkv7Issjagod.itpU.5HuQNs2EIcbTJs-'}, 'size': 29521959808, 'updated': '2020-07-29T15:34:23.617214+00:00', 'userId': '5f1de355f63d62e1dbd06948'}\n   69 2020-07-29 16:34:23,689 [   DEBUG] PROGRESS[sub-001/sub-001_ses-20200727T094620_ecephys.nwb]: 67108864\n77242 2020-07-29 16:34:23,758 [   DEBUG] REST\u003e: args=('POST', 'file/chunk?offset=67108864\u0026uploadId=5f2196b2f63d62e1dbd0695f', None) kwargs={'files': None, 'data': \u003cgirder_client._ProgressBytesIO object at 0x7f752b8ffe60\u003e, 'json': None, 'headers': None, 'jsonResp': True}\n    0 2020-07-29 16:35:41,000 [   DEBUG] REST\u003c: {'_id': '5f2196b2f63d62e1dbd0695f', 'assetstoreId': '5d9618588a600b0dcb25b4a6', 'behavior': 's3', 'created': '2020-07-29T15:33:06.099000+00:00', 'mimeType': 'application/octet-stream', 'name': 'sub-001_ses-20200727T094620_ecephys.nwb', 'parentId': '5f219599f63d62e1dbd0695e', 'parentType': 'item', 'received': 134217728, 's3': {'chunkLength': 33554432, 'chunked': True, 'key': 'girder-assetstore/d8/27/d8278b9868af40419c4133d308eaea97', 'keyName': 'girder-assetstore/d8/27/d8278b9868af40419c4133d308eaea97', 'partNumber': 2, 'relpath': '/dandiarchive/girder-assetstore/d8/27/d8278b9868af40419c4133d308eaea97', 'request': {'headers': {'Content-Disposition': 'attachment; filename=\"sub-001_ses-20200727T094620_ecephys.nwb\"', 'Content-Type': 'application/octet-stream', 'x-amz-acl': 'private', 'x-amz-meta-uploader-id': '5f1de355f63d62e1dbd06948', 'x-amz-meta-uploader-ip': '129.215.24.71'}, 'method': 'POST', 'url': 'https://dandiarchive.s3.amazonaws.com/girder-assetstore/d8/27/d8278b9868af40419c4133d308eaea97?uploads=\u0026X-Amz-Algorithm=AWS4-HMAC-SHA256\u0026X-Amz-Credential=ASIA3GIMZPVVECMGAIM2%2F20200729%2Fus-east-2%2Fs3%2Faws4_request\u0026X-Amz-Date=20200729T153306Z\u0026X-Amz-Expires=3600\u0026X-Amz-SignedHeaders=content-disposition%3Bcontent-type%3Bhost%3Bx-amz-acl%3Bx-amz-meta-uploader-id%3Bx-amz-meta-uploader-ip\u0026X-Amz-Security-Token=FwoGZXIvYXdzEGEaDGsgV7CrjJVSz59JKyK%2FAU%2FUNxUv3xA48rHUvzjYSpq5auW3ZbnGlfDyn2A6g5zIWV%2Brok0nX0lSEVsyNZ4TDQsr%2BGswi7vOzxd%2B6pHCZ8CTAjs%2B67oQZHGbMvZcMMD4pmR%2F0w%2FHp4BB4%2BHdqLCHeGdw0GtEWT%2FXytlEhPhZBB4zdCj6iPgLfJ2X6bjl0t8HOMnrIZGGiCHzq2e55za2INruG%2FGigJcG8JRTN58oYDlyn5K67YWPH8WQ99o0Fs%2FJP4MG7b2G0ulUOiG93BITKLKthvkFMi2GGQVGOULBpIE7muawEba02mirETYvdYu21p%2Flz0%2BstFokKUCKRUWh7UfdEh0%3D\u0026X-Amz-Signature=0c2f7c886ad500041f83ca70e12d7d02fac8b415eb5584f6a48a9d41d2e9478a'}, 'uploadId': 'LWiP5rLWrTifay_RXeV6rJ19k1r4_gP1ONrIGv4sboDVoxxMlSiPTAI43No7EoglKlbqpVrzsQec8iqnM.pJa_sqjDs2G3480OOephWaXdE3sSkyOzc9uZPAy_me4Hq0nRgB_3EyEVDkkv7Issjagod.itpU.5HuQNs2EIcbTJs-'}, 'size': 29521959808, 'updated': '2020-07-29T15:35:40.929474+00:00', 'userId': '5f1de355f63d62e1dbd06948'}\n   70 2020-07-29 16:35:41,000 [   DEBUG] PROGRESS[sub-001/sub-001_ses-20200727T094620_ecephys.nwb]: 134217728\n76715 2020-07-29 16:35:41,070 [   DEBUG] REST\u003e: args=('POST', 'file/chunk?offset=134217728\u0026uploadId=5f2196b2f63d62e1dbd0695f', None) kwargs={'files': None, 'data': \u003cgirder_client._ProgressBytesIO object at 0x7f752b8ffc50\u003e, 'json': None, 'headers': None, 'jsonResp': True}\n    0 2020-07-29 16:36:57,785 [   DEBUG] REST\u003c: {'_id': '5f2196b2f63d62e1dbd0695f', 'assetstoreId': '5d9618588a600b0dcb25b4a6', 'behavior': 's3', 'created': '2020-07-29T15:33:06.099000+00:00', 'mimeType': 'application/octet-stream', 'name': 'sub-001_ses-20200727T094620_ecephys.nwb', 'parentId': '5f219599f63d62e1dbd0695e', 'parentType': 'item', 'received': 201326592, 's3': {'chunkLength': 33554432, 'chunked': True, 'key': 'girder-assetstore/d8/27/d8278b9868af40419c4133d308eaea97', 'keyName': 'girder-assetstore/d8/27/d8278b9868af40419c4133d308eaea97', 'partNumber': 3, 'relpath': '/dandiarchive/girder-assetstore/d8/27/d8278b9868af40419c4133d308eaea97', 'request': {'headers': {'Content-Disposition': 'attachment; filename=\"sub-001_ses-20200727T094620_ecephys.nwb\"', 'Content-Type': 'application/octet-stream', 'x-amz-acl': 'private', 'x-amz-meta-uploader-id': '5f1de355f63d62e1dbd06948', 'x-amz-meta-uploader-ip': '129.215.24.71'}, 'method': 'POST', 'url': 'https://dandiarchive.s3.amazonaws.com/girder-assetstore/d8/27/d8278b9868af40419c4133d308eaea97?uploads=\u0026X-Amz-Algorithm=AWS4-HMAC-SHA256\u0026X-Amz-Credential=ASIA3GIMZPVVECMGAIM2%2F20200729%2Fus-east-2%2Fs3%2Faws4_request\u0026X-Amz-Date=20200729T153306Z\u0026X-Amz-Expires=3600\u0026X-Amz-SignedHeaders=content-disposition%3Bcontent-type%3Bhost%3Bx-amz-acl%3Bx-amz-meta-uploader-id%3Bx-amz-meta-uploader-ip\u0026X-Amz-Security-Token=FwoGZXIvYXdzEGEaDGsgV7CrjJVSz59JKyK%2FAU%2FUNxUv3xA48rHUvzjYSpq5auW3ZbnGlfDyn2A6g5zIWV%2Brok0nX0lSEVsyNZ4TDQsr%2BGswi7vOzxd%2B6pHCZ8CTAjs%2B67oQZHGbMvZcMMD4pmR%2F0w%2FHp4BB4%2BHdqLCHeGdw0GtEWT%2FXytlEhPhZBB4zdCj6iPgLfJ2X6bjl0t8HOMnrIZGGiCHzq2e55za2INruG%2FGigJcG8JRTN58oYDlyn5K67YWPH8WQ99o0Fs%2FJP4MG7b2G0ulUOiG93BITKLKthvkFMi2GGQVGOULBpIE7muawEba02mirETYvdYu21p%2Flz0%2BstFokKUCKRUWh7UfdEh0%3D\u0026X-Amz-Signature=0c2f7c886ad500041f83ca70e12d7d02fac8b415eb5584f6a48a9d41d2e9478a'}, 'uploadId': 'LWiP5rLWrTifay_RXeV6rJ19k1r4_gP1ONrIGv4sboDVoxxMlSiPTAI43No7EoglKlbqpVrzsQec8iqnM.pJa_sqjDs2G3480OOephWaXdE3sSkyOzc9uZPAy_me4Hq0nRgB_3EyEVDkkv7Issjagod.itpU.5HuQNs2EIcbTJs-'}, 'size': 29521959808, 'updated': '2020-07-29T15:36:57.711454+00:00', 'userId': '5f1de355f63d62e1dbd06948'}\n   69 2020-07-29 16:36:57,785 [   DEBUG] PROGRESS[sub-001/sub-001_ses-20200727T094620_ecephys.nwb]: 201326592\n----- 2020-07-29 16:36:57,854 [   DEBUG] REST\u003e: args=('POST', 'file/chunk?offset=201326592\u0026uploadId=5f2196b2f63d62e1dbd0695f', None) kwargs={'files': None, 'data': \u003cgirder_client._ProgressBytesIO object at 0x7f752b8ffe08\u003e, 'json': None, 'headers': None, 'jsonResp': True}%  \n```\n@mgrauer could you please check how it looked on the server at that point in time?","files":null},{"type":3,"author":{"id":"c8082a0f6b38dd60d28641b213f904bcd85419c2"},"timestamp":1596059352,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY2NTk0NzQ1NQ==","github-url":"https://github.com/dandi/dandi-cli/issues/136#issuecomment-665947455"},"message":"Same behavior as before with this particular upload from the Python client, this is an error on the client side (not sending data, or not sending enough data in a short enough time), so nginx times out and responds with a 408. Girder never even sees the last request, only the next-to-last request makes it to Girder (these are nginx logs, the last request here does not have a matching request in Girder logs).\n\n\u003eaccess.log:X.X.X.X - - [29/Jul/2020:15:35:40 +0000] \"POST /api/v1/file/chunk?offset=67108864\u0026uploadId=5f2196b2f63d62e1dbd0695f HTTP/1.1\" 200 2100 \"-\" \"python-requests/2.23.0\"\naccess.log:X.X.X.X - - [29/Jul/2020:15:36:57 +0000] \"POST /api/v1/file/chunk?offset=134217728\u0026uploadId=5f2196b2f63d62e1dbd0695f HTTP/1.1\" 200 2100 \"-\" \"python-requests/2.23.0\"\naccess.log:X.X.X.X - - [29/Jul/2020:15:38:57 +0000] \"POST /api/v1/file/chunk?offset=201326592\u0026uploadId=5f2196b2f63d62e1dbd0695f HTTP/1.1\" 408 0 \"-\" \"python-requests/2.23.0\"\n\n@mhhennig also got an error when using the direct to browser upload, which doesn't proxy through Girder (the Python client proxies chunked uploads through Girder) but rather talks directly to S3. That error was\n\n\u003eBrowser error is: Cross-Origin Request Blocked: The Same Origin Policy disallows reading the remote resource at https://dandiarchive.s3.amazonaws.com/girder-assetstore/22/6\\u20268d402c82d7deadce5184e7155aefce878b54b6ec8a08caf53b0510371462. (Reason: CORS request did not succeed).\n\n@AlmightyYakob says he's seen CORS errors before on request timeouts, because the server never finishes receiving the request, so it cannot set the correct header on the response.\n\nThis would be consistent with what we are seeing through the Python upload path, that is a client side timeout (or falling asleep as you put it @yarikoptic ðŸ˜´ ) on the request. The browser allows for a retry when an error happens in uploading, though that would be annoying for someone to retry a large number of errors.\n\n@yarikoptic you could put a retry in the Python client, perhaps similarly to the way the Girder CLI does [retries](https://github.com/girder/girder/blob/master/clients/python/girder_client/cli.py#L83-L88) by overriding `sendRestRequest`, maybe retrying 5 times? Or you could even expose this retry count as a command line flag if you wanted users to be able to set it--maybe it would be worth doing a hacky version first before exposing it as a CLI argument.","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1596065174,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY2NTk4MDg0MQ==","github-url":"https://github.com/dandi/dandi-cli/issues/136#issuecomment-665980841"},"message":"\u003e that is a client side timeout (or falling asleep as you put it @yarikoptic sleeping ) on the request.\n\nI would not yet be 100% certain about that.  Here is the joint sequence of events from both logs as I think it has happened (there is no subsec times in web server), with some comments in `# lines` but I have no clue how/what girder does\n```\n76715 2020-07-29 16:35:41,070 [   DEBUG] REST\u003e: args=('POST', 'file/chunk?offset=134217728\u0026uploadId=5f2196b2f63d62e1dbd0695f', None) kwargs={'files': None, 'data': \u003cgirder_client._ProgressBytesIO object at 0x7f752b8ffc50\u003e, 'json': None, 'headers': None, 'jsonResp': True}\n# data transmission is happening (for ~76 secs), and then girder digests/forwards data to S3,\n# receives some ack/nack and replies/logs in the log upon completion of the operation\naccess.log: [29/Jul/2020:15:36:57 +0000] \"POST /api/v1/file/chunk?offset=134217728\u0026uploadId=5f2196b2f63d62e1dbd0695f HTTP/1.1\" 200 2100 \"-\" \"python-requests/2.23.0\"\n    0 2020-07-29 16:36:57,785 [   DEBUG] REST\u003c: {'_id': '5f2196b2f63d62e1dbd0695f', 'assetstoreId': '5d9618588a600b0dcb25b4a6', 'behavior': 's3', 'created': '2020-07-29T15:33:06.099000+00:00', 'mimeType': 'application/octet-stream', 'name': 'sub-001_ses-20200727T094620_ecephys.nwb', 'parentId': '5f219599f63d62e1dbd0695e', 'parentType': 'item', 'received': 201326592, 's3': {'chunkLength': 33554432, 'chunked': True, 'key': 'girder-assetstore/d8/27/d8278b9868af40419c4133d308eaea97', 'keyName': 'girder-assetstore/d8/27/d8278b9868af40419c4133d308eaea97', 'partNumber': 3, 'relpath': '/dandiarchive/girder-assetstore/d8/27/d8278b9868af40419c4133d308eaea97', 'request': {'headers': {'Content-Disposition': 'attachment; filename=\"sub-001_ses-20200727T094620_ecephys.nwb\"', 'Content-Type': 'application/octet-stream', 'x-amz-acl': 'private', 'x-amz-meta-uploader-id': '5f1de355f63d62e1dbd06948', 'x-amz-meta-uploader-ip': '129.215.24.71'}, 'method': 'POST', 'url': 'https://dandiarchive.s3.amazonaws.com/girder-assetstore/d8/27/d8278b9868af40419c4133d308eaea97?uploads=\u0026X-Amz-Algorithm=AWS4-HMAC-SHA256\u0026X-Amz-Credential=ASIA3GIMZPVVECMGAIM2%2F20200729%2Fus-east-2%2Fs3%2Faws4_request\u0026X-Amz-Date=20200729T153306Z\u0026X-Amz-Expires=3600\u0026X-Amz-SignedHeaders=content-disposition%3Bcontent-type%3Bhost%3Bx-amz-acl%3Bx-amz-meta-uploader-id%3Bx-amz-meta-uploader-ip\u0026X-Amz-Security-Token=FwoGZXIvYXdzEGEaDGsgV7CrjJVSz59JKyK%2FAU%2FUNxUv3xA48rHUvzjYSpq5auW3ZbnGlfDyn2A6g5zIWV%2Brok0nX0lSEVsyNZ4TDQsr%2BGswi7vOzxd%2B6pHCZ8CTAjs%2B67oQZHGbMvZcMMD4pmR%2F0w%2FHp4BB4%2BHdqLCHeGdw0GtEWT%2FXytlEhPhZBB4zdCj6iPgLfJ2X6bjl0t8HOMnrIZGGiCHzq2e55za2INruG%2FGigJcG8JRTN58oYDlyn5K67YWPH8WQ99o0Fs%2FJP4MG7b2G0ulUOiG93BITKLKthvkFMi2GGQVGOULBpIE7muawEba02mirETYvdYu21p%2Flz0%2BstFokKUCKRUWh7UfdEh0%3D\u0026X-Amz-Signature=0c2f7c886ad500041f83ca70e12d7d02fac8b415eb5584f6a48a9d41d2e9478a'}, 'uploadId': 'LWiP5rLWrTifay_RXeV6rJ19k1r4_gP1ONrIGv4sboDVoxxMlSiPTAI43No7EoglKlbqpVrzsQec8iqnM.pJa_sqjDs2G3480OOephWaXdE3sSkyOzc9uZPAy_me4Hq0nRgB_3EyEVDkkv7Issjagod.itpU.5HuQNs2EIcbTJs-'}, 'size': 29521959808, 'updated': '2020-07-29T15:36:57.711454+00:00', 'userId': '5f1de355f63d62e1dbd06948'}\n   69 2020-07-29 16:36:57,785 [   DEBUG] PROGRESS[sub-001/sub-001_ses-20200727T094620_ecephys.nwb]: 201326592\n# we are submitting a new request pretty much right away\n----- 2020-07-29 16:36:57,854 [   DEBUG] REST\u003e: args=('POST', 'file/chunk?offset=201326592\u0026uploadId=5f2196b2f63d62e1dbd0695f', None) kwargs={'files': None, 'data': \u003cgirder_client._ProgressBytesIO object at 0x7f752b8ffe08\u003e, 'json': None, 'headers': None, 'jsonResp': True}%  \n# but then at 2 min sharp cut off we are getting 408 response\naccess.log: [29/Jul/2020:15:38:57 +0000] \"POST /api/v1/file/chunk?offset=201326592\u0026uploadId=5f2196b2f63d62e1dbd0695f HTTP/1.1\" 408 0 \"-\" \"python-requests/2.23.0\"\n```\nwhat I am thinking is:\n- client connection is **slow**\n- 2 minutes time out is not sufficient to receive/send to S3 the default block size we transmit,which is not that large and that is why usually 2 minutes are sufficient:\n```\n    # The current maximum chunk size for uploading file chunks\n    MAX_CHUNK_SIZE = 1024 * 1024 * 64\n```\nI don't think that retrying requests would be \"productive\" (if my \"slow bandwidth\" guess is correct) since they are likely to time out again, and we would just keep trying re-transmit those 64MB at a time...\n\nnot sure what is our girder configuration `upload_minimum_chunk_size` but it seems that the local one does not mind 64k chunk ;) so, @mhhennig would you be so kind to try this \"version\":\n\n```\npip3 install git+https://github.com/dandi/dandi-cli.git@temp-small-chunksize\n```\nwhere I made chunk 8 times smaller.  If this one works -- that means that we need to somehow mitigate for slow(er) connections.  [diff from master](https://github.com/dandi/dandi-cli/compare/temp-small-chunksize) if interested.","files":null},{"type":6,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1596065174,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdElzc3VlQ29tbWVudEVkaXQ6Mzg5NDE0MjAx"},"target":"ef8834d81885a99fb6aeb7f7da165bc1583be45dfa30ba164f896ea2dc993c48","message":"\u003e that is a client side timeout (or falling asleep as you put it @yarikoptic sleeping ) on the request.\n\nI would not yet be 100% certain about that.  Here is the joint sequence of events from both logs as I think it has happened (there is no subsec times in web server), with some comments in `# lines` but I have no clue how/what girder does\n```\n76715 2020-07-29 16:35:41,070 [   DEBUG] REST\u003e: args=('POST', 'file/chunk?offset=134217728\u0026uploadId=5f2196b2f63d62e1dbd0695f', None) kwargs={'files': None, 'data': \u003cgirder_client._ProgressBytesIO object at 0x7f752b8ffc50\u003e, 'json': None, 'headers': None, 'jsonResp': True}\n# (for ~76 secs) data transmission is happening and then girder digests/forwards data to S3,\n# receives some ack/nack and replies/logs in the log upon completion of the operation\naccess.log: [29/Jul/2020:15:36:57 +0000] \"POST /api/v1/file/chunk?offset=134217728\u0026uploadId=5f2196b2f63d62e1dbd0695f HTTP/1.1\" 200 2100 \"-\" \"python-requests/2.23.0\"\n    0 2020-07-29 16:36:57,785 [   DEBUG] REST\u003c: {'_id': '5f2196b2f63d62e1dbd0695f', 'assetstoreId': '5d9618588a600b0dcb25b4a6', 'behavior': 's3', 'created': '2020-07-29T15:33:06.099000+00:00', 'mimeType': 'application/octet-stream', 'name': 'sub-001_ses-20200727T094620_ecephys.nwb', 'parentId': '5f219599f63d62e1dbd0695e', 'parentType': 'item', 'received': 201326592, 's3': {'chunkLength': 33554432, 'chunked': True, 'key': 'girder-assetstore/d8/27/d8278b9868af40419c4133d308eaea97', 'keyName': 'girder-assetstore/d8/27/d8278b9868af40419c4133d308eaea97', 'partNumber': 3, 'relpath': '/dandiarchive/girder-assetstore/d8/27/d8278b9868af40419c4133d308eaea97', 'request': {'headers': {'Content-Disposition': 'attachment; filename=\"sub-001_ses-20200727T094620_ecephys.nwb\"', 'Content-Type': 'application/octet-stream', 'x-amz-acl': 'private', 'x-amz-meta-uploader-id': '5f1de355f63d62e1dbd06948', 'x-amz-meta-uploader-ip': '129.215.24.71'}, 'method': 'POST', 'url': 'https://dandiarchive.s3.amazonaws.com/girder-assetstore/d8/27/d8278b9868af40419c4133d308eaea97?uploads=\u0026X-Amz-Algorithm=AWS4-HMAC-SHA256\u0026X-Amz-Credential=ASIA3GIMZPVVECMGAIM2%2F20200729%2Fus-east-2%2Fs3%2Faws4_request\u0026X-Amz-Date=20200729T153306Z\u0026X-Amz-Expires=3600\u0026X-Amz-SignedHeaders=content-disposition%3Bcontent-type%3Bhost%3Bx-amz-acl%3Bx-amz-meta-uploader-id%3Bx-amz-meta-uploader-ip\u0026X-Amz-Security-Token=FwoGZXIvYXdzEGEaDGsgV7CrjJVSz59JKyK%2FAU%2FUNxUv3xA48rHUvzjYSpq5auW3ZbnGlfDyn2A6g5zIWV%2Brok0nX0lSEVsyNZ4TDQsr%2BGswi7vOzxd%2B6pHCZ8CTAjs%2B67oQZHGbMvZcMMD4pmR%2F0w%2FHp4BB4%2BHdqLCHeGdw0GtEWT%2FXytlEhPhZBB4zdCj6iPgLfJ2X6bjl0t8HOMnrIZGGiCHzq2e55za2INruG%2FGigJcG8JRTN58oYDlyn5K67YWPH8WQ99o0Fs%2FJP4MG7b2G0ulUOiG93BITKLKthvkFMi2GGQVGOULBpIE7muawEba02mirETYvdYu21p%2Flz0%2BstFokKUCKRUWh7UfdEh0%3D\u0026X-Amz-Signature=0c2f7c886ad500041f83ca70e12d7d02fac8b415eb5584f6a48a9d41d2e9478a'}, 'uploadId': 'LWiP5rLWrTifay_RXeV6rJ19k1r4_gP1ONrIGv4sboDVoxxMlSiPTAI43No7EoglKlbqpVrzsQec8iqnM.pJa_sqjDs2G3480OOephWaXdE3sSkyOzc9uZPAy_me4Hq0nRgB_3EyEVDkkv7Issjagod.itpU.5HuQNs2EIcbTJs-'}, 'size': 29521959808, 'updated': '2020-07-29T15:36:57.711454+00:00', 'userId': '5f1de355f63d62e1dbd06948'}\n   69 2020-07-29 16:36:57,785 [   DEBUG] PROGRESS[sub-001/sub-001_ses-20200727T094620_ecephys.nwb]: 201326592\n# we are submitting a new request pretty much right away\n----- 2020-07-29 16:36:57,854 [   DEBUG] REST\u003e: args=('POST', 'file/chunk?offset=201326592\u0026uploadId=5f2196b2f63d62e1dbd0695f', None) kwargs={'files': None, 'data': \u003cgirder_client._ProgressBytesIO object at 0x7f752b8ffe08\u003e, 'json': None, 'headers': None, 'jsonResp': True}%  \n# but then at 2 min sharp cut off we are getting 408 response\naccess.log: [29/Jul/2020:15:38:57 +0000] \"POST /api/v1/file/chunk?offset=201326592\u0026uploadId=5f2196b2f63d62e1dbd0695f HTTP/1.1\" 408 0 \"-\" \"python-requests/2.23.0\"\n```\nwhat I am thinking is:\n- client connection is **slow**\n- 2 minutes time out is not sufficient to receive/send to S3 the default block size we transmit,which is not that large and that is why usually 2 minutes are sufficient:\n```\n    # The current maximum chunk size for uploading file chunks\n    MAX_CHUNK_SIZE = 1024 * 1024 * 64\n```\nI don't think that retrying requests would be \"productive\" (if my \"slow bandwidth\" guess is correct) since they are likely to time out again, and we would just keep trying re-transmit those 64MB at a time...\n\nnot sure what is our girder configuration `upload_minimum_chunk_size` but it seems that the local one does not mind 64k chunk ;) so, @mhhennig would you be so kind to try this \"version\":\n\n```\npip3 install git+https://github.com/dandi/dandi-cli.git@temp-small-chunksize\n```\nwhere I made chunk 8 times smaller.  If this one works -- that means that we need to somehow mitigate for slow(er) connections.  [diff from master](https://github.com/dandi/dandi-cli/compare/temp-small-chunksize) if interested.","files":null},{"type":3,"author":{"id":"c8082a0f6b38dd60d28641b213f904bcd85419c2"},"timestamp":1596073008,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY2NjAyNjY3MA==","github-url":"https://github.com/dandi/dandi-cli/issues/136#issuecomment-666026670"},"message":"Yes, I agree. Sorry, I miswrote:\n\n\u003eclient side timeout\n\nI meant a client side error (slowness, could be from bandwidth, latency, or other causes such as drowsiness) that results in a server side timeout, but you figured it out correctly regardless of what I said, so you were not sleeping :) . I like your solution of smaller chunk size, because we will have less data to send through in that time, so we are more likely to succeed.\n\nYou might also want some retries, but it makes sense to experiment with just the smaller chunk size first. 8 times smaller is a lot, it means there will be 8 times as many API requests which may be inefficient. Overall I like this approach and it is a good start to see if it fixes the problem, then we can optimize chunk sizes/retries/adaptive approaches if needed.\n\n\nDetails on timeouts:\n\nIt isn't a 2 minute timeout, it just happens to look like that in this case. The below are nginx logs (above logs are also nginx, not girder) from the same (redacted) IP address, this time only 1:01 until the failure from the previous request. \n\n\u003eX.X.X.X - - [28/Jul/2020:12:38:37 +0000] \"POST /api/v1/file/chunk?offset=671088640\u0026uploadId=5f201901f63d62e1dbd06953 HTTP/1.1\" 200 2085 \"-\" \"python-requests/2.23.0\"\nX.X.X.X - - [28/Jul/2020:12:39:54 +0000] \"POST /api/v1/file/chunk?offset=738197504\u0026uploadId=5f201901f63d62e1dbd06953 HTTP/1.1\" 200 2085 \"-\" \"python-requests/2.23.0\"\nX.X.X.X - - [28/Jul/2020:12:40:55 +0000] \"POST /api/v1/file/chunk?offset=805306368\u0026uploadId=5f201901f63d62e1dbd06953 HTTP/1.1\" 408 0 \"-\" \"python-requests/2.23.0\"\n\nNote that these are nginx timeouts. Girder never even sees the very last chunk request.\n\nThese nginx timeouts are likely culprits:\n\nhttp://nginx.org/en/docs/http/ngx_http_core_module.html#client_body_timeout 60s\nhttp://nginx.org/en/docs/http/ngx_http_core_module.html#client_header_timeout 60s \nhttp://nginx.org/en/docs/http/ngx_http_core_module.html#lingering_timeout 5s\n\nI am not suggesting that we change these timeouts, I'm just posting details for future reference. Changing these timeouts wouldn't help with the browser path anyway, because we can't control the timeouts on S3. It is a 4XX error, meaning client side, so fixing it on the client is the right approach.","files":null},{"type":3,"author":{"id":"b0d2549539a17bb6d757efc1dda1b616cd002a7c"},"timestamp":1596109317,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY2NjMxNTI4Ng==","github-url":"https://github.com/dandi/dandi-cli/issues/136#issuecomment-666315286"},"message":"\u003e not sure what is our girder configuration `upload_minimum_chunk_size` but it seems that the local one does not mind 64k chunk ;) so, @mhhennig would you be so kind to try this \"version\":\n\u003e \n\u003e ```\n\u003e pip3 install git+https://github.com/dandi/dandi-cli.git@temp-small-chunksize\n\u003e ```\n\nI tried it, again it did not complete. The log is here: https://gist.github.com/mhhennig/f7ffec71fd6140f111fa2ee0cc59299d","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1596115750,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY2NjM2NDk4Mw==","github-url":"https://github.com/dandi/dandi-cli/issues/136#issuecomment-666364983"},"message":"I was about to scream \"rate limiting\", but then realized that I don't think that you got the `@temp-small-chunksize` installed... I didn't know that silly pip will not upgrade if already installed this way:\n```\nRequirement already satisfied (use --upgrade to upgrade): dandi==0.0.0 from git+https://github.com/dandi/dandi-cli.git@temp-small-chunksize in ./venvs/dev3/lib/python3.8/site-packages\n```\nPlease do\n```\npip3 install --upgrade git+https://github.com/dandi/dandi-cli.git@temp-small-chunksize\n```\nin that \"newer\" version you should see PROGRESS indicators in a new format (with `done=` and `%done`):\n```\n2020-07-30 09:28:18,701 [   DEBUG] PROGRESS[sub-759711149/sub-759711149_probe-792602654_ecephys.nwb]: done=109051904 %done=6.54531524362948\n```","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1596116585,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY2NjM3MjYzNw==","github-url":"https://github.com/dandi/dandi-cli/issues/136#issuecomment-666372637"},"message":"thank you @mgrauer !\n\n\u003e http://nginx.org/en/docs/http/ngx_http_core_module.html#client_body_timeout 60s\n\u003e http://nginx.org/en/docs/http/ngx_http_core_module.html#client_header_timeout 60s\n\u003e http://nginx.org/en/docs/http/ngx_http_core_module.html#lingering_timeout 5s\n\u003e \n\u003e I am not suggesting that we change these timeouts, I'm just posting details for future reference. Changing these timeouts wouldn't help with the browser path anyway, because we can't control the timeouts on S3. It is a 4XX error, meaning client side, so fixing it on the client is the right approach.\n\nI think the solution might end up with adjustment of both ends.  60s timeout for a body is VERY reasonable for typical deployments (there is no PUT of large files), but as we are file archive, and do expect large (megabytes) body I think it would only be sensible to boost it up.  I would say 5 times (unless we see that server at times starts to consume too much RAM, do we have monitoring setup?). \nIt would not be a complete solution BUT it would allow clients for larger chunk sizes transmission (or slower clients to not time out), thus minimizing # of API calls etc.  I am not sure if I would approach adjusting girder client upload logic to try dynamic adjustment of the chunk size, but we definitely should keep it in mind while implementing upload through our API. Sure thing changes in nginx nohow would help with direct upload to S3, but let's mitigate one path at a time (unless we then see that we would get similar errors on girder -\u003e s3 path).\n\n\u003e It is a 4XX error, meaning client side,\n\nWell  - even though they are \"Client errors\" - mitigation of them is not as straightforward I would say. 403 could be due to incorrect file level permissions on the server side (can be fixed only on the server side). 404 - file was moved on the server, and nothing client can really do (besides being provided a corrected address). 405 (Method Not Allowed) - I think I saw those appearing until I configured web server correctly to fulfill the requests client was supposed to be able to do, and so on.","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1596116829,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY2NjM3NTAwOA==","github-url":"https://github.com/dandi/dandi-cli/issues/136#issuecomment-666375008"},"message":"\u003e I am not sure if I would approach adjusting girder client upload logic\n\nhaving said that I think that was a good idea to retry `sendRestRequest` regardless, but probably only on a limited set of error codes (e.g. 408 Request Timeout, 409 Conflict), any other comes to mind? I will quickly add retry/logging there to see what we would be getting.","files":null},{"type":3,"author":{"id":"b0d2549539a17bb6d757efc1dda1b616cd002a7c"},"timestamp":1596117922,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY2NjM4NTM4Ng==","github-url":"https://github.com/dandi/dandi-cli/issues/136#issuecomment-666385386"},"message":"Sorry, I actually had wondered if pip did upgrade, but did not check. Now with the \"latest\" version, still a problem:\nhttps://gist.github.com/mhhennig/f7ffec71fd6140f111fa2ee0cc59299d\nI'm getting the impression the problem may be on my side, could this be the case? What causes these timeouts, it's the client, right? Could this have to do with the network config we have here in Informatics?","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1596118612,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY2NjM5MjYwNg==","github-url":"https://github.com/dandi/dandi-cli/issues/136#issuecomment-666392606"},"message":"ok, I have pushed 29bd59ac66cd58b6e3a4de292ee44316f70ee8e8 into the same branch, so whenever @mhhennig has a chance to try that branch (it will be in combination with smaller chunk size)  we will see the effect!\n\nAlso, now (as of 1d00ad0ee246cff0bcf83699839a5ad98b091405) we will be back to 64M chunk size by default but you could set desired one with env var  DANDI_MAX_CHUNK_SIZE=8388608  (for 8M chunk).\n\nI think those should be good in general to have so issued https://github.com/dandi/dandi-cli/pull/139 from that branch.\n\nRe the most recent attempt by @mhhennig , here is with dtimes:\n```\n 10732 2020-07-30 14:43:37,505 [   DEBUG] REST\u003e: args=('POST', 'file/chunk?offset=8388608\u0026uploadId=5f22ce7e385430deb68c9bb3', None) kwargs={'files': None, 'data': \u003cgirder_client._Progress\n     0 2020-07-30 14:43:48,237 [   DEBUG] REST\u003c: {'_id': '5f22ce7e385430deb68c9bb3', 'assetstoreId': '5d9618588a600b0dcb25b4a6', 'behavior': 's3', 'created': '2020-07-30T13:43:26.526000+0\n    - {'upload': 0.056829614663500866}\n    11 2020-07-30 14:43:48,237 [   DEBUG] PROGRESS[sub-001/sub-001_ses-20200727T094620_ecephys.nwb]: done=16777216 %done=0.056829614663500866\n 10733 2020-07-30 14:43:48,248 [   DEBUG] REST\u003e: args=('POST', 'file/chunk?offset=16777216\u0026uploadId=5f22ce7e385430deb68c9bb3', None) kwargs={'files': None, 'data': \u003cgirder_client._Progres\n     1 2020-07-30 14:43:58,981 [   DEBUG] REST\u003c: {'_id': '5f22ce7e385430deb68c9bb3', 'assetstoreId': '5d9618588a600b0dcb25b4a6', 'behavior': 's3', 'created': '2020-07-30T13:43:26.526000+0\n    - {'upload': 0.0852444219952513}\n     9 2020-07-30 14:43:58,982 [   DEBUG] PROGRESS[sub-001/sub-001_ses-20200727T094620_ecephys.nwb]: done=25165824 %done=0.0852444219952513\n 11443 2020-07-30 14:43:58,991 [   DEBUG] REST\u003e: args=('POST', 'file/chunk?offset=25165824\u0026uploadId=5f22ce7e385430deb68c9bb3', None) kwargs={'files': None, 'data': \u003cgirder_client._Progres\n     1 2020-07-30 14:44:10,434 [   DEBUG] REST\u003c: {'_id': '5f22ce7e385430deb68c9bb3', 'assetstoreId': '5d9618588a600b0dcb25b4a6', 'behavior': 's3', 'created': '2020-07-30T13:43:26.526000+0\n    - {'upload': 0.11365922932700173}\n     4 2020-07-30 14:44:10,435 [   DEBUG] PROGRESS[sub-001/sub-001_ses-20200727T094620_ecephys.nwb]: done=33554432 %done=0.11365922932700173\n953781 2020-07-30 14:44:10,439 [   DEBUG] REST\u003e: args=('POST', 'file/chunk?offset=33554432\u0026uploadId=5f22ce7e385430deb68c9bb3', None) kwargs={'files': None, 'data': \u003cgirder_client._Progres\n----- 2020-07-30 15:00:04,220 [   DEBUG] Caught exception ('Connection aborted.', OSError(\"(110, 'ETIMEDOUT')\"))%  \n```\nwhich \n- we do get faster turn around (11sec) for requests with smaller load\n- then the last one comes back only after ~16 minutes!\n\nand yes -- most likely it is some rate limiting policy on your network.  I would have contacted admins and pointed them to this issue for more details.  Meanwhile, if you would be so kind -- could you try to `pip install --upgrade` again, set also DANDI_MAX_CHUNK_SIZE=8388608 (just in case or would be fun to see also without it) and see if up to 3 retries magically help us to go forward ;-)","files":null},{"type":3,"author":{"id":"b0d2549539a17bb6d757efc1dda1b616cd002a7c"},"timestamp":1596125601,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY2NjQ5NzU5MA==","github-url":"https://github.com/dandi/dandi-cli/issues/136#issuecomment-666497590"},"message":"Ok, here's a run with the latest changes, and the following command:\n```DANDI_LOG_GIRDER=1 DANDI_DEVEL=1 DANDI_MAX_CHUNK_SIZE=8388608 dandi -l DEBUG upload --devel-debug --existing force sub-001/sub-001_ses-20200727T094620_ecephys.nwb 2\u003e\u00261 | tee /tmp/mydandi.log```\n\nStill no success:\nhttps://gist.github.com/mhhennig/f7ffec71fd6140f111fa2ee0cc59299d\n\nI'll also check with our comp admin people...","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1596127755,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY2NjUxOTc0OQ==","github-url":"https://github.com/dandi/dandi-cli/issues/136#issuecomment-666519749"},"message":"I have pushed 2abe7fac29a2556e226bb1626c99bdd791c6dc47 with which we would retry on more exceptions.  Would you be @mhhennig do install/rerun again?  I still hope that we would get to a workable solution (while admin people react)","files":null},{"type":3,"author":{"id":"b0d2549539a17bb6d757efc1dda1b616cd002a7c"},"timestamp":1596133156,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY2NjU3Nzk1MQ==","github-url":"https://github.com/dandi/dandi-cli/issues/136#issuecomment-666577951"},"message":"Just re-ran it, still breaks, but seems to have gotten a bit further this time (log in same gist).","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1596144637,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY2NjcxNjM1MQ==","github-url":"https://github.com/dandi/dandi-cli/issues/136#issuecomment-666716351"},"message":"Ha, this is a \"new\" one:\n```\n 9230 2020-07-30 19:13:48,083 [   DEBUG] REST#1\u003e: args=('POST', 'file/chunk?offset=285212672\u0026uploadId=5f230859385430deb68c9bb8', None) kwargs={'files': None, 'data': \u003cgirder_client._Prog\n    1 2020-07-30 19:13:57,313 [   DEBUG] REST#1\u003c: {'_id': '5f230859385430deb68c9bb8', 'assetstoreId': '5d9618588a600b0dcb25b4a6', 'behavior': 's3', 'created': '2020-07-30T17:50:17.064000\n    - {'upload': 0.9945182566112651}\n    4 2020-07-30 19:13:57,314 [   DEBUG] PROGRESS[sub-001/sub-001_ses-20200727T094620_ecephys.nwb]: done=293601280 %done=0.9945182566112651\n10087 2020-07-30 19:13:57,318 [   DEBUG] REST#0\u003e: args=('POST', 'file/chunk?offset=293601280\u0026uploadId=5f230859385430deb68c9bb8', None) kwargs={'files': None, 'data': \u003cgirder_client._Prog\n    - Response text: {\"message\": \"Server has received 292659200 bytes, but client sent offset 293601280.\", \"type\": \"rest\"}\n    0 2020-07-30 19:14:07,405 [   DEBUG] REST#0: failed with HTTP error 400: POST https://girder.dandiarchive.org/api/v1/file/chunk?offset=293601280\u0026uploadId=5f230859385430deb68c9bb8\n----- 2020-07-30 19:14:07,405 [   DEBUG] Caught exception HTTP error 400: POST https://girder.dandiarchive.org/api/v1/file/chunk?offset=293601280\u0026uploadId=5f230859385430deb68c9bb8\n    - Response text: {\"message\": \"Server has received 292659200 bytes, but client sent offset 293601280.\", \"type\": \"rest\"}%\n```\nwhich says that server did not receive a \"part\" (not the same as our chunk size) of the previous (retransmitted?) \"body\":  293601280 - 292659200 = 942080. \nI think I have provided a possible \"fix\" in 63e1350c67b6fb461a49fca3588a4b106616a39b which I just pushed.  If that one doesn't work -- something might need to be done on girder side to accommodate retransmissions.  @mhhennig - would it be too much to ask to try again? (any word from admins BTW?)","files":null},{"type":3,"author":{"id":"b0d2549539a17bb6d757efc1dda1b616cd002a7c"},"timestamp":1596147008,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY2NjczNjUwOQ==","github-url":"https://github.com/dandi/dandi-cli/issues/136#issuecomment-666736509"},"message":"I'll re-try as many times as it takes :)\nLooking promising now, it's at 1.7% and running, I think this far I never got it previously.","files":null},{"type":3,"author":{"id":"b0d2549539a17bb6d757efc1dda1b616cd002a7c"},"timestamp":1596149595,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY2Njc1OTgzOQ==","github-url":"https://github.com/dandi/dandi-cli/issues/136#issuecomment-666759839"},"message":"At 6% now, I'll keep it running overnight...","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1596154269,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY2NjgwODM3Mw==","github-url":"https://github.com/dandi/dandi-cli/issues/136#issuecomment-666808373"},"message":"woooohooo! That is promising!","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1596155339,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY2NjgxOTA1MA==","github-url":"https://github.com/dandi/dandi-cli/issues/136#issuecomment-666819050"},"message":"BTW, if you are keeping that log, please share it afterwards (can just email to debian@onerussian.com) - I would like to see how many retries etc.  Also, please do not upload other files right away -- we will need to check if integrity (checksum) is matching (after download). Then  let's try one other big one without reducing chunk size and see how that goes... if not too bad --  then we could try without any special settings but I am afraid without nginx tune up for timeouts it would fail since will try to do multiple uploads in parallel","files":null},{"type":3,"author":{"id":"b0d2549539a17bb6d757efc1dda1b616cd002a7c"},"timestamp":1596197452,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY2Njk3ODg3OQ==","github-url":"https://github.com/dandi/dandi-cli/issues/136#issuecomment-666978879"},"message":"So, *something* changed, it completed although I'm not sure the upload actually worked. Sensing the log via email.\n```\nPATH                                            SIZE    ERRORS UPLOAD     STATUS    MESSAGE                                    \nsub-001/sub-001_ses-20200727T094620_ecephys.nwb                           skipped   Expecting value: line 1 column 1 (char 0)  \nSummary:                                        0 Bytes        444.0 kB/s 1 skipped 1 Expecting value: line 1 column 1 (char 0)\n```","files":null},{"type":6,"author":{"id":"b0d2549539a17bb6d757efc1dda1b616cd002a7c"},"timestamp":1596197452,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdElzc3VlQ29tbWVudEVkaXQ6Mzg5ODYzMzc0"},"target":"280c1358bf954d1fe40d859908bf41a1304712782ae1f4328dbac22fd24aabeb","message":"So, *something* changed, it completed although I'm not sure the upload actually worked. Sending the log via email.\n```\nPATH                                            SIZE    ERRORS UPLOAD     STATUS    MESSAGE                                    \nsub-001/sub-001_ses-20200727T094620_ecephys.nwb                           skipped   Expecting value: line 1 column 1 (char 0)  \nSummary:                                        0 Bytes        444.0 kB/s 1 skipped 1 Expecting value: line 1 column 1 (char 0)\n```\n\nUpdate: data rates from the machine were very low (below a MByte/s) during the transfer, so there may be a problem on our side. Computing support is investigating...","files":null},{"type":6,"author":{"id":"b0d2549539a17bb6d757efc1dda1b616cd002a7c"},"timestamp":1596202598,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdElzc3VlQ29tbWVudEVkaXQ6Mzg5ODgwNzEz"},"target":"280c1358bf954d1fe40d859908bf41a1304712782ae1f4328dbac22fd24aabeb","message":"So, *something* changed, it completed although I'm not sure the upload actually worked. Sending the log via email.\n```\nPATH                                            SIZE    ERRORS UPLOAD     STATUS    MESSAGE                                    \nsub-001/sub-001_ses-20200727T094620_ecephys.nwb                           skipped   Expecting value: line 1 column 1 (char 0)  \nSummary:                                        0 Bytes        444.0 kB/s 1 skipped 1 Expecting value: line 1 column 1 (char 0)\n```\n\nUpdate: data rates from the machine were very low (below a MByte/s) during the transfer, so there may be a problem on our side. Computing support is investigating...\n\nQuestion from support: Is it an IPv4 or IPv6 connection? If the latter they suggest to test IPv4.","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1596209965,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY2NzE4NzEwMA==","github-url":"https://github.com/dandi/dandi-cli/issues/136#issuecomment-667187100"},"message":"\u003e Question from support: Is it an IPv4 or IPv6 connection? If the latter they suggest to test IPv4.\n\nAFAIK just good old v4, I do not even see a record for IPv6 for any of our servers:\n```\n$\u003e nslookup girder.dandiarchive.org\nServer:\t\t192.168.1.1\nAddress:\t192.168.1.1#53\n\nNon-authoritative answer:\nName:\tgirder.dandiarchive.org\nAddress: 3.19.164.171\n```\nAs for speed -- what speeds do you attain while uploading to any other server? e.g. by running speedtest google provides (just search for speedtest)?  What admins said would be an \"expected\" speed you should see?","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1596210529,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY2NzE5MTcxNA==","github-url":"https://github.com/dandi/dandi-cli/issues/136#issuecomment-667191714"},"message":"re failed run... some bug somewhere.  Would you be so kind to rerun while making sure you provide ` --devel-debug` option?\nactually, ideally, let's run it in debug mode, so we could just interactively troubleshoot it when/if that issue occurs. Do smth like\n\n```\nDANDI_MAX_CHUNK_SIZE=8388608 DANDI_LOG_GIRDER=1 DANDI_DEVEL=1 dandi -l DEBUG --pdb upload -e force --validation skip -i local-docker --existing force --devel-debug PATHTOFILE\n```\n(no saving log into a file) so if exception happens, you would end up in `pdb` and we could see details (better to work on that in slack more \"interactively\") but first commands to run would be `l` to see surrounding code and `p` to print some variables etc involved.","files":null},{"type":6,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1596210529,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdElzc3VlQ29tbWVudEVkaXQ6Mzg5OTEzNTky"},"target":"939dccf7bea7b3c8a6b34010d1768fb0df57144f15e6f64aac5864108402ea99","message":"re failed run... some bug somewhere.  Would you be so kind to rerun while making sure you provide ` --devel-debug` option?\nactually, ideally, let's run it in ~~debug~~ mode which would give us interactive debugger, so we could just interactively troubleshoot it when/if that issue occurs. Do smth like\n\n```\nDANDI_MAX_CHUNK_SIZE=8388608 DANDI_LOG_GIRDER=1 DANDI_DEVEL=1 dandi -l DEBUG --pdb upload -e force --validation skip -i local-docker --existing force --devel-debug PATHTOFILE\n```\n(no saving log into a file) so if exception happens, you would end up in `pdb` and we could see details (better to work on that in slack more \"interactively\") but first commands to run would be `l` to see surrounding code and `p` to print some variables etc involved.","files":null},{"type":6,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1596211598,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdElzc3VlQ29tbWVudEVkaXQ6Mzg5OTE3Nzky"},"target":"939dccf7bea7b3c8a6b34010d1768fb0df57144f15e6f64aac5864108402ea99","message":"re failed run... some bug somewhere.  Would you be so kind to rerun while making sure you provide ` --devel-debug` option?\nactually, ideally, let's run it in ~~debug~~ mode which would give us interactive debugger, so we could just interactively troubleshoot it when/if that issue occurs. Do smth like\n\n```\nDANDI_MAX_CHUNK_SIZE=8388608 DANDI_LOG_GIRDER=1 DANDI_DEVEL=1 dandi -l DEBUG --pdb upload -e force --validation skip --existing force --devel-debug PATHTOFILE\n```\n(no saving log into a file) so if exception happens, you would end up in `pdb` and we could see details (better to work on that in slack more \"interactively\") but first commands to run would be `l` to see surrounding code and `p` to print some variables etc involved.\n\nedit: removed ` -i local-docker `","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1596211879,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY2NzIwNDI1MQ==","github-url":"https://github.com/dandi/dandi-cli/issues/136#issuecomment-667204251"},"message":"FTR: I have tried to emulate slow connection locally with \n```\nsudo tc qdisc add dev vetha3482b2 root tbf rate 1024kbit latency 50ms burst 1540\n```\nfor both interfaces related to dandi_client and dandi_girder local development containers... upload speed crawled 0.5-1 Mbps (bits, not bytes! ;)) but did not trigger any retransmission...\n\nan interesting observation in the log you shared is that it is only on the initial REST upload request it seems to fail and then proceeds normally without retransmissions... since backtrace above shows that it is coming from SSL layer, and unlike local using http main uses https, I suspect it might be somehow related to SSL... I will see if I could establish a dedicated \"slow down\" for connection going from my laptop to the main server so I could possibly trigger original issue myself...","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1596214263,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY2NzIyNTExOA==","github-url":"https://github.com/dandi/dandi-cli/issues/136#issuecomment-667225118"},"message":"FTR: https://github.com/thombashi/tcconfig seems to be the ultimate tool to assist with \"emulation\".  I did ```sudo `which tcset` wlp82s0 --delay 100ms --network 3.19.164.171 --rate 8000Kbps``` (tcset is python based, installed in a virtualenv thus the dance with `which`)","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1596214877,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY2NzIzMDE1NA==","github-url":"https://github.com/dandi/dandi-cli/issues/136#issuecomment-667230154"},"message":"Unfortunately, even after adding `--loss 0.01% ` I do not see the \"desired\" behavior of REST request errorring out.  Increased to `--delay 200ms --network 3.19.164.171 --rate 8000Kbps --loss 1%` and the same ...\n\nSo I am ready to blame (check) if it might be Python libraries etc.  Would you be so kind to provide output of `conda list --explicit` in your conda environment?  may be that brings us \"luck\" ;)","files":null},{"type":3,"author":{"id":"b0d2549539a17bb6d757efc1dda1b616cd002a7c"},"timestamp":1596221966,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY2NzI5NDQ3NA==","github-url":"https://github.com/dandi/dandi-cli/issues/136#issuecomment-667294474"},"message":"Ok. Some unrelated packages here:\n```\n# platform: linux-64\n@EXPLICIT\nhttps://repo.anaconda.com/pkgs/main/linux-64/_libgcc_mutex-0.1-main.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/blas-1.0-mkl.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/ca-certificates-2020.1.1-0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/intel-openmp-2020.1-217.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/libgfortran-ng-7.3.0-hdf63c60_0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/libstdcxx-ng-9.1.0-hdf63c60_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/mpi-1.0-mpich.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/libgcc-ng-9.1.0-hdf63c60_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/mkl-2020.1-217.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/expat-2.2.6-he6710b0_0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/gmp-6.1.2-h6c8ec71_1.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/icu-58.2-he6710b0_3.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/jpeg-9b-h024ee3a_2.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/libffi-3.3-he6710b0_1.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/libsodium-1.0.16-h1bed415_0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/libuuid-1.0.3-h1bed415_2.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/libxcb-1.13-h1bed415_1.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/lz4-c-1.8.1.2-h14c3975_0.conda\nhttps://conda.anaconda.org/conda-forge/linux-64/mpich-3.3.2-hc856adb_0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/ncurses-6.2-he6710b0_1.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/nodejs-10.13.0-he6710b0_0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/openssl-1.1.1g-h7b6447c_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/pcre-8.43-he6710b0_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/snappy-1.1.7-hbae5bb6_3.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/xz-5.2.5-h7b6447c_0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/yaml-0.1.7-had09818_2.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/zlib-1.2.11-h7b6447c_3.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/glib-2.63.1-h3eb4bd4_1.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/hdf5-1.10.4-hb1b8bf9_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/libedit-3.1.20181209-hc058e9b_0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/libpng-1.6.37-hbc83047_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/libxml2-2.9.9-hea5a465_1.conda\nhttps://conda.anaconda.org/flatiron/linux-64/mountainlab-0.15.0-0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/pandoc-2.2.3.2-0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/readline-7.0-h7b6447c_5.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/tk-8.6.8-hbc83047_0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/zeromq-4.3.1-he6710b0_3.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/zstd-1.3.7-h0b5b093_0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/blosc-1.16.3-hd408876_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/dbus-1.13.14-hb2f20db_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/freetype-2.9.1-h8a8886c_1.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/gstreamer-1.14.0-hb31296c_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/libtiff-4.1.0-h2733197_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/sqlite-3.31.1-h62c20be_1.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/fontconfig-2.13.0-h9420a91_0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/gst-plugins-base-1.14.0-hbbd80ab_1.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/python-3.7.2-h0371630_0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/alabaster-0.7.12-py37_0.conda\nhttps://repo.anaconda.com/pkgs/main/noarch/atomicwrites-1.4.0-py_0.conda\nhttps://repo.anaconda.com/pkgs/main/noarch/attrs-19.3.0-py_0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/backcall-0.1.0-py37_0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/certifi-2020.4.5.1-py37_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/chardet-3.0.4-py37_1003.conda\nhttps://repo.anaconda.com/pkgs/main/noarch/colorama-0.4.3-py_0.conda\nhttps://repo.anaconda.com/pkgs/main/noarch/decorator-4.4.2-py_0.conda\nhttps://repo.anaconda.com/pkgs/main/noarch/defusedxml-0.6.0-py_0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/docutils-0.16-py37_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/entrypoints-0.3-py37_0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/future-0.18.2-py37_0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/noarch/idna-2.9-py_1.conda\nhttps://repo.anaconda.com/pkgs/main/noarch/imagesize-1.2.0-py_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/ipython_genutils-0.2.0-py37_0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/kiwisolver-1.2.0-py37hfd86e86_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/markupsafe-1.1.1-py37h7b6447c_0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/mistune-0.8.4-py37h7b6447c_0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/noarch/more-itertools-8.3.0-py_0.conda\nhttps://conda.anaconda.org/conda-forge/linux-64/mpi4py-3.0.3-py37hcf07815_0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/olefile-0.46-py37_0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/pandocfilters-1.4.2-py37_1.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/noarch/parso-0.7.0-py_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/pickleshare-0.7.5-py37_0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/noarch/prometheus_client-0.7.1-py_0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/psutil-5.7.0-py37h7b6447c_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/ptyprocess-0.6.0-py37_0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/noarch/py-1.8.1-py_0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/noarch/pycparser-2.20-py_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/pymongo-3.9.0-py37he6710b0_0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/noarch/pyparsing-2.4.7-py_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/pysocks-1.7.1-py37_0.conda\nhttps://repo.anaconda.com/pkgs/main/noarch/pytz-2020.1-py_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/pyyaml-3.13-py37h14c3975_0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/pyzmq-18.1.1-py37he6710b0_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/qt-5.9.7-h5867ecd_1.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/noarch/qtpy-1.9.0-py_0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/send2trash-1.5.0-py37_0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/sip-4.19.8-py37hf484d3e_0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/six-1.14.0-py37_0.conda\nhttps://repo.anaconda.com/pkgs/main/noarch/snowballstemmer-2.0.0-py_0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/noarch/sphinxcontrib-applehelp-1.0.2-py_0.conda\nhttps://repo.anaconda.com/pkgs/main/noarch/sphinxcontrib-devhelp-1.0.2-py_0.conda\nhttps://repo.anaconda.com/pkgs/main/noarch/sphinxcontrib-htmlhelp-1.0.3-py_0.conda\nhttps://repo.anaconda.com/pkgs/main/noarch/sphinxcontrib-jsmath-1.0.1-py_0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/noarch/sphinxcontrib-qthelp-1.0.3-py_0.conda\nhttps://repo.anaconda.com/pkgs/main/noarch/sphinxcontrib-serializinghtml-1.1.4-py_0.conda\nhttps://repo.anaconda.com/pkgs/main/noarch/testpath-0.4.4-py_0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/tornado-6.0.4-py37h7b6447c_1.conda\nhttps://repo.anaconda.com/pkgs/main/noarch/tqdm-4.46.0-py_0.conda\nhttps://repo.anaconda.com/pkgs/main/noarch/wcwidth-0.1.9-py_0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/webencodings-0.5.1-py37_1.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/noarch/zipp-3.1.0-py_0.conda\nhttps://repo.anaconda.com/pkgs/main/noarch/babel-2.8.0-py_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/cffi-1.14.0-py37he30daa8_1.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/cycler-0.10.0-py37_0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/importlib-metadata-1.6.0-py37_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/jedi-0.17.0-py37_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/mkl-service-2.3.0-py37he904b0f_0.conda\nhttps://repo.anaconda.com/pkgs/main/noarch/packaging-20.3-py_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/pexpect-4.8.0-py37_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/pillow-7.1.2-py37hb39fc2d_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/pyqt-5.9.2-py37h05f1152_2.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/pyrsistent-0.16.0-py37h7b6447c_0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/noarch/python-dateutil-2.8.1-py_0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/setuptools-46.4.0-py37_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/terminado-0.8.3-py37_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/traitlets-4.3.3-py37_0.conda\nhttps://repo.anaconda.com/pkgs/main/noarch/bleach-3.1.4-py_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/cryptography-2.9.2-py37h1ba5d50_0.conda\nhttps://repo.anaconda.com/pkgs/main/noarch/importlib_metadata-1.6.0-0.conda\nhttps://repo.anaconda.com/pkgs/main/noarch/jinja2-2.11.2-py_0.conda\nhttps://repo.anaconda.com/pkgs/main/noarch/joblib-0.14.1-py_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/jupyter_core-4.6.3-py37_0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/noarch/networkx-2.4-py_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/nose-1.3.7-py37_2.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/numpy-base-1.18.1-py37hde5b4d6_1.conda\nhttps://repo.anaconda.com/pkgs/main/noarch/pygments-2.6.1-py_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/wheel-0.34.2-py37_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/jsonschema-3.2.0-py37_0.conda\nhttps://repo.anaconda.com/pkgs/main/noarch/jupyter_client-6.1.3-py_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/pip-20.0.2-py37_3.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/pluggy-0.13.1-py37_0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/noarch/prompt-toolkit-3.0.5-py_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/pyopenssl-19.1.0-py37_0.conda\nhttps://repo.anaconda.com/pkgs/main/noarch/nbformat-5.0.6-py_0.conda\nhttps://repo.anaconda.com/pkgs/main/noarch/prompt_toolkit-3.0.5-0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/pytest-5.0.1-py37_0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/urllib3-1.25.8-py37_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/ipython-7.13.0-py37h5ca1d4c_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/nbconvert-5.6.1-py37_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/requests-2.23.0-py37_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/ipykernel-5.1.4-py37h39e3cac_0.conda\nhttps://repo.anaconda.com/pkgs/main/noarch/sphinx-3.0.3-py_0.conda\nhttps://repo.anaconda.com/pkgs/main/noarch/jupyter_console-6.1.0-py_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/notebook-6.0.3-py37_0.conda\nhttps://repo.anaconda.com/pkgs/main/noarch/numpydoc-0.9.2-py_0.conda\nhttps://repo.anaconda.com/pkgs/main/noarch/qtconsole-4.7.4-py_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/widgetsnbextension-3.5.1-py37_0.conda\nhttps://repo.anaconda.com/pkgs/main/noarch/ipywidgets-7.5.1-py_0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/jupyter-1.0.0-py37_7.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/h5py-2.10.0-py37h7918eee_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/imageio-2.6.0-py37_0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/matplotlib-3.0.2-py37h5429711_0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/mkl_fft-1.0.15-py37ha843d7b_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/mkl_random-1.1.1-py37h0573a6f_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/numpy-1.18.1-py37h4f9e942_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/pandas-0.24.1-py37he6710b0_0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/python-blosc-1.7.0-py37h7b6447c_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/scipy-1.4.1-py37h0b6359f_0.conda\nhttps://conda.anaconda.org/jaikumarm/linux-64/hyperopt-0.1.2-py37h39e3cac_0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/scikit-learn-0.22.1-py37hd81dba3_0.conda\nhttps://conda.anaconda.org/conda-forge/linux-64/hdbscan-0.8.24-py37hc1659b7_0.tar.bz2\nhttps://conda.anaconda.org/conda-forge/noarch/scikit-optimize-0.5.2-py_0.tar.bz2\n```\nAnd pip:\n```\nalabaster                     0.7.12              \nappdirs                       1.4.4               \natomicwrites                  1.4.0               \nattrs                         19.3.0              \nBabel                         2.8.0               \nbackcall                      0.1.0               \nbleach                        3.1.4               \nblessings                     1.7                 \nblinker                       1.4                 \nblosc                         1.8.1               \ncached-property               1.5.1               \ncertifi                       2020.4.5.1          \ncffi                          1.14.0              \nchardet                       3.0.4               \nci-info                       0.2.0               \nClick                         7.0                 \nclick-didyoumean              0.0.3               \ncloudpickle                   1.3.0               \ncolorama                      0.4.3               \ncryptography                  2.9.2               \ncycler                        0.10.0              \nCython                        0.29.6              \ndandi                         0.0.0               \ndecorator                     4.4.2               \ndefusedxml                    0.6.0               \nDeprecated                    1.2.7               \ndiskcache                     4.1.0               \ndocutils                      0.16                \ndoit                          0.32.0              \nelephant                      0.6.1               \nentrypoints                   0.3                 \net-xmlfile                    1.0.1               \netelemetry                    0.2.1               \nfasteners                     0.14.1              \nfuture                        0.18.2              \nghp-import2                   1.0.1               \ngirder-client                 3.1.0               \nh5py                          2.10.0              \nhdbscan                       0.8.24              \nhdmf                          1.6.4               \nherdingspikes                 0.3.7               \nhumanize                      2.5.0               \nhyperopt                      0.1.2               \nidna                          2.9                 \nimageio                       2.6.0               \nimagesize                     1.2.0               \nimportlib-metadata            1.6.0               \nipykernel                     5.1.4               \nipython                       7.13.0              \nipython-genutils              0.2.0               \nipywidgets                    7.5.1               \nisosplit5                     0.1.3               \njdcal                         1.4                 \njedi                          0.17.0              \njeepney                       0.4.3               \nJinja2                        2.11.2              \njoblib                        0.14.1              \njp-proxy-widget               1.0.0               \njsonschema                    3.2.0               \njupyter                       1.0.0               \njupyter-client                6.1.3               \njupyter-console               6.1.0               \njupyter-core                  4.6.3               \nkachery                       0.4.7               \nkbucket                       0.13.0              \nkeyring                       21.2.1              \nkeyrings.alt                  3.4.0               \nkiwisolver                    1.2.0               \nklusta                        3.0.16              \nklustakwik2                   0.2.7               \nllvmlite                      0.31.0              \nlxml                          4.5.0               \nMako                          1.1.2               \nMarkdown                      3.2.1               \nMarkupSafe                    1.1.1               \nmatplotlib                    3.0.2               \nmatplotlib-venn               0.11.5              \nMEArec                        1.4.1               \nMEAutility                    1.4.6               \nmistune                       0.8.4               \nmkl-fft                       1.0.15              \nmkl-random                    1.1.1               \nmkl-service                   2.3.0               \nml-ms4alg                     0.3.2               \nmonotonic                     1.5                 \nmore-itertools                8.3.0               \nmountainlab-pytools           0.7.3               \nmountaintools                 0.7.1               \nmpi4py                        3.0.3               \nnatsort                       7.0.1               \nnbconvert                     5.6.1               \nnbformat                      5.0.6               \nneo                           0.8.0               \nnetworkx                      2.4                 \nNikola                        8.0.4               \nnose                          1.3.7               \nnotebook                      6.0.3               \nnumba                         0.47.0              \nnumpy                         1.18.1              \nnumpydoc                      0.9.2               \nolefile                       0.46                \nopenpyxl                      2.6.1               \npackaging                     20.3                \npairio                        0.4.0               \npandas                        0.24.1              \npandocfilters                 1.4.2               \nparso                         0.7.0               \npatsy                         0.5.1               \npexpect                       4.8.0               \npickleshare                   0.7.5               \npiexif                        1.1.3               \nPillow                        7.1.2               \npip                           20.0.2              \npluggy                        0.13.1              \nprometheus-client             0.7.1               \nprompt-toolkit                3.0.5               \npsutil                        5.7.0               \nptyprocess                    0.6.0               \npy                            1.8.1               \npybind11                      2.2.4               \npycparser                     2.20                \npycrypto                      2.6.1               \npygit2                        1.2.1               \nPyGithub                      1.46                \npygithub3                     0.5.1               \nPygments                      2.6.1               \npyinotify                     0.9.6               \nPyJWT                         1.7.1               \npymongo                       3.10.1              \npynwb                         1.3.3               \npyOpenSSL                     19.1.0              \npyout                         0.5.1               \npyparsing                     2.4.7               \nPyQt5                         5.14.1              \nPyQt5-sip                     12.7.1              \npyqtgraph                     0.10.0              \npyrsistent                    0.16.0              \nPyRSS2Gen                     1.1                 \nPySocks                       1.7.1               \npytest                        5.0.1               \npython-dateutil               2.8.1               \npython-dotenv                 0.10.3              \npython-frontmatter            0.5.0               \npytools                       2020.1              \npytz                          2020.1              \nPyYAML                        3.13                \npyzmq                         18.1.1              \nqtconsole                     4.7.4               \nQtPy                          1.9.0               \nquantities                    0.12.3              \nrequests                      2.23.0              \nrequests-toolbelt             0.9.1               \nruamel.yaml                   0.16.10             \nruamel.yaml.clib              0.2.0               \nscikit-learn                  0.23.0              \nscikit-optimize               0.5.2               \nscipy                         1.4.1               \nseaborn                       0.9.0               \nSecretStorage                 3.1.2               \nsemantic-version              2.8.5               \nSend2Trash                    1.5.0               \nsetuptools                    46.4.0.post20200518 \nsetuptools-git                1.2                 \nsimple-crypt                  4.1.7               \nsimplejson                    3.17.0              \nsix                           1.14.0              \nsklearn                       0.0                 \nsnowballstemmer               2.0.0               \nSphinx                        3.0.3               \nsphinxcontrib-applehelp       1.0.2               \nsphinxcontrib-devhelp         1.0.2               \nsphinxcontrib-htmlhelp        1.0.3               \nsphinxcontrib-jsmath          1.0.1               \nsphinxcontrib-qthelp          1.0.3               \nsphinxcontrib-serializinghtml 1.1.4               \nsphinxcontrib-websupport      1.1.0               \nspikecomparison               0.2.6               \nspikeextractors               0.8.4               \nspikefeatures                 0.1.0               \nspikeforest2                  0.1.0               /disk/scratch/mhennig/spikeinterface/spikeforest2\nspikeinterface                0.9.1               \nspikemetrics                  0.2.0               \nspikesorters                  0.3.2               \nspiketoolkit                  0.6.3               \nspikewidgets                  0.4.3               \nspyking-circus                0.9.7               \nstatsmodels                   0.11.1              \nterminado                     0.8.3               \ntestpath                      0.4.4               \nthreadpoolctl                 2.0.0               \ntornado                       6.0.4               \ntqdm                          4.46.0              \ntraitlets                     4.3.3               \ntridesclous                   1.6.0               \nUnidecode                     1.1.1               \nurllib3                       1.25.8              \nvdom                          0.6                 \nvenn                          0.1.3               \nwcwidth                       0.1.9               \nwebencodings                  0.5.1               \nwheel                         0.34.2              \nwidgetsnbextension            3.5.1               \nwrapt                         1.12.0              \nYapsy                         1.12.2              \nzipp                          3.1.0 \n```","files":null},{"type":6,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1596221966,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdElzc3VlQ29tbWVudEVkaXQ6Mzg5OTU3OTE3"},"target":"595fbc9297ea52212326c2f8f87af660f5ea7cf22568768b6a64a24146b1aa99","message":"Ok. Some unrelated packages here:\n\n\u003cdetails\u003e\n\u003csummary\u003econda\u003c/summary\u003e \n\n```\n# platform: linux-64\n@EXPLICIT\nhttps://repo.anaconda.com/pkgs/main/linux-64/_libgcc_mutex-0.1-main.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/blas-1.0-mkl.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/ca-certificates-2020.1.1-0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/intel-openmp-2020.1-217.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/libgfortran-ng-7.3.0-hdf63c60_0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/libstdcxx-ng-9.1.0-hdf63c60_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/mpi-1.0-mpich.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/libgcc-ng-9.1.0-hdf63c60_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/mkl-2020.1-217.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/expat-2.2.6-he6710b0_0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/gmp-6.1.2-h6c8ec71_1.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/icu-58.2-he6710b0_3.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/jpeg-9b-h024ee3a_2.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/libffi-3.3-he6710b0_1.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/libsodium-1.0.16-h1bed415_0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/libuuid-1.0.3-h1bed415_2.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/libxcb-1.13-h1bed415_1.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/lz4-c-1.8.1.2-h14c3975_0.conda\nhttps://conda.anaconda.org/conda-forge/linux-64/mpich-3.3.2-hc856adb_0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/ncurses-6.2-he6710b0_1.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/nodejs-10.13.0-he6710b0_0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/openssl-1.1.1g-h7b6447c_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/pcre-8.43-he6710b0_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/snappy-1.1.7-hbae5bb6_3.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/xz-5.2.5-h7b6447c_0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/yaml-0.1.7-had09818_2.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/zlib-1.2.11-h7b6447c_3.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/glib-2.63.1-h3eb4bd4_1.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/hdf5-1.10.4-hb1b8bf9_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/libedit-3.1.20181209-hc058e9b_0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/libpng-1.6.37-hbc83047_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/libxml2-2.9.9-hea5a465_1.conda\nhttps://conda.anaconda.org/flatiron/linux-64/mountainlab-0.15.0-0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/pandoc-2.2.3.2-0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/readline-7.0-h7b6447c_5.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/tk-8.6.8-hbc83047_0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/zeromq-4.3.1-he6710b0_3.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/zstd-1.3.7-h0b5b093_0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/blosc-1.16.3-hd408876_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/dbus-1.13.14-hb2f20db_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/freetype-2.9.1-h8a8886c_1.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/gstreamer-1.14.0-hb31296c_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/libtiff-4.1.0-h2733197_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/sqlite-3.31.1-h62c20be_1.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/fontconfig-2.13.0-h9420a91_0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/gst-plugins-base-1.14.0-hbbd80ab_1.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/python-3.7.2-h0371630_0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/alabaster-0.7.12-py37_0.conda\nhttps://repo.anaconda.com/pkgs/main/noarch/atomicwrites-1.4.0-py_0.conda\nhttps://repo.anaconda.com/pkgs/main/noarch/attrs-19.3.0-py_0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/backcall-0.1.0-py37_0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/certifi-2020.4.5.1-py37_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/chardet-3.0.4-py37_1003.conda\nhttps://repo.anaconda.com/pkgs/main/noarch/colorama-0.4.3-py_0.conda\nhttps://repo.anaconda.com/pkgs/main/noarch/decorator-4.4.2-py_0.conda\nhttps://repo.anaconda.com/pkgs/main/noarch/defusedxml-0.6.0-py_0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/docutils-0.16-py37_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/entrypoints-0.3-py37_0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/future-0.18.2-py37_0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/noarch/idna-2.9-py_1.conda\nhttps://repo.anaconda.com/pkgs/main/noarch/imagesize-1.2.0-py_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/ipython_genutils-0.2.0-py37_0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/kiwisolver-1.2.0-py37hfd86e86_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/markupsafe-1.1.1-py37h7b6447c_0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/mistune-0.8.4-py37h7b6447c_0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/noarch/more-itertools-8.3.0-py_0.conda\nhttps://conda.anaconda.org/conda-forge/linux-64/mpi4py-3.0.3-py37hcf07815_0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/olefile-0.46-py37_0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/pandocfilters-1.4.2-py37_1.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/noarch/parso-0.7.0-py_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/pickleshare-0.7.5-py37_0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/noarch/prometheus_client-0.7.1-py_0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/psutil-5.7.0-py37h7b6447c_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/ptyprocess-0.6.0-py37_0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/noarch/py-1.8.1-py_0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/noarch/pycparser-2.20-py_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/pymongo-3.9.0-py37he6710b0_0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/noarch/pyparsing-2.4.7-py_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/pysocks-1.7.1-py37_0.conda\nhttps://repo.anaconda.com/pkgs/main/noarch/pytz-2020.1-py_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/pyyaml-3.13-py37h14c3975_0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/pyzmq-18.1.1-py37he6710b0_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/qt-5.9.7-h5867ecd_1.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/noarch/qtpy-1.9.0-py_0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/send2trash-1.5.0-py37_0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/sip-4.19.8-py37hf484d3e_0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/six-1.14.0-py37_0.conda\nhttps://repo.anaconda.com/pkgs/main/noarch/snowballstemmer-2.0.0-py_0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/noarch/sphinxcontrib-applehelp-1.0.2-py_0.conda\nhttps://repo.anaconda.com/pkgs/main/noarch/sphinxcontrib-devhelp-1.0.2-py_0.conda\nhttps://repo.anaconda.com/pkgs/main/noarch/sphinxcontrib-htmlhelp-1.0.3-py_0.conda\nhttps://repo.anaconda.com/pkgs/main/noarch/sphinxcontrib-jsmath-1.0.1-py_0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/noarch/sphinxcontrib-qthelp-1.0.3-py_0.conda\nhttps://repo.anaconda.com/pkgs/main/noarch/sphinxcontrib-serializinghtml-1.1.4-py_0.conda\nhttps://repo.anaconda.com/pkgs/main/noarch/testpath-0.4.4-py_0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/tornado-6.0.4-py37h7b6447c_1.conda\nhttps://repo.anaconda.com/pkgs/main/noarch/tqdm-4.46.0-py_0.conda\nhttps://repo.anaconda.com/pkgs/main/noarch/wcwidth-0.1.9-py_0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/webencodings-0.5.1-py37_1.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/noarch/zipp-3.1.0-py_0.conda\nhttps://repo.anaconda.com/pkgs/main/noarch/babel-2.8.0-py_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/cffi-1.14.0-py37he30daa8_1.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/cycler-0.10.0-py37_0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/importlib-metadata-1.6.0-py37_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/jedi-0.17.0-py37_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/mkl-service-2.3.0-py37he904b0f_0.conda\nhttps://repo.anaconda.com/pkgs/main/noarch/packaging-20.3-py_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/pexpect-4.8.0-py37_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/pillow-7.1.2-py37hb39fc2d_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/pyqt-5.9.2-py37h05f1152_2.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/pyrsistent-0.16.0-py37h7b6447c_0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/noarch/python-dateutil-2.8.1-py_0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/setuptools-46.4.0-py37_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/terminado-0.8.3-py37_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/traitlets-4.3.3-py37_0.conda\nhttps://repo.anaconda.com/pkgs/main/noarch/bleach-3.1.4-py_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/cryptography-2.9.2-py37h1ba5d50_0.conda\nhttps://repo.anaconda.com/pkgs/main/noarch/importlib_metadata-1.6.0-0.conda\nhttps://repo.anaconda.com/pkgs/main/noarch/jinja2-2.11.2-py_0.conda\nhttps://repo.anaconda.com/pkgs/main/noarch/joblib-0.14.1-py_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/jupyter_core-4.6.3-py37_0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/noarch/networkx-2.4-py_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/nose-1.3.7-py37_2.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/numpy-base-1.18.1-py37hde5b4d6_1.conda\nhttps://repo.anaconda.com/pkgs/main/noarch/pygments-2.6.1-py_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/wheel-0.34.2-py37_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/jsonschema-3.2.0-py37_0.conda\nhttps://repo.anaconda.com/pkgs/main/noarch/jupyter_client-6.1.3-py_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/pip-20.0.2-py37_3.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/pluggy-0.13.1-py37_0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/noarch/prompt-toolkit-3.0.5-py_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/pyopenssl-19.1.0-py37_0.conda\nhttps://repo.anaconda.com/pkgs/main/noarch/nbformat-5.0.6-py_0.conda\nhttps://repo.anaconda.com/pkgs/main/noarch/prompt_toolkit-3.0.5-0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/pytest-5.0.1-py37_0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/urllib3-1.25.8-py37_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/ipython-7.13.0-py37h5ca1d4c_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/nbconvert-5.6.1-py37_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/requests-2.23.0-py37_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/ipykernel-5.1.4-py37h39e3cac_0.conda\nhttps://repo.anaconda.com/pkgs/main/noarch/sphinx-3.0.3-py_0.conda\nhttps://repo.anaconda.com/pkgs/main/noarch/jupyter_console-6.1.0-py_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/notebook-6.0.3-py37_0.conda\nhttps://repo.anaconda.com/pkgs/main/noarch/numpydoc-0.9.2-py_0.conda\nhttps://repo.anaconda.com/pkgs/main/noarch/qtconsole-4.7.4-py_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/widgetsnbextension-3.5.1-py37_0.conda\nhttps://repo.anaconda.com/pkgs/main/noarch/ipywidgets-7.5.1-py_0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/jupyter-1.0.0-py37_7.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/h5py-2.10.0-py37h7918eee_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/imageio-2.6.0-py37_0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/matplotlib-3.0.2-py37h5429711_0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/mkl_fft-1.0.15-py37ha843d7b_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/mkl_random-1.1.1-py37h0573a6f_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/numpy-1.18.1-py37h4f9e942_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/pandas-0.24.1-py37he6710b0_0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/python-blosc-1.7.0-py37h7b6447c_0.conda\nhttps://repo.anaconda.com/pkgs/main/linux-64/scipy-1.4.1-py37h0b6359f_0.conda\nhttps://conda.anaconda.org/jaikumarm/linux-64/hyperopt-0.1.2-py37h39e3cac_0.tar.bz2\nhttps://repo.anaconda.com/pkgs/main/linux-64/scikit-learn-0.22.1-py37hd81dba3_0.conda\nhttps://conda.anaconda.org/conda-forge/linux-64/hdbscan-0.8.24-py37hc1659b7_0.tar.bz2\nhttps://conda.anaconda.org/conda-forge/noarch/scikit-optimize-0.5.2-py_0.tar.bz2\n```\n\n\u003c/details\u003e\n\n\u003cdetails\u003e\n\u003csummary\u003eAnd pip:\u003c/summary\u003e\n\n```\nalabaster                     0.7.12              \nappdirs                       1.4.4               \natomicwrites                  1.4.0               \nattrs                         19.3.0              \nBabel                         2.8.0               \nbackcall                      0.1.0               \nbleach                        3.1.4               \nblessings                     1.7                 \nblinker                       1.4                 \nblosc                         1.8.1               \ncached-property               1.5.1               \ncertifi                       2020.4.5.1          \ncffi                          1.14.0              \nchardet                       3.0.4               \nci-info                       0.2.0               \nClick                         7.0                 \nclick-didyoumean              0.0.3               \ncloudpickle                   1.3.0               \ncolorama                      0.4.3               \ncryptography                  2.9.2               \ncycler                        0.10.0              \nCython                        0.29.6              \ndandi                         0.0.0               \ndecorator                     4.4.2               \ndefusedxml                    0.6.0               \nDeprecated                    1.2.7               \ndiskcache                     4.1.0               \ndocutils                      0.16                \ndoit                          0.32.0              \nelephant                      0.6.1               \nentrypoints                   0.3                 \net-xmlfile                    1.0.1               \netelemetry                    0.2.1               \nfasteners                     0.14.1              \nfuture                        0.18.2              \nghp-import2                   1.0.1               \ngirder-client                 3.1.0               \nh5py                          2.10.0              \nhdbscan                       0.8.24              \nhdmf                          1.6.4               \nherdingspikes                 0.3.7               \nhumanize                      2.5.0               \nhyperopt                      0.1.2               \nidna                          2.9                 \nimageio                       2.6.0               \nimagesize                     1.2.0               \nimportlib-metadata            1.6.0               \nipykernel                     5.1.4               \nipython                       7.13.0              \nipython-genutils              0.2.0               \nipywidgets                    7.5.1               \nisosplit5                     0.1.3               \njdcal                         1.4                 \njedi                          0.17.0              \njeepney                       0.4.3               \nJinja2                        2.11.2              \njoblib                        0.14.1              \njp-proxy-widget               1.0.0               \njsonschema                    3.2.0               \njupyter                       1.0.0               \njupyter-client                6.1.3               \njupyter-console               6.1.0               \njupyter-core                  4.6.3               \nkachery                       0.4.7               \nkbucket                       0.13.0              \nkeyring                       21.2.1              \nkeyrings.alt                  3.4.0               \nkiwisolver                    1.2.0               \nklusta                        3.0.16              \nklustakwik2                   0.2.7               \nllvmlite                      0.31.0              \nlxml                          4.5.0               \nMako                          1.1.2               \nMarkdown                      3.2.1               \nMarkupSafe                    1.1.1               \nmatplotlib                    3.0.2               \nmatplotlib-venn               0.11.5              \nMEArec                        1.4.1               \nMEAutility                    1.4.6               \nmistune                       0.8.4               \nmkl-fft                       1.0.15              \nmkl-random                    1.1.1               \nmkl-service                   2.3.0               \nml-ms4alg                     0.3.2               \nmonotonic                     1.5                 \nmore-itertools                8.3.0               \nmountainlab-pytools           0.7.3               \nmountaintools                 0.7.1               \nmpi4py                        3.0.3               \nnatsort                       7.0.1               \nnbconvert                     5.6.1               \nnbformat                      5.0.6               \nneo                           0.8.0               \nnetworkx                      2.4                 \nNikola                        8.0.4               \nnose                          1.3.7               \nnotebook                      6.0.3               \nnumba                         0.47.0              \nnumpy                         1.18.1              \nnumpydoc                      0.9.2               \nolefile                       0.46                \nopenpyxl                      2.6.1               \npackaging                     20.3                \npairio                        0.4.0               \npandas                        0.24.1              \npandocfilters                 1.4.2               \nparso                         0.7.0               \npatsy                         0.5.1               \npexpect                       4.8.0               \npickleshare                   0.7.5               \npiexif                        1.1.3               \nPillow                        7.1.2               \npip                           20.0.2              \npluggy                        0.13.1              \nprometheus-client             0.7.1               \nprompt-toolkit                3.0.5               \npsutil                        5.7.0               \nptyprocess                    0.6.0               \npy                            1.8.1               \npybind11                      2.2.4               \npycparser                     2.20                \npycrypto                      2.6.1               \npygit2                        1.2.1               \nPyGithub                      1.46                \npygithub3                     0.5.1               \nPygments                      2.6.1               \npyinotify                     0.9.6               \nPyJWT                         1.7.1               \npymongo                       3.10.1              \npynwb                         1.3.3               \npyOpenSSL                     19.1.0              \npyout                         0.5.1               \npyparsing                     2.4.7               \nPyQt5                         5.14.1              \nPyQt5-sip                     12.7.1              \npyqtgraph                     0.10.0              \npyrsistent                    0.16.0              \nPyRSS2Gen                     1.1                 \nPySocks                       1.7.1               \npytest                        5.0.1               \npython-dateutil               2.8.1               \npython-dotenv                 0.10.3              \npython-frontmatter            0.5.0               \npytools                       2020.1              \npytz                          2020.1              \nPyYAML                        3.13                \npyzmq                         18.1.1              \nqtconsole                     4.7.4               \nQtPy                          1.9.0               \nquantities                    0.12.3              \nrequests                      2.23.0              \nrequests-toolbelt             0.9.1               \nruamel.yaml                   0.16.10             \nruamel.yaml.clib              0.2.0               \nscikit-learn                  0.23.0              \nscikit-optimize               0.5.2               \nscipy                         1.4.1               \nseaborn                       0.9.0               \nSecretStorage                 3.1.2               \nsemantic-version              2.8.5               \nSend2Trash                    1.5.0               \nsetuptools                    46.4.0.post20200518 \nsetuptools-git                1.2                 \nsimple-crypt                  4.1.7               \nsimplejson                    3.17.0              \nsix                           1.14.0              \nsklearn                       0.0                 \nsnowballstemmer               2.0.0               \nSphinx                        3.0.3               \nsphinxcontrib-applehelp       1.0.2               \nsphinxcontrib-devhelp         1.0.2               \nsphinxcontrib-htmlhelp        1.0.3               \nsphinxcontrib-jsmath          1.0.1               \nsphinxcontrib-qthelp          1.0.3               \nsphinxcontrib-serializinghtml 1.1.4               \nsphinxcontrib-websupport      1.1.0               \nspikecomparison               0.2.6               \nspikeextractors               0.8.4               \nspikefeatures                 0.1.0               \nspikeforest2                  0.1.0               /disk/scratch/mhennig/spikeinterface/spikeforest2\nspikeinterface                0.9.1               \nspikemetrics                  0.2.0               \nspikesorters                  0.3.2               \nspiketoolkit                  0.6.3               \nspikewidgets                  0.4.3               \nspyking-circus                0.9.7               \nstatsmodels                   0.11.1              \nterminado                     0.8.3               \ntestpath                      0.4.4               \nthreadpoolctl                 2.0.0               \ntornado                       6.0.4               \ntqdm                          4.46.0              \ntraitlets                     4.3.3               \ntridesclous                   1.6.0               \nUnidecode                     1.1.1               \nurllib3                       1.25.8              \nvdom                          0.6                 \nvenn                          0.1.3               \nwcwidth                       0.1.9               \nwebencodings                  0.5.1               \nwheel                         0.34.2              \nwidgetsnbextension            3.5.1               \nwrapt                         1.12.0              \nYapsy                         1.12.2              \nzipp                          3.1.0 \n```\n\u003c/details\u003e","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1596224600,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY2NzMwMTY2OA==","github-url":"https://github.com/dandi/dandi-cli/issues/136#issuecomment-667301668"},"message":"thanks! edited your comment to make those collapsable.\nHint  for future - use html:\n\n```\n\u003cdetails\u003e\n\u003csummary\u003e\u003c/summary\u003e \n\n```shell\nHERE GOES LOTS OF TEXT\n```\n\u003c/details\u003e\n```","files":null},{"type":6,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1596224600,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdElzc3VlQ29tbWVudEVkaXQ6Mzg5OTY2NDEw"},"target":"aed584c276285440c886556b6f23fd2b6d20ebb3f05fafca618328800857f41d","message":"thanks! edited your comment to make those collapsable.\nHint  for future - use html:\n\n    \u003cdetails\u003e\n    \u003csummary\u003e\u003c/summary\u003e \n    \n    ```shell\n    HERE GOES LOTS OF TEXT\n    ```\n    \u003c/details\u003e","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1596224615,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY2NzMxOTM4OQ==","github-url":"https://github.com/dandi/dandi-cli/issues/136#issuecomment-667319389"},"message":"FWIW, I am sorry to report @mhhennig that you are too special! ;)  With network throttling, in a similar conda env (+ plain pip install of dandi from git, the same girder-client version verified) -- I see no initial retransmission.\nHaving said that, I think that the last error we have observed (`Expecting value: line 1 column 1 (char 0)`) is most likely our client code or pyout issue.  So if you run with `--devel-debug` and that `--pdb` -- if you crash similarly it means that our code , if not - that could have been pyout ;)  Are you running that reupload ATM? how is it going?","files":null}]}