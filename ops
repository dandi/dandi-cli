{"version":2,"ops":[{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1594244517,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY1NTc3Mjk1Ng==","github-url":"https://github.com/dandi/dandi-cli/issues/128#issuecomment-655772956"},"message":"possibly related fiasco during introducing locking:\n\n\u003cdetails\u003e\n\u003csummary\u003elocking (but not authorization) fails\u003c/summary\u003e \n\n```shell\n$\u003e DANDI_DEVEL=1 dandi upload -i local-docker --validation ignore sub-759711149/sub-759711149.nwb\n2020-07-08 17:39:56,523 [    INFO] Found 1 files to consider\nTraceback (most recent call last):\n  File \"/home/yoh/proj/dandi/dandi-cli/venvs/dev3/bin/dandi\", line 11, in \u003cmodule\u003e\n    load_entry_point('dandi', 'console_scripts', 'dandi')()\n  File \"/usr/lib/python3/dist-packages/click/core.py\", line 764, in __call__\n    return self.main(*args, **kwargs)\n  File \"/usr/lib/python3/dist-packages/click/core.py\", line 717, in main\n    rv = self.invoke(ctx)\n  File \"/usr/lib/python3/dist-packages/click/core.py\", line 1137, in invoke\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\n  File \"/usr/lib/python3/dist-packages/click/core.py\", line 956, in invoke\n    return ctx.invoke(self.callback, **ctx.params)\n  File \"/usr/lib/python3/dist-packages/click/core.py\", line 555, in invoke\n    return callback(*args, **kwargs)\n  File \"/home/yoh/proj/dandi/dandi-cli/dandi/cli/command.py\", line 118, in wrapper\n    return f(*args, **kwargs)\n  File \"/home/yoh/proj/dandi/dandi-cli/dandi/cli/cmd_upload.py\", line 582, in upload\n    with out, \\\n  File \"/usr/lib/python3.8/contextlib.py\", line 113, in __enter__\n    return next(self.gen)\n  File \"/home/yoh/proj/dandi/dandi-cli/dandi/girder.py\", line 446, in lock_dandiset\n    resp = self.post(f'dandi/{dandiset_identifier}/lock')\n  File \"/home/yoh/proj/dandi/dandi-cli/venvs/dev3/lib/python3.8/site-packages/girder_client/__init__.py\", line 494, in post\n    return self.sendRestRequest('POST', path, parameters, files=files,\n  File \"/home/yoh/proj/dandi/dandi-cli/venvs/dev3/lib/python3.8/site-packages/girder_client/__init__.py\", line 479, in sendRestRequest\n    raise HttpError(\ngirder_client.HttpError: HTTP error 401: POST http://localhost:8091/api/v1/dandi/000027/lock\nResponse text: {\"message\": \"You must be logged in.\", \"type\": \"access\"}\n\n```\n\u003c/details\u003e","files":null}]}