{"version":2,"ops":[{"type":6,"author":{"id":"83fae958856b684c15b81b726620f7b946f24143"},"timestamp":1645443920,"metadata":{"github-id":"UCE_lAHODBZtRc5ESdpNziowX2o"},"target":"b3ddf64fc3d2a30d3384cea37e124ab3c0ae237ac28b4534297d580b92328e1b","message":"Related to the recent merge: #841 There are two things that I would like to discuss:\n\n1. Currently to validate and upload video files we need to specify the option `allow-any-path`. Since we now explicitly organize video files with `dandi organise` I think we should not need this option as the user may be able to upload other unwanted files along with videos. Additionally, for this option to work the `DANDI_DEVEL` env variable needs to exist so any user would need to do: `DANDI_DEVEL=1 dandi validate --allow-any-path`. This is rather un-user-friendly for common users. \n2. Need to validate video files:\n- Currently we support the organization of `\".mp4\", \".avi\", \".wmv\", \".mov\", \".flv\"` formats. Validation could enforce these extensions. While this list of file containers are only a start, we will build a better list once things get rolling and we encounter different video formats used in animal experiments. \n- It is theoretically possible for acquisition systems to output corrupted videos: have dropped frames, no frames. Ideally its the users responsibility to correct this. This could be checked by opening the file using opencv within a `try/except` block. I am not sure if this happens often enough to make it a necessary check everytime.","files":null},{"type":6,"author":{"id":"83fae958856b684c15b81b726620f7b946f24143"},"timestamp":1645443957,"metadata":{"github-id":"UCE_lAHODBZtRc5ESdpNziowYOY"},"target":"b3ddf64fc3d2a30d3384cea37e124ab3c0ae237ac28b4534297d580b92328e1b","message":"Related to the recent merge: #841 There are two things that I would like to discuss:\n\n1. Currently to validate and upload video files we need to specify the option `allow-any-path`. Since we now explicitly organize video files with `dandi organise` I dont think this options is a good idea as the user may be able to upload other unwanted files along with videos. Additionally, for this option to work the `DANDI_DEVEL` env variable needs to exist so any user would need to do: `DANDI_DEVEL=1 dandi validate --allow-any-path`. This is rather un-user-friendly for common users. \n2. Need to validate video files:\n- Currently we support the organization of `\".mp4\", \".avi\", \".wmv\", \".mov\", \".flv\"` formats. Validation could enforce these extensions. While this list of file containers are only a start, we will build a better list once things get rolling and we encounter different video formats used in animal experiments. \n- It is theoretically possible for acquisition systems to output corrupted videos: have dropped frames, no frames. Ideally its the users responsibility to correct this. This could be checked by opening the file using opencv within a `try/except` block. I am not sure if this happens often enough to make it a necessary check everytime.","files":null},{"type":6,"author":{"id":"83fae958856b684c15b81b726620f7b946f24143"},"timestamp":1645444019,"metadata":{"github-id":"UCE_lAHODBZtRc5ESdpNziowY3I"},"target":"b3ddf64fc3d2a30d3384cea37e124ab3c0ae237ac28b4534297d580b92328e1b","message":"Related to the recent merge: #841 There are two things that I would like to discuss:\n\n1. Currently to validate and upload video files we need to specify the option `allow-any-path`. Since we now explicitly organize video files with `dandi organise` I dont think this options is a good idea as the user may be able to upload other unwanted files along with videos. Additionally, for this option to work the `DANDI_DEVEL` env variable needs to exist so any user would need to do: `DANDI_DEVEL=1 dandi validate --allow-any-path`. This is rather un-user-friendly for common users. \n2. Need to validate video files:\n- Currently we support the organization of `\".mp4\", \".avi\", \".wmv\", \".mov\", \".flv\"` formats. Validation could enforce these extensions. While this list of file containers are only a start, we will build a better list once things get rolling and we encounter different video formats used in animal experiments. \n- It is theoretically possible for acquisition systems to output corrupted videos: have dropped frames, no frames. Ideally its the users responsibility to correct this so may not be something for DANDI to worry about. These errors could be checked by opening the file using opencv within a `try/except` block. I am not sure if this happens often enough to make it a necessary check everytime.","files":null},{"type":6,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1645493861,"metadata":{"github-id":"UCE_lAHODBZtRc5ESdpNzio4M6o"},"target":"b3ddf64fc3d2a30d3384cea37e124ab3c0ae237ac28b4534297d580b92328e1b","message":"Related to the recent merge: #841 There are two things that I would like to discuss:\n\n1. Currently to validate and upload video files we need to specify the option `allow-any-path`. Since we now explicitly organize video files with `dandi organise` I dont think this options is a good idea as the user may be able to upload other unwanted files along with videos. Additionally, for this option to work the `DANDI_DEVEL` env variable needs to exist so any user would need to do: `DANDI_DEVEL=1 dandi validate --allow-any-path`. This is rather un-user-friendly for common users. (edit by @yarikoptic  - dedicated https://github.com/dandi/dandi-cli/issues/920 )\n2. Need to validate video files:\n- Currently we support the organization of `\".mp4\", \".avi\", \".wmv\", \".mov\", \".flv\"` formats. Validation could enforce these extensions. While this list of file containers are only a start, we will build a better list once things get rolling and we encounter different video formats used in animal experiments. \n- It is theoretically possible for acquisition systems to output corrupted videos: have dropped frames, no frames. Ideally its the users responsibility to correct this so may not be something for DANDI to worry about. These errors could be checked by opening the file using opencv within a `try/except` block. I am not sure if this happens often enough to make it a necessary check everytime.","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1645496999,"metadata":{"github-id":"IC_kwDODBZtRc4-bY4V","github-url":"https://github.com/dandi/dandi-cli/issues/918#issuecomment-1047367189"},"message":"re validation \n- ATM I think we just ignore files with unknown extensions, we might need to adjust what we do. Filed https://github.com/dandi/dandi-cli/issues/921 so we elaborate\n- we would need to familiarize with opencv on what it depends on for opening video files. If that is some external libraries, then situation might vary widely across systems/installations thus making such validation \"fragile\".","files":null}]}