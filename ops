{"version":2,"ops":[{"type":1,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1657324431,"metadata":{"github-id":"I_kwDODBZtRc5NdRRL","github-url":"https://github.com/dandi/dandi-cli/issues/1055","origin":"github"},"title":"BIDS: does not upload anything BIDS if not explicitly specifying and --allow-any-path","message":"I thought that #1011 should have made it magically happened to use our `dandi.utils.find_files` (while excluding VCS) if bids dataset is detected, or may be just \"valid bids\" paths... \n\n\u003cdetails\u003e\n\u003csummary\u003ebut nothing like that happens -- nothing gets uploaded unless I explicitly use --allow-any-paths in DANDI_DEVEL=1 mode:\u003c/summary\u003e \n\n```shell\n(git)lena:~/proj/bids/bids-examples[master]ds210\n$\u003e dandi upload -i dandi-staging       \n2022-07-08 19:52:39,208 [ WARNING] BIDSVersion 1.0.2 is less than the minimal working 1.7.0+012+dandi001. Falling back to 1.7.0+012+dandi001. To force the usage of earlier versions specify them explicitly when calling the validator.\n2022-07-08 19:52:39,924 [   ERROR] The `.*?/README$` regex pattern file required by BIDS was not found.\n2022-07-08 19:52:39,925 [   ERROR] The `.*?/CHANGES$` regex pattern file required by BIDS was not found.\n2022-07-08 19:52:39,925 [ WARNING] The `/home/yoh/proj/bids/bids-examples/ds210/task-cuedSGT_echo-1_bold.json` file was not matched by any regex schema entry.\n2022-07-08 19:52:39,925 [ WARNING] The `/home/yoh/proj/bids/bids-examples/ds210/task-cuedSGT_echo-2_bold.json` file was not matched by any regex schema entry.\n2022-07-08 19:52:39,925 [ WARNING] The `/home/yoh/proj/bids/bids-examples/ds210/task-cuedSGT_echo-3_bold.json` file was not matched by any regex schema entry.\n2022-07-08 19:52:39,925 [ WARNING] The `/home/yoh/proj/bids/bids-examples/ds210/task-rest_echo-1_bold.json` file was not matched by any regex schema entry.\n2022-07-08 19:52:39,925 [ WARNING] The `/home/yoh/proj/bids/bids-examples/ds210/task-rest_echo-2_bold.json` file was not matched by any regex schema entry.\n2022-07-08 19:52:39,925 [ WARNING] The `/home/yoh/proj/bids/bids-examples/ds210/task-rest_echo-3_bold.json` file was not matched by any regex schema entry.\n2022-07-08 19:52:40,494 [    INFO] Found 1 files to consider\nPATH                 SIZE    ERRORS UPLOAD STATUS    MESSAGE                  \ndandiset.yaml        1.1 kB                skipped   should be edited online  \nSummary:             1.1 kB                1 skipped 1 should be edited online\n2022-07-08 19:52:40,603 [    INFO] Logs saved in /home/yoh/.cache/dandi-cli/log/20220708235237Z-501498.log\nchanges on filesystem: 226 changes                                                                                                                                                                                   \n(dev3) 1 36354.....................................:Fri 08 Jul 2022 07:52:40 PM EDT:.\n(git)lena:~/proj/bids/bids-examples[master]ds210\n$\u003e dandi upload -i dandi-staging sub-02\n2022-07-08 19:52:46,570 [ WARNING] BIDSVersion 1.0.2 is less than the minimal working 1.7.0+012+dandi001. Falling back to 1.7.0+012+dandi001. To force the usage of earlier versions specify them explicitly when calling the validator.\n2022-07-08 19:52:47,312 [   ERROR] The `.*?/README$` regex pattern file required by BIDS was not found.\n2022-07-08 19:52:47,313 [   ERROR] The `.*?/CHANGES$` regex pattern file required by BIDS was not found.\n2022-07-08 19:52:47,313 [ WARNING] The `/home/yoh/proj/bids/bids-examples/ds210/task-cuedSGT_echo-1_bold.json` file was not matched by any regex schema entry.\n2022-07-08 19:52:47,313 [ WARNING] The `/home/yoh/proj/bids/bids-examples/ds210/task-cuedSGT_echo-2_bold.json` file was not matched by any regex schema entry.\n2022-07-08 19:52:47,313 [ WARNING] The `/home/yoh/proj/bids/bids-examples/ds210/task-cuedSGT_echo-3_bold.json` file was not matched by any regex schema entry.\n2022-07-08 19:52:47,313 [ WARNING] The `/home/yoh/proj/bids/bids-examples/ds210/task-rest_echo-1_bold.json` file was not matched by any regex schema entry.\n2022-07-08 19:52:47,313 [ WARNING] The `/home/yoh/proj/bids/bids-examples/ds210/task-rest_echo-2_bold.json` file was not matched by any regex schema entry.\n2022-07-08 19:52:47,313 [ WARNING] The `/home/yoh/proj/bids/bids-examples/ds210/task-rest_echo-3_bold.json` file was not matched by any regex schema entry.\n2022-07-08 19:52:47,830 [    INFO] Found 0 files to consider\n2022-07-08 19:52:47,834 [    INFO] Logs saved in /home/yoh/.cache/dandi-cli/log/20220708235244Z-501606.log\nchanges on filesystem: 226 changes                                                                                                                                                                                   \n(dev3) 1 36355.....................................:Fri 08 Jul 2022 07:52:48 PM EDT:.\n(git)lena:~/proj/bids/bids-examples[master]ds210\n$\u003e DANDI_DEVEL=1 dandi upload -i dandi-staging --allow-any-path sub-02\n2022-07-08 19:52:58,673 [ WARNING] BIDSVersion 1.0.2 is less than the minimal working 1.7.0+012+dandi001. Falling back to 1.7.0+012+dandi001. To force the usage of earlier versions specify them explicitly when calling the validator.\n2022-07-08 19:52:59,423 [   ERROR] The `.*?/README$` regex pattern file required by BIDS was not found.\n2022-07-08 19:52:59,424 [   ERROR] The `.*?/CHANGES$` regex pattern file required by BIDS was not found.\n2022-07-08 19:52:59,424 [ WARNING] The `/home/yoh/proj/bids/bids-examples/ds210/task-cuedSGT_echo-1_bold.json` file was not matched by any regex schema entry.\n2022-07-08 19:52:59,424 [ WARNING] The `/home/yoh/proj/bids/bids-examples/ds210/task-cuedSGT_echo-2_bold.json` file was not matched by any regex schema entry.\n2022-07-08 19:52:59,424 [ WARNING] The `/home/yoh/proj/bids/bids-examples/ds210/task-cuedSGT_echo-3_bold.json` file was not matched by any regex schema entry.\n2022-07-08 19:52:59,424 [ WARNING] The `/home/yoh/proj/bids/bids-examples/ds210/task-rest_echo-1_bold.json` file was not matched by any regex schema entry.\n2022-07-08 19:52:59,424 [ WARNING] The `/home/yoh/proj/bids/bids-examples/ds210/task-rest_echo-2_bold.json` file was not matched by any regex schema entry.\n2022-07-08 19:52:59,424 [ WARNING] The `/home/yoh/proj/bids/bids-examples/ds210/task-rest_echo-3_bold.json` file was not matched by any regex schema entry.\n2022-07-08 19:53:00,099 [    INFO] Found 20 files to consider\nPATH                                                      SIZE      ERRORS UPLOAD STATUS                MESSAGE\nsub-02/func/sub-02_task-cuedSGT_run-01_echo-1_bold.nii.gz 60 Bytes    0           initiating upload            \nsub-02/func/sub-02_task-cuedSGT_run-01_echo-2_bold.nii.gz 60 Bytes    0           initiating upload            \nsub-02/func/sub-02_task-cuedSGT_run-01_echo-3_bold.nii.gz 60 Bytes    0           initiating upload            \nsub-02/func/sub-02_task-cuedSGT_run-01_physio.tsv.gz      96.0 kB     0           initiating upload            \nsub-02/func/sub-02_task-cuedSGT_run-02_echo-1_bold.nii.gz 60 Bytes    0           initiating upload            \nsub-02/func/sub-02_task-cuedSGT_run-02_echo-2_bold.nii.gz                                                      \n\n```\n\u003c/details\u003e","files":null}]}