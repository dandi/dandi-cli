{"version":2,"ops":[{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1596765926,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY3MDI4MDQ5MQ==","github-url":"https://github.com/dandi/dandi-cli/issues/172#issuecomment-670280491"},"message":"I also wondered if that fixture record should just populate all the desired fields for the services or just at least include `\"intance\"` key to avoid use of the current known_instances mapping from consts:\n\n```\ndandi/tests/test_register.py:from ..consts import dandiset_identifier_regex, known_instances, dandiset_metadata_file\ndandi/tests/test_register.py:    dandi_instance = known_instances[\"local-docker-tests\"]\ndandi/tests/test_register.py:    dandi_instance = known_instances[\"local-docker-tests\"]\ndandi/tests/test_upload.py:from ..consts import collection_drafts, dandiset_metadata_file, known_instances\ndandi/tests/test_upload.py:        known_instances[dandi_instance],\ndandi/tests/test_upload.py:    client = girder.get_client(known_instances[dandi_instance].girder)\ndandi/tests/test_upload.py:        known_instances[dandi_instance],\n```","files":null},{"type":3,"author":{"id":"364914f8b1c8a9131d300bf2978e4ffe2ff1aeeb"},"timestamp":1596809330,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY3MDUzNTg0MQ==","github-url":"https://github.com/dandi/dandi-cli/issues/172#issuecomment-670535841"},"message":"@yarikoptic I'm not clear on what you're suggesting in your second post.  Are you saying the return value of `local_docker_compose` should include a `dandi_instance` instance?  If that change were made, would there be any need to keep the \"local-docker-tests\" entry in `known_instances`?","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1596814933,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY3MDU3OTkzOA==","github-url":"https://github.com/dandi/dandi-cli/issues/172#issuecomment-670579938"},"message":"\u003e Are you saying the return value of `local_docker_compose` should include a `dandi_instance` instance?\n\nyes, either as an `instance` key  or may be even making entire returned value into another named tuple based on `dandi_instance` keys + `api_key`.  Then underlying code could just use `local_docker_compose.girder` etc directly without needing to jump through `local_docker_compose[\"instance\"].girder`?\n\n\u003e If that change were made, would there be any need to keep the \"local-docker-tests\" entry in known_instances?\n\nI think it would be beneficial for \"centralized knowledge\" about possible instances... e.g. may be while debugging some tests we might want to run some commands (like `upload`) manually from the cmdline, so should be able to specify that instance on command line.  Fixture BTW should just use information from `consts` instead of hardcoding/duplicating `\"http://localhost:8081/api/\"` url.","files":null},{"type":4,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1596832731,"metadata":{"github-id":"MDExOkNsb3NlZEV2ZW50MzYzNDY5NDYzNg=="},"status":2}]}