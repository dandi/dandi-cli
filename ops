{"version":2,"ops":[{"type":1,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1645496983,"metadata":{"github-id":"I_kwDODBZtRc5EVHMF","github-url":"https://github.com/dandi/dandi-cli/issues/921","origin":"github"},"title":"validate should stop skipping/ignoring files","message":"ATM validate considers only .nwb files so it is peacefully ignores other unknown extensions:\n```shell\n$\u003e dandi validate /tmp/testds            \nSummary: No validation errors among 0 file(s)\n2022-02-21 20:41:20,064 [    INFO] Logs saved in /home/yoh/.cache/dandi-cli/log/20220222014117Z-207803.log\n\n$\u003e ls -l /tmp/testds\ntotal 16\nlrwxrwxrwx 1 yoh yoh 108 Feb 18 15:22 1.unlocked -\u003e .git/annex/objects/62/QQ/MD5E-s2--e2c942abe10bccd8b392aaf4d7f9832f/MD5E-s2--e2c942abe10bccd8b392aaf4d7f9832f\n-rw------- 1 yoh yoh  20 Feb 18 14:56 123\nlrwxrwxrwx 1 yoh yoh 108 Feb 18 14:50 124 -\u003e .git/annex/objects/6G/wQ/MD5E-s4--df8b712c4fe20a0df933819665770165/MD5E-s4--df8b712c4fe20a0df933819665770165\n-rw------- 1 yoh yoh  88 Feb 18 14:27 fs.log\n```\n`validate` operation should get refactored to support \"multiple levels\" of validation:\n\n1. files validation: what we have now for .nwb files, but possibly add rudimentary support for others, e.g. video files (#918), basic .json/.yaml/.tsv format/consistency validation (that we can load them alright and there is no syntax etc errors)\n2. dataset(s) validation:\n  - `dandiset.yaml` must be present at the path - it defines the top level of the dandiset\n  - need to validate `dandiset.yaml` to pass dandischema validation\n  - then two possible scenarios for \"layout\", depending on either we detect the dataset also be or contain BIDS dataset (has some `dataset_description.json` and it is a BIDS dataset (like https://gui.dandiarchive.org/#/dandiset/000108/draft/files?location=) or a \"collection\" of BIDS datasets and derivatives + rawdata (like https://gui.dandiarchive.org/#/dandiset/000026/draft/files?location=) )\n    -  DANDI convention: all other assets (files) in that dandiset should follow our DANDI files naming convention (`sub-\u003csubject\u003e/sub-\u003csubject\u003e_ses-{session}[_entity-{value}]*_suffixes.{extensions}`)\n    - BIDS: we apply BIDS validator to those (sub)folders which have dataset_description.json (relevant work #896)\n  \nquestion in above \"dataset(s) validation\" on what to do to collections containing BIDS datasets, like https://gui.dandiarchive.org/#/dandiset/000026/draft/files?location= and which just follow BIDS recommendation (https://bids-specification.readthedocs.io/en/stable/02-common-principles.html#source-vs-raw-vs-derived-data)  -- we might want to \"DANDI-standardize\" that convention as well to reduce arbitrary layouts (like https://github.com/dandisets/000052/tree/draft/dataset ). WDYT @satra on this and above?","files":null}]}