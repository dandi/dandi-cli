{"version":2,"ops":[{"type":5,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1721325674,"metadata":{"github-id":"LE_lADODBZtRc6QEQCAzwAAAAMoRGea"},"added":["cmd-download"],"removed":[]},{"type":5,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1721325681,"metadata":{"github-id":"LE_lADODBZtRc6QEQCAzwAAAAMoRGwC"},"added":["UX"],"removed":[]},{"type":3,"author":{"id":"364914f8b1c8a9131d300bf2978e4ffe2ff1aeeb"},"timestamp":1721328779,"metadata":{"github-id":"IC_kwDODBZtRc6FWtFz","github-url":"https://github.com/dandi/dandi-cli/issues/1460#issuecomment-2237321587"},"message":"@yarikoptic Why should this option cause `dandiset.yaml` to be downloaded as well?  Downloading an individual asset currently doesn't do that.","files":null},{"type":3,"author":{"id":"364914f8b1c8a9131d300bf2978e4ffe2ff1aeeb"},"timestamp":1721334201,"metadata":{"github-id":"IC_kwDODBZtRc6FXXt-","github-url":"https://github.com/dandi/dandi-cli/issues/1460#issuecomment-2237496190"},"message":"@yarikoptic Also, why should the download path start with `{dandiset_id}/`?  Downloads of other asset URL types (globs \u0026 folders) don't have that.","files":null},{"type":3,"author":{"id":"364914f8b1c8a9131d300bf2978e4ffe2ff1aeeb"},"timestamp":1721335297,"metadata":{"github-id":"IC_kwDODBZtRc6FXiGq","github-url":"https://github.com/dandi/dandi-cli/issues/1460#issuecomment-2237538730"},"message":"@yarikoptic Also, should this option have a similar effect on downloads of multi-asset URLs?  For example, currently, downloading just a `foo/bar/baz/` directory will save everything under `baz/`.","files":null},{"type":6,"author":{"id":"364914f8b1c8a9131d300bf2978e4ffe2ff1aeeb"},"timestamp":1721335321,"metadata":{"github-id":"UCE_lALODBZtRc6FXiGqzksz06Q"},"target":"d43d751ab1ff9fd73fe7c4ba9e8d0a72faef32b74138cfe738e072b9940b543f","message":"@yarikoptic Also, should this option have a similar effect on downloads of multi-asset URLs?  For example, currently, downloading just a `foo/bar/baz/` directory will save everything under `baz/`, where this option could be used to instead save things under `foo/bar/baz/`.","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1721335859,"metadata":{"github-id":"IC_kwDODBZtRc6FXliD","github-url":"https://github.com/dandi/dandi-cli/issues/1460#issuecomment-2237552771"},"message":"\u003e @yarikoptic Why should this option cause `dandiset.yaml` to be downloaded as well? Downloading an individual asset currently doesn't do that.\n\nwhy: convenience. That is why I wondered if it should be a new mode `dandiset.yaml+asset` or alike.  So it is not really for lower level code, just top level convenience. \n\n\u003e @yarikoptic Also, why should the download path start with `{dandiset_id}/`? Downloads of other asset URL types (globs \u0026 folders) don't have that.\n\nagain: convenience, abd because `dandiset.yaml+asset` -- we do create `{dandiset_id}/` when `--download dandiset.yaml`.\n\n\u003e @yarikoptic Also, should this option have a similar effect on downloads of multi-asset URLs?\n\nyes\n\n\u003e For example, currently, downloading just a `foo/bar/baz/` directory will save everything under `baz/`, where this option could be used to instead save things under `foo/bar/baz/`.\n\ncorrect, we want to retain all leading paths.  In case of multiple URLs, possibly multiple different folders, or even `{dandiset_id}/` leading directories if we are not under a dandiset already.","files":null},{"type":3,"author":{"id":"d8203afd43c9e0a9d07c45dd62b58a81d53a2ebe"},"timestamp":1721339224,"metadata":{"github-id":"IC_kwDODBZtRc6FYEAZ","github-url":"https://github.com/dandi/dandi-cli/issues/1460#issuecomment-2237677593"},"message":"Thank you @yarikoptic and @jwodder.  All of the options you describe above will be very helpful.  I have needed this and several users have requested this feature.","files":null},{"type":3,"author":{"id":"364914f8b1c8a9131d300bf2978e4ffe2ff1aeeb"},"timestamp":1721391304,"metadata":{"github-id":"IC_kwDODBZtRc6FdKC0","github-url":"https://github.com/dandi/dandi-cli/issues/1460#issuecomment-2239013044"},"message":"@yarikoptic Rather than adding a `dandiset.yaml+asset` mode, wouldn't it make more sense to change the `all` mode to have this new behavior and reserve the old behavior for just `asset` mode?  I realize this is a breaking change, but semver lets us do that for 0.x.0 releases.","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1721591885,"metadata":{"github-id":"IC_kwDODBZtRc6Fnn7Y","github-url":"https://github.com/dandi/dandi-cli/issues/1460#issuecomment-2241756888"},"message":"\u003e wouldn't it make more sense to change the `all` mode to have this new behavior\n\nI think current behavior is ok for `all`, as if you specify just a URL to a file it is IMHO more reasonable to just store that file without leading paths etc, and overall it does not impose much of checks/assumptions.  The `dandiset.yaml+asset` mode would be non-default convenience to facilitate uses cases to modify (download/reupload) the file(s).","files":null},{"type":3,"author":{"id":"364914f8b1c8a9131d300bf2978e4ffe2ff1aeeb"},"timestamp":1721651626,"metadata":{"github-id":"IC_kwDODBZtRc6FryRE","github-url":"https://github.com/dandi/dandi-cli/issues/1460#issuecomment-2242847812"},"message":"@yarikoptic New suggestion: We implement this as a new `--download` mode, but call it \"structure\" or similar (as it preserves the directory structure and, by downloading `dandiset.yaml`, the Dandiset structure) instead of the confusing \u0026 unwieldy \"`dandiset.yaml+asset`.\"","files":null},{"type":3,"author":{"id":"d8203afd43c9e0a9d07c45dd62b58a81d53a2ebe"},"timestamp":1721711031,"metadata":{"github-id":"IC_kwDODBZtRc6FxK4e","github-url":"https://github.com/dandi/dandi-cli/issues/1460#issuecomment-2244259358"},"message":"\u003e @yarikoptic New suggestion: We implement this as a new `--download` mode, but call it \"structure\" or similar (as it preserves the directory structure and, by downloading `dandiset.yaml`, the Dandiset structure) instead of the confusing \u0026 unwieldy \"`dandiset.yaml+asset`.\"\n\nThanks @jwodder @yarikoptic.  I like this idea, and think that the `--download` mode of `structure` or `tree` would be intuitive.\n\nBased on the discussion in https://github.com/dandi/dandi-cli/issues/1464, we may also need to include the `dataset_description.json` file to handle the above use case of download/edit/reupload.","files":null},{"type":3,"author":{"id":"d8203afd43c9e0a9d07c45dd62b58a81d53a2ebe"},"timestamp":1721711349,"metadata":{"github-id":"IC_kwDODBZtRc6FxMAf","github-url":"https://github.com/dandi/dandi-cli/issues/1460#issuecomment-2244263967"},"message":"cc @aaronkanzer @dstansby @balbasty\n\nThe team is working to replicate the partial file tree hierarchy upon download to handle the use case of editing existing files.","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1721749716,"metadata":{"github-id":"IC_kwDODBZtRc6F2Vkh","github-url":"https://github.com/dandi/dandi-cli/issues/1460#issuecomment-2245613857"},"message":"\u003e @yarikoptic New suggestion: We implement this as a new `--download` mode, but call it \"structure\" or similar (as it preserves the directory structure and, by downloading `dandiset.yaml`, the Dandiset structure) instead of the confusing \u0026 unwieldy \"`dandiset.yaml+asset`.\"\n\nI am ok with an alternative name. Nothing better than \"structure\" comes to mind ATM -- would be easy to change during PR review if some better choice strikes someone.","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1721749849,"metadata":{"github-id":"IC_kwDODBZtRc6F2WxL","github-url":"https://github.com/dandi/dandi-cli/issues/1460#issuecomment-2245618763"},"message":"\u003e Based on the discussion in dandi/dandi-archive#1464, we may also need to include the `dataset_description.json` file to handle the above use case of download/edit/reupload.\n\nFor this one I think we might want first to consider some alternatives, e.g. explicit `--dataset-layout auto,bids,dandi` option or something like that. `dandiset.yaml` is needed to deduce root of the dandiset and its `id`.","files":null},{"type":4,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1721848036,"metadata":{"github-id":"CE_lADODBZtRc6QEQCAzwAAAAMsuPyK"},"status":2},{"type":3,"author":{"id":"7a8552494914d3e4116f4b434eb4812a914ca405"},"timestamp":1723085802,"metadata":{"github-id":"IC_kwDODBZtRc6Hl5Oz","github-url":"https://github.com/dandi/dandi-cli/issues/1460#issuecomment-2274857907"},"message":"\u003c!-- GITHUB_RELEASE COMMENT: released --\u003e\n:rocket: Issue was released in [`0.63.0`](https://github.com/dandi/dandi-cli/releases/tag/0.63.0) :rocket:","files":null},{"type":5,"author":{"id":"7a8552494914d3e4116f4b434eb4812a914ca405"},"timestamp":1723085803,"metadata":{"github-id":"LE_lADODBZtRc6QEQCAzwAAAAM2kZVy"},"added":["released"],"removed":[]}]}