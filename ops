{"version":2,"ops":[{"type":3,"author":{"id":"12cb25e6e3f19b53447b05d00d7d4d53c925c908"},"timestamp":1584109202,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDU5ODc0MzM5Mw==","github-url":"https://github.com/dandi/dandi-cli/issues/47#issuecomment-598743393"},"message":"to start with i would keep it simple. the `source` contains all data you want to re-organize. the `target` is the organized output. (almost like rsync with delete option). i think this is conceptually easier for people to comprehend.  i.e. their `source` is the master. (think analogous to heudiconv).\n\nso `target` is simply a view of the `source`.\n\ni do like the consideration of `complete/incremental`  but i think `incremental` has many possibilities and it would require other types of assessments to make work properly.","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1584110109,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDU5ODc1MDI5Mw==","github-url":"https://github.com/dandi/dandi-cli/issues/47#issuecomment-598750293"},"message":"NB `--mode` was a bad choice ATM since I used `--mode` to instruct the mode of files handling -- i.e. move, symlink, etc. Will rename into `-f|--files-mode`.\n\n\u003e to start with i would keep it simple. the `source` contains all data you want to re-organize. the `target` is the organized output. (almost like rsync with delete option). i think this is conceptually easier for people to comprehend. i.e. their `source` is the master. (think analogous to heudiconv).\n\u003e \n\u003e so `target` is simply a view of the `source`.\n\nso that would be the default (complete) mode of `--mode=complete|incremental`. ATM it is behaving as `incremental` (no care is taken about wiping things out).  With `complete` and `move` and/or `copy`  or `hardlink` to provide \"efficient\" complete mode of operation, would need to introduce some way to check that files are the same to avoid unnecessary transfer.  In `simulate` mode, since it is cheap, I demand target directory to not exist (so no data gets overwritten etc).","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1586212864,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDYxMDA3NDE2NA==","github-url":"https://github.com/dandi/dandi-cli/issues/47#issuecomment-610074164"},"message":"I guess, in addition to proper \"incremental\" (where I point to e.g. a single additional file to be 'organized') the most user-friendly way would be similar to what we should aim for upload/download - a `sync` mode: given a path to full collection of data files, `organize` would announce what actions to be done if any existing file needs to be removed or renamed, and possibly even ask for a confirmation.\n\nThen we could have consistent user interface for all 3 possible data locations:\n- disorganized local\n- organized local\n- remote on dandiarchive\n\nand by consistent I mean\n\n- similar feedback to the user about ongoing operations (#48)\n- similar prompts/questions if operation is to replace, rename, or remove existing files at the target location","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1586212991,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDYxMDA3NDg4Ng==","github-url":"https://github.com/dandi/dandi-cli/issues/47#issuecomment-610074886"},"message":"as for \"incremental\", if we allow for some options (e.g. either to minimize filenames or even use some alternative set of keys), we would need to store them in target dandiset somewhere so subsequent invocation .  At some point I suggested to store them directly within `dandiset.yaml`, but we might need to just come up with `.dandi/config` or alike.","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1591051222,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDYzNzE2Mjk0NQ==","github-url":"https://github.com/dandi/dandi-cli/issues/47#issuecomment-637162945"},"message":"Another additional behavior which would lead to relatively smooth user experience I think could be implemented via `organize` for incremental additions - consider all existing in the target location files as well.  With currently implemented already caching of loading metadata it should not effect performance that gravely, but would ensure consistent metadata in `dandiset.yaml` (if all other subjects are present).  It would make disambiguation informed by existing in the dandiset files as well.","files":null}]}