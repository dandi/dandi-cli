{"version":2,"ops":[{"type":1,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1626894469,"metadata":{"github-id":"MDU6SXNzdWU5NTAwMjYzNzI=","github-url":"https://github.com/dandi/dandi-cli/issues/722","origin":"github"},"title":"upload should fail if client uses outdated schema","message":"I was blindly sure that we consult API about the version of the schema it expects, but apparently I was wrong since I cannot find any trace of that!?\n\n`/info` endpoint, e.g. https://api-staging.dandiarchive.org/api/info/?format=json provides `schema_version`. `dandi-cli` should not even attempt upload if the schema version it uses doesn't match exactly ATM (I would prefer allowing for higher .patch being allowed, but I think neither dandischema nor dandi-api support that ATM, ref: e.g. https://github.com/dandi/dandischema/issues/22  )\n\nI think absence of such prevention mechanism is what resulted in e.g. #719","files":null}]}