{"version":2,"ops":[{"type":3,"author":{"id":"0ab0e40999605aa8d5ec6be68372511fdc4a2fdf"},"timestamp":1650266712,"metadata":{"github-id":"IC_kwDODBZtRc5BophD","github-url":"https://github.com/dandi/dandi-cli/issues/950#issuecomment-1101174851"},"message":"Solved in https://github.com/dandi/dandi-cli/pull/955/commits/5fc7b0652e8eb9a998e12e84f7273e12e062f21e other than not presenting a warning. Not sure what sort of warning would be appropriate...\n\nAs for version comparison Python referencing of the ASCII table has us covered:\n\n```python\n\u003e\u003e\u003e \"1.7.0\"\u003c\"1.7.0+012\"\nTrue\n\u003e\u003e\u003e \"1.7.0+011\"\u003c\"1.7.0+012\"\nTrue\n\u003e\u003e\u003e \"1.7.0+013\"\u003c\"1.7.0+012\"\nFalse\n```\n\nAFAICT the only surprises that this could cause are due to the fact that ASCII lists uppercase before lowercase, so:\n\n```python\n\u003e\u003e\u003e \"1.7.0+012+DANDI002\"\u003c\"1.7.0+012+dandi001\"\nTrue\n```","files":null},{"type":6,"author":{"id":"0ab0e40999605aa8d5ec6be68372511fdc4a2fdf"},"timestamp":1650266724,"metadata":{"github-id":"UCE_lALODBZtRc5BophDziKIvqY"},"target":"3cc91ffc083d2948af3c246c10349cebc144b54ecc9ba941ebaa3a4e4a52b627","message":"Solved in https://github.com/dandi/dandi-cli/pull/955/commits/5fc7b0652e8eb9a998e12e84f7273e12e062f21e other than presenting a warning. Not sure what sort of warning would be appropriate...\n\nAs for version comparison Python referencing of the ASCII table has us covered:\n\n```python\n\u003e\u003e\u003e \"1.7.0\"\u003c\"1.7.0+012\"\nTrue\n\u003e\u003e\u003e \"1.7.0+011\"\u003c\"1.7.0+012\"\nTrue\n\u003e\u003e\u003e \"1.7.0+013\"\u003c\"1.7.0+012\"\nFalse\n```\n\nAFAICT the only surprises that this could cause are due to the fact that ASCII lists uppercase before lowercase, so:\n\n```python\n\u003e\u003e\u003e \"1.7.0+012+DANDI002\"\u003c\"1.7.0+012+dandi001\"\nTrue\n```","files":null},{"type":6,"author":{"id":"0ab0e40999605aa8d5ec6be68372511fdc4a2fdf"},"timestamp":1650266739,"metadata":{"github-id":"UCE_lALODBZtRc5BophDziKIvu8"},"target":"3cc91ffc083d2948af3c246c10349cebc144b54ecc9ba941ebaa3a4e4a52b627","message":"Solved in https://github.com/dandi/dandi-cli/pull/955/commits/5fc7b0652e8eb9a998e12e84f7273e12e062f21e other than presenting a warning. Not sure what sort of warning would be appropriate...\n\nAs for version comparison, Python referencing of the ASCII table has us covered:\n\n```python\n\u003e\u003e\u003e \"1.7.0\"\u003c\"1.7.0+012\"\nTrue\n\u003e\u003e\u003e \"1.7.0+011\"\u003c\"1.7.0+012\"\nTrue\n\u003e\u003e\u003e \"1.7.0+013\"\u003c\"1.7.0+012\"\nFalse\n```\n\nAFAICT the only surprises that this could cause are due to the fact that ASCII lists uppercase before lowercase, so:\n\n```python\n\u003e\u003e\u003e \"1.7.0+012+DANDI002\"\u003c\"1.7.0+012+dandi001\"\nTrue\n```","files":null},{"type":6,"author":{"id":"0ab0e40999605aa8d5ec6be68372511fdc4a2fdf"},"timestamp":1650266831,"metadata":{"github-id":"UCE_lALODBZtRc5BophDziKIwGU"},"target":"3cc91ffc083d2948af3c246c10349cebc144b54ecc9ba941ebaa3a4e4a52b627","message":"Solved in https://github.com/dandi/dandi-cli/pull/955/commits/5fc7b0652e8eb9a998e12e84f7273e12e062f21e other than presenting a warning. Not sure what sort of warning would be appropriate...\n\nAs for version comparison, Python referencing of the ASCII table has us covered:\n\n```python\n\u003e\u003e\u003e \"1.7.0\"\u003c\"1.7.0+012\"\nTrue\n\u003e\u003e\u003e \"1.7.0+011\"\u003c\"1.7.0+012\"\nTrue\n\u003e\u003e\u003e \"1.7.0+013\"\u003c\"1.7.0+012\"\nFalse\n\u003e\u003e\u003e \"1.7.0+012\"\u003c\"1.7.0+012+dandi001\"\nTrue\n\u003e\u003e\u003e \"1.7.0+012+dandi002\"\u003c\"1.7.0+012+dandi001\"\nFalse\n\u003e\u003e\u003e \"1.7.0+013\"\u003c\"1.7.0+012+dandi001\"\nFalse\n```\n\nAFAICT the only surprises that this could cause are due to the fact that ASCII lists uppercase before lowercase, so:\n\n```python\n\u003e\u003e\u003e \"1.7.0+012+DANDI002\"\u003c\"1.7.0+012+dandi001\"\nTrue\n```","files":null},{"type":6,"author":{"id":"0ab0e40999605aa8d5ec6be68372511fdc4a2fdf"},"timestamp":1650266963,"metadata":{"github-id":"UCE_lALODBZtRc5BophDziKIwvM"},"target":"3cc91ffc083d2948af3c246c10349cebc144b54ecc9ba941ebaa3a4e4a52b627","message":"Solved in https://github.com/dandi/dandi-cli/pull/955/commits/5fc7b0652e8eb9a998e12e84f7273e12e062f21e other than presenting a warning. Not sure what sort of warning would be appropriate...\n\nAs for version comparison, Python referencing of the ASCII table (or is it unicode?) has us covered:\n\n```python\n\u003e\u003e\u003e \"1.7.0\"\u003c\"1.7.0+012\"\nTrue\n\u003e\u003e\u003e \"1.7.0+011\"\u003c\"1.7.0+012\"\nTrue\n\u003e\u003e\u003e \"1.7.0+013\"\u003c\"1.7.0+012\"\nFalse\n\u003e\u003e\u003e \"1.7.0+012\"\u003c\"1.7.0+012+dandi001\"\nTrue\n\u003e\u003e\u003e \"1.7.0+012+dandi002\"\u003c\"1.7.0+012+dandi001\"\nFalse\n\u003e\u003e\u003e \"1.7.0+013\"\u003c\"1.7.0+012+dandi001\"\nFalse\n```\n\nAFAICT the only surprises that this could cause are due to the fact that ASCII lists uppercase before lowercase, so:\n\n```python\n\u003e\u003e\u003e \"1.7.0+012+DANDI002\"\u003c\"1.7.0+012+dandi001\"\nTrue\n```","files":null},{"type":6,"author":{"id":"0ab0e40999605aa8d5ec6be68372511fdc4a2fdf"},"timestamp":1650266986,"metadata":{"github-id":"UCE_lALODBZtRc5BophDziKIw14"},"target":"3cc91ffc083d2948af3c246c10349cebc144b54ecc9ba941ebaa3a4e4a52b627","message":"Solved in https://github.com/dandi/dandi-cli/pull/955/commits/5fc7b0652e8eb9a998e12e84f7273e12e062f21e other than presenting a warning. Not sure what sort of warning would be appropriate...\n\nAs for version comparison, Python referencing of the ASCII table (or is it unicode?) has us covered:\n\n```python\n\u003e\u003e\u003e \"1.7.0\"\u003c\"1.7.0+012\"\nTrue\n\u003e\u003e\u003e \"1.7.0+011\"\u003c\"1.7.0+012\"\nTrue\n\u003e\u003e\u003e \"1.7.0+013\"\u003c\"1.7.0+012\"\nFalse\n\u003e\u003e\u003e \"1.7.0+012\"\u003c\"1.7.0+012+dandi001\"\nTrue\n\u003e\u003e\u003e \"1.7.0+012+dandi002\"\u003c\"1.7.0+012+dandi001\"\nFalse\n\u003e\u003e\u003e \"1.7.0+013\"\u003c\"1.7.0+012+dandi001\"\nFalse\n```\n\nAFAICT the only surprises that this could cause are due to the fact that both ASCII and unicode list uppercase before lowercase, so:\n\n```python\n\u003e\u003e\u003e \"1.7.0+012+DANDI002\"\u003c\"1.7.0+012+dandi001\"\nTrue\n```","files":null},{"type":6,"author":{"id":"0ab0e40999605aa8d5ec6be68372511fdc4a2fdf"},"timestamp":1650267527,"metadata":{"github-id":"UCE_lALODBZtRc5BophDziKIzJ0"},"target":"3cc91ffc083d2948af3c246c10349cebc144b54ecc9ba941ebaa3a4e4a52b627","message":"Solved in https://github.com/dandi/dandi-cli/pull/955/commits/5fc7b0652e8eb9a998e12e84f7273e12e062f21e other than presenting a warning. Not sure what sort of warning would be appropriate...\n\nAs for version comparison, Python auto-referencing of the ASCII table (or is it unicode?) has us covered:\n\n```python\n\u003e\u003e\u003e \"1.7.0\"\u003c\"1.7.0+012\"\nTrue\n\u003e\u003e\u003e \"1.7.0+011\"\u003c\"1.7.0+012\"\nTrue\n\u003e\u003e\u003e \"1.7.0+013\"\u003c\"1.7.0+012\"\nFalse\n\u003e\u003e\u003e \"1.7.0+012\"\u003c\"1.7.0+012+dandi001\"\nTrue\n\u003e\u003e\u003e \"1.7.0+012+dandi002\"\u003c\"1.7.0+012+dandi001\"\nFalse\n\u003e\u003e\u003e \"1.7.0+013\"\u003c\"1.7.0+012+dandi001\"\nFalse\n```\n\nAFAICT the only surprises that this could cause are due to the fact that both ASCII and unicode list uppercase before lowercase, so:\n\n```python\n\u003e\u003e\u003e \"1.7.0+012+DANDI002\"\u003c\"1.7.0+012+dandi001\"\nTrue\n```","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1650298906,"metadata":{"github-id":"IC_kwDODBZtRc5BqCoe","github-url":"https://github.com/dandi/dandi-cli/issues/950#issuecomment-1101539870"},"message":"I would prefer to avoid relying on plain string comparison of semantic versions composed from numbers, could just bite somehow unexpectedly e.g\n```\n\u003e\u003e\u003e \"1.7.0+012\"\u003c \"1.7.0+99\"\nTrue\n```\nit is just a matter of semver to have \"Identifiers MUST NOT be empty. Build metadata MUST be ignored when determining version precedence. \"\n\n\u003cdetails\u003e\n\u003csummary\u003ealthough difference between \u003c= and == and \u003c confuses me -- may be a bug in semver?\u003c/summary\u003e \n\n```python\n$\u003e python3 -c 'from semantic_version import Version; print(Version(\"1.7.0\")==Version(\"1.7.0+012\"))'\nFalse\n\n$\u003e python3 -c 'from semantic_version import Version; print(Version(\"1.7.0\")\u003cVersion(\"1.7.0+012\"))'\nFalse\n\n$\u003e python3 -c 'from semantic_version import Version; print(Version(\"1.7.0\")\u003c=Version(\"1.7.0+012\"))'\nTrue\n\n```\n\u003c/details\u003e\n\nhence we should ignore it is as well.  I gave a sketch for possible tune up in https://github.com/dandi/dandi-cli/pull/955/files#r852231652","files":null},{"type":3,"author":{"id":"0ab0e40999605aa8d5ec6be68372511fdc4a2fdf"},"timestamp":1650311272,"metadata":{"github-id":"IC_kwDODBZtRc5BqrBc","github-url":"https://github.com/dandi/dandi-cli/issues/950#issuecomment-1101705308"},"message":"\u003e `\"1.7.0+012\"\u003c \"1.7.0+99\"`\nI thought the 3-digit length is fixed... Ok then :( I really liked the idea of leveraging plain string comparison, though, since it's refreshingly simple :)","files":null},{"type":6,"author":{"id":"0ab0e40999605aa8d5ec6be68372511fdc4a2fdf"},"timestamp":1650311281,"metadata":{"github-id":"UCE_lALODBZtRc5BqrBcziKMqj8"},"target":"96f3a0058ac89b80bce969599d7c87de519413683239b9b302cf34e0aedf9f0e","message":"\u003e `\"1.7.0+012\"\u003c \"1.7.0+99\"`\n\nI thought the 3-digit length is fixed... Ok then :( I really liked the idea of leveraging plain string comparison, though, since it's refreshingly simple :)","files":null},{"type":3,"author":{"id":"0ab0e40999605aa8d5ec6be68372511fdc4a2fdf"},"timestamp":1650321663,"metadata":{"github-id":"IC_kwDODBZtRc5BrIT3","github-url":"https://github.com/dandi/dandi-cli/issues/950#issuecomment-1101825271"},"message":"Revisiting this, since `semantic_version` doesn't like our DANDI nomenclature:\n\n```python\n\u003e\u003e\u003e from semantic_version import Version\n\u003e\u003e\u003e Version(\"1.7.0+012\")\u003c=Version(\"1.7.0+012+dandi001\")\nTraceback (most recent call last):\n  File \"\u003cstdin\u003e\", line 1, in \u003cmodule\u003e\n  File \"/usr/lib/python3.9/site-packages/semantic_version/base.py\", line 105, in __init__\n    major, minor, patch, prerelease, build = self.parse(version_string, partial)\n  File \"/usr/lib/python3.9/site-packages/semantic_version/base.py\", line 311, in parse\n    raise ValueError('Invalid version string: %r' % version_string)\nValueError: Invalid version string: '1.7.0+012+dandi001'\n```\n\nGiven that this is the dandi-cli bundled version of the validator and we haven't even started trying to push `*.ngff` and `*.h5` yet â€” we need to fall back on `1.7.0+012+dandi001` and not `1.7.0+012`. Additionally, for upstream code, `semantic_version` isn't a dep, and given the minimal aspiration I think it makes sense to try to add zero libs.\n\nAt this point I'd say it would be best in both cases to either (1) accept the risk of plain string comparison, or (2) write a small function to implement the comparison we need. I thing the former is cooler :)\n\nLeaving this open for now, pending your feedback on the solution. Warning and working string comparison is in as of https://github.com/dandi/dandi-cli/pull/955/commits/1a6d835213e6f64168e7850b3110c7a3b006e236 and previous.","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1650324180,"metadata":{"github-id":"IC_kwDODBZtRc5BrOIJ","github-url":"https://github.com/dandi/dandi-cli/issues/950#issuecomment-1101849097"},"message":"ok, you convinced me -- just do string comparison for now.","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1650563093,"metadata":{"github-id":"IC_kwDODBZtRc5B5Mpt","github-url":"https://github.com/dandi/dandi-cli/issues/950#issuecomment-1105513069"},"message":"I believe https://github.com/dandi/dandi-cli/pull/955 addressed this, and should have closed it .","files":null},{"type":4,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1650563094,"metadata":{"github-id":"CE_lADODBZtRc5HOM6FzwAAAAGB0Yx3"},"status":2}]}