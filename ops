{"version":2,"ops":[{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1616768176,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDgwODI1NDY1Mg==","github-url":"https://github.com/dandi/dandi-cli/issues/501#issuecomment-808254652"},"message":"\u003e * Do you want this to be implemented as a `delete()` function that does all the work and is simply called by the `delete` command?  Because, if not, I don't see the point of specifying what types of exceptions to raise, since they'll all be the same to the user.\n\nideally yes so we have Python API for it as well\n\n\u003e * Should each Dandiset be deleted (after prompting for confirmation) as its URL is processed, or should they all be saved up for the end of the command and deleted with a single confirmation? If the latter, should the Dandiset deletion confirmation be part of the asset deletion confirmation, or should they be two separate confirmations?\n\nas I have mentioned in the opening of previous comment -- could we just check if all URLs point to the same dandiset and error out if multiple are pointed to?  that would avoid the need for \"per-dataset\" prompts etc.\n\n\u003e \u003e \u003e * **Question:** What should happen if a non-asset URL includes a version component?\n\u003e \u003e \n\u003e \u003e I guess if it is a path or full dandiset -- proceed with request to server, and it should error (thus again we would test dandi-api)\n\u003e \n\u003e Do you mean that the request should be made to the Dandiset deletion endpoint, ignoring the version? And what kind of path argument would include a version component?\n\noh sorry -- I have not spotted that there is no API end-point for deletion of a specific version of the dandiset ATM.  So I guess in such a case (if versioned dandiset is specified): `raise NotImplementedError(\"DANDI API server does not support deletion of individual versions of a dandiset\")`\n\n\u003e \u003e \u003e Question: When a path to a directory is given, how should the assets within be identified? Should all files be searched for on the server, with those not found simply ignored?\n\u003e \u003e \n\u003e \u003e let's operate \"semantically\", i.e. if `dandi delete --delete-local sub-X` is given, we take it to query remote for that path on remote side and delete those assets, without traversing local `sub-X` which might have different ones.\n\u003e \n\u003e What exactly is `--delete-local` supposed to do? What happens if the user runs `dandi delete sub-X` without `--delete-local`?\n\nI am sorry -- that was a leftover from my initial response before I decided that we should not bother with local deletions at all.  So just remove `--delete-local` , i.e. command was intended to be `dandi delete sub-X`","files":null},{"type":3,"author":{"id":"364914f8b1c8a9131d300bf2978e4ffe2ff1aeeb"},"timestamp":1616770720,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDgwODI4NTM5OA==","github-url":"https://github.com/dandi/dandi-cli/issues/501#issuecomment-808285398"},"message":"@yarikoptic Should the user be allowed to specify assets from multiple different versions of the same Dandiset?  Or should specifying any asset in a non-draft version be an automatic error?","files":null},{"type":3,"author":{"id":"12cb25e6e3f19b53447b05d00d7d4d53c925c908"},"timestamp":1616770880,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDgwODI4NzUzMg==","github-url":"https://github.com/dandi/dandi-cli/issues/501#issuecomment-808287532"},"message":"\u003e should the user be allowed to specify assets from multiple different versions of the same Dandiset? Or should specifying any asset in a non-draft version be an automatic error?\n\nfor the moment i would raise an exception. this would be the kind of thing that only admins have access to but even then to be used very sparingly. let's be safe with this one for now and restrict it to drafts.","files":null}]}