{"version":2,"ops":[{"type":3,"author":{"id":"364914f8b1c8a9131d300bf2978e4ffe2ff1aeeb"},"timestamp":1684844537,"metadata":{"github-id":"IC_kwDODBZtRc5c72aW","github-url":"https://github.com/dandi/dandi-cli/issues/1297#issuecomment-1559193238"},"message":"@TheChymera Cannot reproduce.  If you print out `[e.message for e in errors]` after [this line](https://github.com/dandi/dandi-cli/blob/614ec27ca0e101f40eaa0991ade1ca6b74035ea7/dandi/tests/test_files.py#L374), what do you get?","files":null},{"type":3,"author":{"id":"0ab0e40999605aa8d5ec6be68372511fdc4a2fdf"},"timestamp":1684984808,"metadata":{"github-id":"IC_kwDODBZtRc5dHUrP","github-url":"https://github.com/dandi/dandi-cli/issues/1297#issuecomment-1562200783"},"message":"@jwodder \n\n```\ndecohost /var/tmp/portage/dev-vcs/dandi-cli-0.55.1/work/dandi-0.55.1 # DANDI_TESTS_NONETWORK=1 pytest -vvs dandi/tests/test_files.py\n=========================================================== test session starts ============================================================\nplatform linux -- Python 3.11.3, pytest-7.3.1, pluggy-1.0.0 -- /usr/bin/python3.11\ncachedir: .pytest_cache\nrootdir: /var/tmp/portage/dev-vcs/dandi-cli-0.55.1/work/dandi-0.55.1\nconfigfile: tox.ini\nplugins: mock-3.10.0, rerunfailures-11.1.2, pkgcore-0.12.21, pyfakefs-5.2.2\ncollected 14 items\n\ndandi/tests/test_files.py::test_find_dandi_files PASSED\ndandi/tests/test_files.py::test_find_dandi_files_with_bids PASSED\ndandi/tests/test_files.py::test_dandi_file_zarr_with_excluded_dotfiles PASSED\ndandi/tests/test_files.py::test_validate_simple1 PASSED\ndandi/tests/test_files.py::test_validate_simple1_no_subject PASSED\ndandi/tests/test_files.py::test_validate_simple2 PASSED\ndandi/tests/test_files.py::test_validate_simple2_new PASSED\ndandi/tests/test_files.py::test_validate_simple3_no_subject_id PASSED\ndandi/tests/test_files.py::test_validate_bogus ['Unable to synchronously open file (file signature not found)']\nFAILED\ndandi/tests/test_files.py::test_upload_zarr SKIPPED (no network settings)\ndandi/tests/test_files.py::test_zarr_properties PASSED\ndandi/tests/test_files.py::test_upload_zarr_with_excluded_dotfiles SKIPPED (no network settings)\ndandi/tests/test_files.py::test_validate_deep_zarr PASSED\ndandi/tests/test_files.py::test_validate_zarr_deep_via_excluded_dotfiles PASSED\n\n================================================================= FAILURES =================================================================\n___________________________________________________________ test_validate_bogus ____________________________________________________________\ndandi/tests/test_files.py:378: in test_validate_bogus\n    assert any(e.message.startswith(\"Unable to open file\") for e in errors)\nE   assert False\nE    +  where False = any(\u003cgenerator object test_validate_bogus.\u003clocals\u003e.\u003cgenexpr\u003e at 0x7f8d47d399a0\u003e)\n=========================================================== slowest 10 durations ===========================================================\n2.01s setup    dandi/tests/test_files.py::test_validate_simple2\n0.09s call     dandi/tests/test_files.py::test_validate_simple2\n0.08s call     dandi/tests/test_files.py::test_validate_simple1\n0.08s call     dandi/tests/test_files.py::test_validate_simple2_new\n0.08s call     dandi/tests/test_files.py::test_validate_simple1_no_subject\n0.07s call     dandi/tests/test_files.py::test_validate_simple3_no_subject_id\n0.03s setup    dandi/tests/test_files.py::test_validate_simple3_no_subject_id\n0.03s setup    dandi/tests/test_files.py::test_validate_simple1\n0.02s call     dandi/tests/test_files.py::test_zarr_properties\n0.01s call     dandi/tests/test_files.py::test_validate_bogus\n========================================================= short test summary info ==========================================================\nFAILED dandi/tests/test_files.py::test_validate_bogus - assert False\n================================================= 1 failed, 11 passed, 2 skipped in 2.73s ==================================================\n```\n\nCan also confirm this continues to happen on `dandi-0.55.1`","files":null},{"type":2,"author":{"id":"0ab0e40999605aa8d5ec6be68372511fdc4a2fdf"},"timestamp":1684984824,"metadata":{"github-id":"RTE_lADODBZtRc5mnvmmzwAAAAIsZWJg"},"title":"`dandi/tests/test_files.py::test_validate_bogus - assert False` on `=dandi-cli-0.55.0` and `=dandi-cli-0.55.1`","was":"`dandi/tests/test_files.py::test_validate_bogus - assert False` on `=dandi-cli-0.55.0` and `=dandi-cli-0.55.1`"},{"type":3,"author":{"id":"364914f8b1c8a9131d300bf2978e4ffe2ff1aeeb"},"timestamp":1685016886,"metadata":{"github-id":"IC_kwDODBZtRc5dJnr-","github-url":"https://github.com/dandi/dandi-cli/issues/1297#issuecomment-1562802942"},"message":"@TheChymera If you pass `devel_debug=True` to `get_validation_errors()`, what do you get?","files":null},{"type":3,"author":{"id":"0ab0e40999605aa8d5ec6be68372511fdc4a2fdf"},"timestamp":1685033375,"metadata":{"github-id":"IC_kwDODBZtRc5dLMj8","github-url":"https://github.com/dandi/dandi-cli/issues/1297#issuecomment-1563216124"},"message":"@jwodder this is what I get:\n\n```\ndecohost /var/tmp/portage/dev-vcs/dandi-cli-0.55.1/work/dandi-0.55.1 # DANDI_TESTS_NONETWORK=1 pytest -vvs dandi/tests/test_files.py\n=========================================================== test session starts ============================================================\nplatform linux -- Python 3.11.3, pytest-7.3.1, pluggy-1.0.0 -- /usr/bin/python3.11\ncachedir: .pytest_cache\nrootdir: /var/tmp/portage/dev-vcs/dandi-cli-0.55.1/work/dandi-0.55.1\nconfigfile: tox.ini\nplugins: mock-3.10.0, rerunfailures-11.1.2, pkgcore-0.12.21, pyfakefs-5.2.2\ncollected 14 items\n\ndandi/tests/test_files.py::test_find_dandi_files PASSED\ndandi/tests/test_files.py::test_find_dandi_files_with_bids PASSED\ndandi/tests/test_files.py::test_dandi_file_zarr_with_excluded_dotfiles PASSED\ndandi/tests/test_files.py::test_validate_simple1 PASSED\ndandi/tests/test_files.py::test_validate_simple1_no_subject PASSED\ndandi/tests/test_files.py::test_validate_simple2 PASSED\ndandi/tests/test_files.py::test_validate_simple2_new PASSED\ndandi/tests/test_files.py::test_validate_simple3_no_subject_id PASSED\ndandi/tests/test_files.py::test_validate_bogus FAILED\ndandi/tests/test_files.py::test_upload_zarr SKIPPED (no network settings)\ndandi/tests/test_files.py::test_zarr_properties PASSED\ndandi/tests/test_files.py::test_upload_zarr_with_excluded_dotfiles SKIPPED (no network settings)\ndandi/tests/test_files.py::test_validate_deep_zarr PASSED\ndandi/tests/test_files.py::test_validate_zarr_deep_via_excluded_dotfiles PASSED\n\n================================================================= FAILURES =================================================================\n___________________________________________________________ test_validate_bogus ____________________________________________________________\ndandi/tests/test_files.py:374: in test_validate_bogus\n    errors = dandi_file(path).get_validation_errors(devel_debug=True)\ndandi/files/bases.py:500: in get_validation_errors\n    errors: list[ValidationResult] = pynwb_validate(\n/usr/lib/python3.11/site-packages/fscacher/cache.py:142: in fingerprinter\n    ret = f(*args, **kwargs)\ndandi/pynwb_utils.py:362: in validate\n    error_outputs, _ = pynwb.validate(paths=[path])\n/usr/lib/python3.11/site-packages/hdmf/utils.py:649: in func_call\n    return func(**pargs)\n/usr/lib/python3.11/site-packages/pynwb/validate.py:143: in validate\n    cached_namespaces, manager, namespace_dependencies = _get_cached_namespaces_to_validate(\n/usr/lib/python3.11/site-packages/pynwb/validate.py:61: in _get_cached_namespaces_to_validate\n    namespace_dependencies = NWBHDF5IO.load_namespaces(namespace_catalog=catalog, path=path, driver=driver)\n/usr/lib/python3.11/site-packages/hdmf/utils.py:645: in func_call\n    return func(args[0], **pargs)\n/usr/lib/python3.11/site-packages/hdmf/backends/hdf5/h5tools.py:152: in load_namespaces\n    open_file_obj = cls.__resolve_file_obj(path, file_obj, driver)\n/usr/lib/python3.11/site-packages/hdmf/backends/hdf5/h5tools.py:127: in __resolve_file_obj\n    file_obj = File(path, 'r', **file_kwargs)\n/usr/lib/python3.11/site-packages/h5py/_hl/files.py:567: in __init__\n    fid = make_fid(name, mode, userblock_size, fapl, fcpl, swmr=swmr)\n/usr/lib/python3.11/site-packages/h5py/_hl/files.py:231: in make_fid\n    fid = h5f.open(name, flags, fapl=fapl)\nh5py/_objects.pyx:54: in h5py._objects.with_phil.wrapper\n    ???\nh5py/_objects.pyx:55: in h5py._objects.with_phil.wrapper\n    ???\nh5py/h5f.pyx:106: in h5py.h5f.open\n    ???\nE   OSError: Unable to synchronously open file (file signature not found)\n=========================================================== slowest 10 durations ===========================================================\n2.21s setup    dandi/tests/test_files.py::test_validate_simple2\n0.15s call     dandi/tests/test_files.py::test_validate_simple1_no_subject\n0.11s call     dandi/tests/test_files.py::test_validate_simple2_new\n0.10s call     dandi/tests/test_files.py::test_validate_simple1\n0.09s call     dandi/tests/test_files.py::test_validate_simple2\n0.09s call     dandi/tests/test_files.py::test_validate_simple3_no_subject_id\n0.03s setup    dandi/tests/test_files.py::test_validate_simple3_no_subject_id\n0.03s setup    dandi/tests/test_files.py::test_validate_simple1\n0.03s call     dandi/tests/test_files.py::test_zarr_properties\n0.01s call     dandi/tests/test_files.py::test_validate_deep_zarr\n========================================================= short test summary info ==========================================================\nFAILED dandi/tests/test_files.py::test_validate_bogus - OSError: Unable to synchronously open file (file signature not found)\n================================================= 1 failed, 11 passed, 2 skipped in 3.13s ==================================================\n```","files":null},{"type":3,"author":{"id":"364914f8b1c8a9131d300bf2978e4ffe2ff1aeeb"},"timestamp":1685033636,"metadata":{"github-id":"IC_kwDODBZtRc5dLN1a","github-url":"https://github.com/dandi/dandi-cli/issues/1297#issuecomment-1563221338"},"message":"@TheChymera How did you install h5py?  If you did not use a prebuilt image (e.g., a wheel from PyPI), what version of hdf5 did you use?","files":null},{"type":3,"author":{"id":"0ab0e40999605aa8d5ec6be68372511fdc4a2fdf"},"timestamp":1685038428,"metadata":{"github-id":"IC_kwDODBZtRc5dLkqX","github-url":"https://github.com/dandi/dandi-cli/issues/1297#issuecomment-1563314839"},"message":"@jwodder I have `=hdf5-1.14.1` It's installed via my package manager based on the source tarball. I'm re-installing it to capture the build log and link it here. Anything in particular I should look for?","files":null},{"type":3,"author":{"id":"364914f8b1c8a9131d300bf2978e4ffe2ff1aeeb"},"timestamp":1685038707,"metadata":{"github-id":"IC_kwDODBZtRc5dLmAU","github-url":"https://github.com/dandi/dandi-cli/issues/1297#issuecomment-1563320340"},"message":"@TheChymera Check that #1301 fixes the failure.","files":null},{"type":3,"author":{"id":"0ab0e40999605aa8d5ec6be68372511fdc4a2fdf"},"timestamp":1685038720,"metadata":{"github-id":"IC_kwDODBZtRc5dLmD0","github-url":"https://github.com/dandi/dandi-cli/issues/1297#issuecomment-1563320564"},"message":"@jwodder here is the full build log in case that's still relevant â†’ https://ppb.chymera.eu/3ca240.log","files":null},{"type":4,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1685042568,"metadata":{"github-id":"CE_lADODBZtRc5mnvmmzwAAAAIs7hxC"},"status":2},{"type":3,"author":{"id":"7a8552494914d3e4116f4b434eb4812a914ca405"},"timestamp":1691777184,"metadata":{"github-id":"IC_kwDODBZtRc5j2S5L","github-url":"https://github.com/dandi/dandi-cli/issues/1297#issuecomment-1675177547"},"message":"\u003c!-- GITHUB_RELEASE COMMENT: released --\u003e\n:rocket: Issue was released in [`0.56.0`](https://github.com/dandi/dandi-cli/releases/tag/0.56.0) :rocket:","files":null},{"type":5,"author":{"id":"7a8552494914d3e4116f4b434eb4812a914ca405"},"timestamp":1691777185,"metadata":{"github-id":"LE_lADODBZtRc5mnvmmzwAAAAJYXv6a"},"added":["released"],"removed":[]}]}