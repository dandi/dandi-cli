{"version":2,"ops":[{"type":5,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1677695569,"metadata":{"github-id":"LE_lADODBZtRc5frxEWzwAAAAIDEPki"},"added":["documentation"],"removed":[]},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1677696012,"metadata":{"github-id":"IC_kwDODBZtRc5Wd4td","github-url":"https://github.com/dandi/dandi-cli/issues/1235#issuecomment-1450675037"},"message":"DANDI accepts datasets in BIDS format and since BIDS was not (WiP) fully ready to cover animal neurophys data, we came up with  `organize` command which formalizes into BIDS-like hierarchy but with some divergences. Indeed we should document better (hence added a label) on which metadata entities already participate in filename construction. ATM you can find them in https://github.com/dandi/dandi-cli/blob/HEAD/dandi/consts.py#L177 . Overall we would be open to add probably any entity already covered by BIDS: https://bids-specification.readthedocs.io/en/stable/appendices/entities.html . Looking more specifically at https://bids-specification.readthedocs.io/en/stable/04-modality-specific-files/10-microscopy.html - is any one in particular is best aligned (`sample`, `acq`?) with the metadata (experiment id could even be session id for me) in this case?","files":null},{"type":3,"author":{"id":"c1abeb1a926bde7ac233bf2db2c21afb27ff77d4"},"timestamp":1677783069,"metadata":{"github-id":"IC_kwDODBZtRc5Wkaac","github-url":"https://github.com/dandi/dandi-cli/issues/1235#issuecomment-1452385948"},"message":"Thanks for the response @yarikoptic. Going over that documentation, I think the acq label is probably the best option for adding custom information in this case. It seems to be intended for custom labels designed to distinguish between similar sessions with experimental differences anyway.","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1677876744,"metadata":{"github-id":"IC_kwDODBZtRc5WrAOb","github-url":"https://github.com/dandi/dandi-cli/issues/1235#issuecomment-1454113691"},"message":"yes. And it is quite flexible and not anyhow regulated.  But that then also limits possibility for automation. E.g. in your case I would expect `dandi organize` to (ab)use non-informative `_id-` field to distinguish two files which are otherwise the same in terms of metadata.  I wonder if we should add some \"plug-in\" functionality so you could add to your `dandi organize` invocation and it would decide on what custom `key`s to add based on the files in question.","files":null},{"type":3,"author":{"id":"c1abeb1a926bde7ac233bf2db2c21afb27ff77d4"},"timestamp":1678211140,"metadata":{"github-id":"IC_kwDODBZtRc5W8C01","github-url":"https://github.com/dandi/dandi-cli/issues/1235#issuecomment-1458580789"},"message":"I think that could be quite useful for automation, but may lose some of the flexibility provided by the acq label. Would being able to manually specify additional custom keys in the dandi organize function be possible? Also, what would be the time frame for adding such a feature or the acq label? Thank you so much for your help @yarikoptic","files":null},{"type":2,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1678218909,"metadata":{"github-id":"RTE_lADODBZtRc5frxEWzwAAAAIF9FXd"},"title":"Dandi organize currently lacks an option to add custom keys to dandi file names ","was":"Dandi organize currently lacks an option to add custom keys to dandi file names "},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1678219259,"metadata":{"github-id":"IC_kwDODBZtRc5W8wA2","github-url":"https://github.com/dandi/dandi-cli/issues/1235#issuecomment-1458765878"},"message":"Well, there is already nothing which forbids you from\n- running `dandi organize` to organize using `_id-ID` to disambiguate\n- rename all the files replacing non-informative `_id-ID` with `_acq-custom1` and alike. \nsince AFAIK we are not validating really those keys ATM in the layout and `dandi validate` (and thus `dandi upload`) should not complain.\n\nDo you see/have some python code which, e.g. given an nwb file, could provide a decision on the value of `_acq-` to use for it?","files":null}]}