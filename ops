{"version":2,"ops":[{"type":1,"author":{"id":"0ab0e40999605aa8d5ec6be68372511fdc4a2fdf"},"timestamp":1682958148,"metadata":{"github-id":"I_kwDODBZtRc5kyw00","github-url":"https://github.com/dandi/dandi-cli/issues/1284","origin":"github"},"title":"`dandi validate` and symlinks","message":"Having issues with running `dandi validate` on a datalad file. Probably this is in my code so I'll try to sumbit a PR for this.\n\n```\n(dev) [deco]~/src/dandi-cli ❱ git rev-parse HEAD\n64c883ae9d2d9ce105991e7aa41669972b66e2c6\n(dev) [deco]~/src/dandi-cli ❱ pushd ~/.local/share/datalad/vStr_phase_stim/\n~/.local/share/datalad/vStr_phase_stim ~/src/dandi-cli\n(dev) [deco]~/.local/share/datalad/vStr_phase_stim ❱ dandi validate bids/\n2023-05-01 12:19:32,647 [    INFO] Note: NumExpr detected 12 cores but \"NUMEXPR_MAX_THREADS\" not set, so enforcing safe limit of 8.\n2023-05-01 12:19:32,647 [    INFO] NumExpr defaulting to 8 threads.\n2023-05-01 12:19:35,505 [ WARNING] BIDSVersion `1.8.0` is less than the minimal working `schema`. Falling back to `schema`. To force the usage of earlier versions specify them explicitly when calling the validator.\n2023-05-01 12:19:37,939 [   ERROR] The `README(?P\u003cextension\u003e|\\.md|\\.rst|\\.txt)` regex pattern file required by BIDS was not found.\n2023-05-01 12:19:37,939 [ WARNING] The `/run/media/chymera/data2/datalad/vStr_phase_stim/bids/sub-M322/ses-20220722/ieeg/sub-M322_ses-20220722_ieeg.nwb` file was not matched by any regex schema entry.\n2023-05-01 12:19:37,940 [    INFO] Logs saved in /home/chymera/.cache/dandi-cli/log/20230501161932Z-6012.log\nError: '/run/media/chymera/data2/datalad/vStr_phase_stim/bids/sub-M322/ses-20220722/ieeg/sub-M322_ses-20220722_ieeg.nwb' is not in the subpath of 'bids' OR one path is relative and the other is absolute.\n(dev) [deco]~/.local/share/datalad/vStr_phase_stim ❱ ls -lah /run/media/chymera/data2/datalad/vStr_phase_stim/bids/sub-M322/ses-20220722/ieeg/sub-M322_ses-20220722_ieeg.nwb\nlrwxrwxrwx 1 chymera chymera 146 Apr 17 08:15 /run/media/chymera/data2/datalad/vStr_phase_stim/bids/sub-M322/ses-20220722/ieeg/sub-M322_ses-20220722_ieeg.nwb -\u003e ../../../../.git/annex/objects/6k/zq/MD5E-s7785787504--75ef44eaf39d02268cf9a0cf4a84ccd9.nwb/MD5E-s7785787504--75ef44eaf39d02268cf9a0cf4a84ccd9.nwb\n```\n\nI think the problem is the path might be getting dereferenced.\n@yarikoptic","files":null}]}