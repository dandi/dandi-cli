{"version":2,"ops":[{"type":1,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1661543431,"metadata":{"github-id":"I_kwDODBZtRc5QoC_P","github-url":"https://github.com/dandi/dandi-cli/issues/1109","origin":"github"},"title":" test_set_dandiset_metadata failed for test (ubuntu-latest, 3.9, normal)","message":"happened in https://github.com/dandi/dandi-cli/pull/1095 and looks unrelated to those changes, so must be some interaction with the server ... restarting the test run now to see if it goes away and thus likely some race condition somewhere (in client and/or server):\n\n```\n__________________________ test_set_dandiset_metadata __________________________\n21168\ndandi/tests/test_dandiapi.py:500: in test_set_dandiset_metadata\n21169\n    assert (\n21170\nE   AssertionError: assert 'A test Dandiset' == 'A test Dandi...ered metadata'\n21171\nE     - A test Dandiset with altered metadata\n21172\nE     + A test Dandiset\n21173\n------------------------------ Captured log setup ------------------------------\n21174\nDEBUG    dandi:dandiapi.py:199 POST http://localhost:8000/api/dandisets/\n21175\nDEBUG    dandi:dandiapi.py:246 Response: 200\n21176\nDEBUG    dandi:dandiapi.py:199 GET http://localhost:8000/api/info/\n21177\nDEBUG    dandi:dandiapi.py:246 Response: 200\n21178\nDEBUG    dandi:dandiapi.py:199 GET http://localhost:8000/api/auth/token\n21179\nDEBUG    dandi:dandiapi.py:246 Response: 200\n21180\nDEBUG    dandi:dandiset.py:102 Found identifier 000023 in top level 'identifier'\n21181\nINFO     dandi:upload.py:99 Found 5 files to consider\n21182\nDEBUG    dandi:dandiapi.py:199 GET http://localhost:8000/api/dandisets/000023/versions/draft/assets/\n21183\nDEBUG    dandi:dandiapi.py:246 Response: 200\n21184\nDEBUG    dandi:bases.py:317 Calculated dandi-etag of d5b215bbddf463221d1cc55c31098d40-1 for /tmp/pytest-of-runner/pytest-0/dandiset22/file.txt\n21185\nDEBUG    dandi:bases.py:326 file.txt: Beginning upload\n21186\nDEBUG    dandi:dandiapi.py:199 POST http://localhost:8000/api/uploads/initialize/\n21187\nDEBUG    dandi:dandiapi.py:246 Response: 409\n21188\nDEBUG    dandi:dandiapi.py:253 Error 409 while sending POST request to http://localhost:8000/api/uploads/initialize/: \"Blob already exists.\"\n21189\nDEBUG    dandi:bases.py:342 file.txt: Blob already exists on server\n21190\nDEBUG    dandi:bases.py:414 file.txt: Assigning asset blob to dandiset \u0026 version\n21191\nDEBUG    dandi:dandiapi.py:199 POST http://localhost:8000/api/dandisets/000023/versions/draft/assets/\n21192\nDEBUG    dandi:dandiapi.py:246 Response: 200\n21193\nINFO     dandi:bases.py:428 file.txt: Asset successfully uploaded\n21194\nDEBUG    dandi:dandiapi.py:199 GET http://localhost:8000/api/dandisets/000023/versions/draft/assets/\n21195\nDEBUG    dandi:dandiapi.py:246 Response: 200\n21196\nDEBUG    dandi:bases.py:317 Calculated dandi-etag of 61ad88b8426662e2466f70234dc02c4b-1 for /tmp/pytest-of-runner/pytest-0/dandiset22/subdir1/apple.txt\n21197\nDEBUG    dandi:bases.py:326 subdir1/apple.txt: Beginning upload\n21198\nDEBUG    dandi:dandiapi.py:199 POST http://localhost:8000/api/uploads/initialize/\n21199\nDEBUG    dandi:dandiapi.py:246 Response: 409\n21200\nDEBUG    dandi:dandiapi.py:253 Error 409 while sending POST request to http://localhost:8000/api/uploads/initialize/: \"Blob already exists.\"\n21201\nDEBUG    dandi:bases.py:342 subdir1/apple.txt: Blob already exists on server\n21202\nDEBUG    dandi:bases.py:414 subdir1/apple.txt: Assigning asset blob to dandiset \u0026 version\n21203\nDEBUG    dandi:dandiapi.py:199 POST http://localhost:8000/api/dandisets/000023/versions/draft/assets/\n21204\nDEBUG    dandi:dandiapi.py:246 Response: 200\n21205\nINFO     dandi:bases.py:428 subdir1/apple.txt: Asset successfully uploaded\n21206\nDEBUG    dandi:dandiapi.py:199 GET http://localhost:8000/api/dandisets/000023/versions/draft/assets/\n21207\nDEBUG    dandi:dandiapi.py:246 Response: 200\n21208\nDEBUG    dandi:bases.py:317 Calculated dandi-etag of c461208d22d3fd53da6f748284d1b49f-1 for /tmp/pytest-of-runner/pytest-0/dandiset22/subdir2/coconut.txt\n21209\nDEBUG    dandi:bases.py:326 subdir2/coconut.txt: Beginning upload\n21210\nDEBUG    dandi:dandiapi.py:199 POST http://localhost:8000/api/uploads/initialize/\n21211\nDEBUG    dandi:dandiapi.py:246 Response: 409\n21212\nDEBUG    dandi:dandiapi.py:253 Error 409 while sending POST request to http://localhost:8000/api/uploads/initialize/: \"Blob already exists.\"\n21213\nDEBUG    dandi:bases.py:342 subdir2/coconut.txt: Blob already exists on server\n21214\nDEBUG    dandi:bases.py:414 subdir2/coconut.txt: Assigning asset blob to dandiset \u0026 version\n21215\nDEBUG    dandi:dandiapi.py:199 POST http://localhost:8000/api/dandisets/000023/versions/draft/assets/\n21216\nDEBUG    dandi:dandiapi.py:246 Response: 200\n21217\nINFO     dandi:bases.py:428 subdir2/coconut.txt: Asset successfully uploaded\n21218\nDEBUG    dandi:dandiapi.py:199 GET http://localhost:8000/api/dandisets/000023/versions/draft/assets/\n21219\nDEBUG    dandi:dandiapi.py:246 Response: 200\n21220\nDEBUG    dandi:bases.py:317 Calculated dandi-etag of 1f2406f328ccfc069d2844d6fa64e564-1 for /tmp/pytest-of-runner/pytest-0/dandiset22/subdir2/banana.txt\n21221\nDEBUG    dandi:bases.py:326 subdir2/banana.txt: Beginning upload\n21222\nDEBUG    dandi:dandiapi.py:199 POST http://localhost:8000/api/uploads/initialize/\n21223\nDEBUG    dandi:dandiapi.py:246 Response: 409\n21224\nDEBUG    dandi:dandiapi.py:253 Error 409 while sending POST request to http://localhost:8000/api/uploads/initialize/: \"Blob already exists.\"\n21225\nDEBUG    dandi:bases.py:342 subdir2/banana.txt: Blob already exists on server\n21226\nDEBUG    dandi:bases.py:414 subdir2/banana.txt: Assigning asset blob to dandiset \u0026 version\n21227\nDEBUG    dandi:dandiapi.py:199 POST http://localhost:8000/api/dandisets/000023/versions/draft/assets/\n21228\nDEBUG    dandi:dandiapi.py:246 Response: 200\n21229\nINFO     dandi:bases.py:428 subdir2/banana.txt: Asset successfully uploaded\n21230\n------------------------------ Captured log call -------------------------------\n21231\nDEBUG    dandi:dandiapi.py:199 GET http://localhost:8000/api/dandisets/000023/versions/draft/\n21232\nDEBUG    dandi:dandiapi.py:246 Response: 200\n21233\nDEBUG    dandi:dandiapi.py:199 PUT http://localhost:8000/api/dandisets/000023/versions/draft/\n21234\nDEBUG    dandi:dandiapi.py:246 Response: 200\n21235\nDEBUG    dandi:dandiapi.py:199 GET http://localhost:8000/api/dandisets/000023/versions/draft/\n21236\nDEBUG    dandi:dandiapi.py:246 Response: 200\n21237\n\n21238\n---------- coverage: platform linux, python 3.9.13-final-0 -----------\n21239\nCoverage XML written to file coverage.xml\n```","files":null}]}