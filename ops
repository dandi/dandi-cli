{"version":2,"ops":[{"type":1,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1658869470,"metadata":{"github-id":"I_kwDODBZtRc5Omooz","github-url":"https://github.com/dandi/dandi-cli/issues/1085","origin":"github"},"title":"Allow to operate on an instance provided by URL, based on /server-info","message":"With https://github.com/dandi/dandi-archive/pull/1190 in dandi-archive we would (re-?)gain usable /server-info from the local instances.  But ATM `dandi` is not designed to be able to work with some arbitrary instance of dandi archive it doesn't know so without #1003 or replacing it #1084 it wouldn't even be able to download a dandiset from it:\n\n```\n$\u003e curl http://localhost:8085/server-info/\n{\"schema_version\":\"0.6.3\",\"schema_url\":\"https://raw.githubusercontent.com/dandi/schema/master/releases/0.6.3/dandiset.json\",\"version\":\"0.2.39.post19+g9b92512f\",\"services\":{\"api\":{\"url\":\"http://localhost:8000/api\"},\"webui\":{\"url\":\"http://localhost:8085\"},\"jupyterhub\":{\"url\":\"https://hub.dandiarchive.org/\"}},\"cli-minimal-version\":\"0.14.2\",\"cli-bad-versions\":[]}\n\n$\u003e dandi download http://localhost:8085/dandiset/000001\n2022-07-26 17:00:36,014 [    INFO] Logs saved in /home/yoh/.cache/dandi-cli/log/20220726210034Z-1548312.log\nError: No such Dandiset: '000001'\n``` \n\nBut `download` is not a single command which needs to know about instance, and we have `-i|--dandi-instance` to specify the instance.  I think we should \n- if instance cannot be deduced from URL, get that URLs top `/server-info` and create an instance with that URL as the name internally for the duration of that process to be used as the instance_name.\n- allow for a URL (such as `http://localhost:8085/`) to be provided/used as the instance name, thus allowing for any other operation , such as `upload -i http://localhost:8085/`.","files":null}]}