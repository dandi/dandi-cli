{"version":2,"ops":[{"type":1,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1671474011,"metadata":{"github-id":"I_kwDODBZtRc5Zm7e4","github-url":"https://github.com/dandi/dandi-cli/issues/1178","origin":"github"},"title":"Avoid digest calculation for `dandi ls`","message":"I believe it was a change recently introduced by @TheChymera (I could be wrong) which lead to compute of the digest for any file while calling `dandi ls`.  That makes it long invocation and forbids use on opt of `datalad-fuse` for efficient sparse access.\n\nWe should not by default cause digest computation!\n\ndemo:\n\n```\n❯ dandi ls sub-YutaMouse20_ses-YutaMouse20-140321_behavior+ecephys.nwb\n2022-12-19 13:15:14,380 [ WARNING] A newer version (0.47.0) of dandi/dandi-cli is available. You are using 0.46.6+221.g476f5afa\n2022-12-19 13:15:16,182 [    INFO] Calculating digest for sub-YutaMouse20_ses-YutaMouse20-140321_behavior+ecephys.nwb\n^C^C^C^C[]\n2022-12-19 13:17:39,188 [    INFO] Logs saved in /home/yoh/.cache/dandi-cli/log/20221219181513Z-1447909.log\n\nAborted!\ndandi ls sub-YutaMouse20_ses-YutaMouse20-140321_behavior+ecephys.nwb  3.73s user 1.46s system 3% cpu 2:27.32 total\n```\n\nfor the reference -- here is how it looked with the released version:\n\n```\n❯ dandi ls sub-YutaMouse20_ses-YutaMouse20-140321_behavior+ecephys.nwb\n2022-12-19 13:19:30,745 [ WARNING] A newer version (0.47.0) of dandi/dandi-cli is available. You are using 0.46.6\n/home/yoh/proj/dandi/dandi-cli-master/venvs/dev3/lib/python3.10/site-packages/hdmf/spec/namespace.py:531: UserWarning: Ignoring cached namespace 'hdmf-common' version 1.3.0 because version 1.5.1 is already loaded.\n  warn(\"Ignoring cached namespace '%s' version %s because version %s is already loaded.\"\n/home/yoh/proj/dandi/dandi-cli-master/venvs/dev3/lib/python3.10/site-packages/hdmf/spec/namespace.py:531: UserWarning: Ignoring cached namespace 'core' version 2.2.5 because version 2.5.0 is already loaded.\n  warn(\"Ignoring cached namespace '%s' version %s because version %s is already loaded.\"\n- age: 207 days, 0:00:00\n  date_of_birth: null\n  experiment_description: null\n  experimenter:\n  - Yuta Senzai\n  genotype: SST-Cre\n  identifier: 23647bce-e14c-4498-a45d-8b5dcd572360\n  institution: NYU\n  keywords: null\n  lab: Buzsaki\n  nd_types:\n  - AnnotationSeries (15)\n  - DecompositionSeries\n  - Device (10)\n  - DynamicTable (2)\n  - ElectricalSeries (2)\n  - ElectrodeGroup (8)\n  - LFP\n  - ProcessingModule (2)\n  - SpatialSeries (2)\n  - Subject\n  - TimeIntervals\n  - Units\n  number_of_electrodes: 65\n  number_of_units: 22\n  nwb_version: 2.2.5\n  path: sub-YutaMouse20_ses-YutaMouse20-140321_behavior+ecephys.nwb\n  related_publications:\n  - DOI:10.1016/j.neuron.2016.12.011\n  session_description: Mouse in open exploration and theta maze.\n  session_id: YutaMouse20-140321\n  session_start_time: 2014-03-21 00:00:00-04:00\n  sex: null\n  size: 11694713998\n  species: Mus musculus\n  subject_id: YutaMouse20\n2022-12-19 13:19:37,328 [    INFO] Logs saved in /home/yoh/.cache/dandi-cli/log/20221219181930Z-1448963.log\n```","files":null}]}