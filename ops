{"version":2,"ops":[{"type":3,"author":{"id":"12cb25e6e3f19b53447b05d00d7d4d53c925c908"},"timestamp":1620316181,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDgzMzYzMTMxNw==","github-url":"https://github.com/dandi/dandi-cli/issues/618#issuecomment-833631317"},"message":"things currently missing i believe are: neural data types and nwb object identifier.","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1620319827,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDgzMzY4MTM3NA==","github-url":"https://github.com/dandi/dandi-cli/issues/618#issuecomment-833681374"},"message":"FWIW: those which are marked \"mandatory\" in https://github.com/dandi/dandi-cli/blob/master/dandi/organize.py#L27 are \"required\"   to be present.  So if for #69 we allow users to specify additional ones, they would be required and I expect organize to blow if they are not present.  (note that there is also \"mandatory_if_not_empty\")\n\n\"modalities\" (which is pretty much neural data types if I get it right) - might be absent in .nwb file e.g. containing only general study/subject metadata.  Do we mandate to have at least 1 in a file?  \n\nNot sure if \"organize\" though is the right place to \"require\" anything beyond what we hardcode or user specifies to be \"mandatory\". For anything else it should be the \"validation\".","files":null},{"type":3,"author":{"id":"12cb25e6e3f19b53447b05d00d7d4d53c925c908"},"timestamp":1620319995,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDgzMzY4MzI5NQ==","github-url":"https://github.com/dandi/dandi-cli/issues/618#issuecomment-833683295"},"message":"this is about being able to recreate the filename from the metadata on the server. this is not about mandatory or whether that field is present in the file or not, but any part that's extracted from an nwb file to evaluate for organize should be stored in the metadata record.","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1620320297,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDgzMzY4Njg1OQ==","github-url":"https://github.com/dandi/dandi-cli/issues/618#issuecomment-833686859"},"message":"then schema should mandate having those fields, validate guarantee it, and  `organize` could \"double-ensure\" by first running validation on metadata extracted from each file before considering it.  But then schema also should somehow encode that some are required for some neural data types and not the other (e.g. `probe_id`).","files":null},{"type":3,"author":{"id":"12cb25e6e3f19b53447b05d00d7d4d53c925c908"},"timestamp":1620320658,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDgzMzY5MTExMA==","github-url":"https://github.com/dandi/dandi-cli/issues/618#issuecomment-833691110"},"message":"for mandating in the schema, we should then create NWBAsset after all. many of these fields are not relevant to the generic asset metadata.","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1620321111,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDgzMzY5NjIzOQ==","github-url":"https://github.com/dandi/dandi-cli/issues/618#issuecomment-833696239"},"message":"and sorry -- I think took the initial issue a bit incorrectly.  I agree that we indeed should have that metadata in the schema, although as mentioned above, \"required\" conditioning would be tricky in particular since neural data types are also tricky on their own. \nRe `NWBAsset` -- I think `obj_id` is the only one.  But imho it could become `file_identifier: str` of some kind.  For nwb - object_id. For any other we could just default to use of one of the digests.  \"modalities\" - we would need to harmonize anyways even for BIDS.","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1620321200,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDgzMzY5NzIxOQ==","github-url":"https://github.com/dandi/dandi-cli/issues/618#issuecomment-833697219"},"message":"The idea behind \"file_identifier\" -- asset id is minted upon any change (metadata/whatnot). \"file_identifier\" might help to track \"identity\" of the file(/blob?)","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1758037946,"metadata":{"github-id":"IC_kwDODBZtRc7EqKXx","github-url":"https://github.com/dandi/dandi-cli/issues/618#issuecomment-3299386865"},"message":"FWIW, to the date we/users are still relying on `_obj-` \n\n\u003cdetails\u003e\n\u003csummary\u003eand at least 90 (out of 983, so ~10%) of dandisets use it\u003c/summary\u003e \n\n```shell\n$\u003e grep -l '_obj-' 00*/draft/assets.yaml | nl\n     1\t000004/draft/assets.yaml\n     2\t000005/draft/assets.yaml\n     3\t000010/draft/assets.yaml\n     4\t000013/draft/assets.yaml\n     5\t000015/draft/assets.yaml\n     6\t000037/draft/assets.yaml\n     7\t000053/draft/assets.yaml\n     8\t000054/draft/assets.yaml\n     9\t000126/draft/assets.yaml\n    10\t000173/draft/assets.yaml\n    11\t000217/draft/assets.yaml\n    12\t000226/draft/assets.yaml\n    13\t000228/draft/assets.yaml\n    14\t000246/draft/assets.yaml\n    15\t000296/draft/assets.yaml\n    16\t000337/draft/assets.yaml\n    17\t000399/draft/assets.yaml\n    18\t000408/draft/assets.yaml\n    19\t000453/draft/assets.yaml\n    20\t000491/draft/assets.yaml\n    21\t000529/draft/assets.yaml\n    22\t000540/draft/assets.yaml\n    23\t000549/draft/assets.yaml\n    24\t000562/draft/assets.yaml\n    25\t000572/draft/assets.yaml\n    26\t000575/draft/assets.yaml\n    27\t000624/draft/assets.yaml\n    28\t000637/draft/assets.yaml\n    29\t000675/draft/assets.yaml\n    30\t000681/draft/assets.yaml\n    31\t000711/draft/assets.yaml\n    32\t000732/draft/assets.yaml\n    33\t000766/draft/assets.yaml\n    34\t000894/draft/assets.yaml\n    35\t000896/draft/assets.yaml\n    36\t000944/draft/assets.yaml\n    37\t000946/draft/assets.yaml\n    38\t000951/draft/assets.yaml\n    39\t000978/draft/assets.yaml\n    40\t000979/draft/assets.yaml\n    41\t000983/draft/assets.yaml\n    42\t000984/draft/assets.yaml\n    43\t000989/draft/assets.yaml\n    44\t001025/draft/assets.yaml\n    45\t001032/draft/assets.yaml\n    46\t001033/draft/assets.yaml\n    47\t001034/draft/assets.yaml\n    48\t001035/draft/assets.yaml\n    49\t001047/draft/assets.yaml\n    50\t001050/draft/assets.yaml\n    51\t001074/draft/assets.yaml\n    52\t001076/draft/assets.yaml\n    53\t001082/draft/assets.yaml\n    54\t001092/draft/assets.yaml\n    55\t001193/draft/assets.yaml\n    56\t001199/draft/assets.yaml\n    57\t001201/draft/assets.yaml\n    58\t001202/draft/assets.yaml\n    59\t001210/draft/assets.yaml\n    60\t001211/draft/assets.yaml\n    61\t001261/draft/assets.yaml\n    62\t001266/draft/assets.yaml\n    63\t001269/draft/assets.yaml\n    64\t001271/draft/assets.yaml\n    65\t001272/draft/assets.yaml\n    66\t001273/draft/assets.yaml\n    67\t001274/draft/assets.yaml\n    68\t001276/draft/assets.yaml\n    69\t001277/draft/assets.yaml\n    70\t001284/draft/assets.yaml\n    71\t001374/draft/assets.yaml\n    72\t001375/draft/assets.yaml\n    73\t001430/draft/assets.yaml\n    74\t001445/draft/assets.yaml\n    75\t001460/draft/assets.yaml\n    76\t001469/draft/assets.yaml\n    77\t001515/draft/assets.yaml\n    78\t001516/draft/assets.yaml\n    79\t001517/draft/assets.yaml\n    80\t001518/draft/assets.yaml\n    81\t001521/draft/assets.yaml\n    82\t001525/draft/assets.yaml\n    83\t001526/draft/assets.yaml\n    84\t001536/draft/assets.yaml\n    85\t001541/draft/assets.yaml\n    86\t001543/draft/assets.yaml\n    87\t001544/draft/assets.yaml\n    88\t001545/draft/assets.yaml\n    89\t001549/draft/assets.yaml\n    90\t001554/draft/assets.yaml\n```\n\u003c/details\u003e\n\nthis relates to ongoing nwb2bids effort, thus attn @CodyCBakerPhD . I do not think we should fix up our `organize` into ad-hoc DANDI layout but concentrate on effort there so we could come up with more descriptive and BIDS compliant filenames. \n\nDoing issues cleanup: For now marking as `wontfix` but if someone approaches with implementation we could reopen.","files":null},{"type":4,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1758037947,"metadata":{"github-id":"CE_lADODBZtRc40T-StzwAAAASYBIf9"},"status":2},{"type":5,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1758037954,"metadata":{"github-id":"LE_lADODBZtRc40T-StzwAAAASYBJAq"},"added":["wontfix"],"removed":[]}]}