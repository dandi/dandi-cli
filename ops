{"version":2,"ops":[{"type":6,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1612888009,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdElzc3VlRWRpdDo0OTEzNDIyMDk="},"target":"589e587ce9586a1b62867d0f516363d1aa86a207da992e1906e0c0b6c0e50657","message":"see #369 for related discussion - I think we might need to separate notion of a local AssetMeta and server side AssetMeta to be able to validate locally etc\n\nATM validation (during upload) fails with\n\n```\ndrogon:/mnt/backup/dandi/dandisets/000007\n$\u003e DANDI_DEVEL=1 dandi upload -i dandi-api --validation ignore\n2021-02-09 11:18:04,011 [    INFO] Found 55 files to consider\nPATH                                                    SIZE         ERRORS     UPLOAD STATUS                MESSAGE                                                            \ndandiset.yaml                                           1.0 kB                         skipped               should be edited online                                            \nsub-anm00314746/sub-anm00314746_ses-20151020T093604.nwb 1.4 MB         8               skipped               failed to extract metadata: badly formed hexadecimal UUID string   \nsub-anm00314746/sub-anm00314746_ses-20151021T112541.nwb 1.3 MB         8               skipped               failed to extract metadata: badly formed hexadecimal UUID string   \nsub-anm00314746/sub-anm00314746_ses-20151022T151738.nwb 1.1 MB         8               skipped               failed to extract metadata: badly formed hexadecimal UUID string   \nsub-anm00314756/sub-anm00314756_ses-20151020T194211.nwb 1.1 MB         8               skipped               failed to extract metadata: badly formed hexadecimal UUID string   \nsub-anm00314756/sub-anm00314756_ses-20151023T141029.nwb 408.8 kB       8               skipped               failed to extract metadata: badly formed hexadecimal UUID string  \n...\n```\n\n```\n$\u003e dandi --version\n0.10.0+125.g4b277ae.dirty\n```","files":null},{"type":2,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1612887896,"metadata":{"github-id":"MDE3OlJlbmFtZWRUaXRsZUV2ZW50NDMxMDEyMTU0OQ=="},"title":"upload: dandi-api -- upload fails likely because we have no UUID on local side","was":"upload: dandi-api -- upload fails likely because we have no UUID on local side"},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1612887988,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDc3NjA2MzYyOA==","github-url":"https://github.com/dandi/dandi-cli/issues/370#issuecomment-776063628"},"message":"I misunderstood -- it was not per se about validation but rather about upload altogether -- those files were skipped and not uploaded at all.... I wonder how it worked out in the tests instance.","files":null},{"type":3,"author":{"id":"364914f8b1c8a9131d300bf2978e4ffe2ff1aeeb"},"timestamp":1612890632,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDc3NjA5NDI0Nw==","github-url":"https://github.com/dandi/dandi-cli/issues/370#issuecomment-776094247"},"message":"@yarikoptic It appears that those files fail to validate because they contain \"identifier\" fields whose values are not UUIDs.  For example, the identifier in `sub-anm00314746_ses-20151020T093604.nwb` is `anm00314746_2015-10-20 09:36:04`.","files":null},{"type":6,"author":{"id":"364914f8b1c8a9131d300bf2978e4ffe2ff1aeeb"},"timestamp":1612890632,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdElzc3VlQ29tbWVudEVkaXQ6NDMzNjA2MzIw"},"target":"8f84553a9a6d4078daffe3bf0ac3fd4c1a518944f12a1daf63a7b31e305b2b71","message":"@yarikoptic It appears that those files fail to validate, not because fields are missing, but because they contain \"identifier\" fields whose values are not UUIDs.  For example, the identifier in `sub-anm00314746_ses-20151020T093604.nwb` is `anm00314746_2015-10-20 09:36:04`.","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1612896205,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDc3NjE1NTUxNw==","github-url":"https://github.com/dandi/dandi-cli/issues/370#issuecomment-776155517"},"message":"yikes... In light of #369 I think we should not mint identifiers for them at all, and upload with metadata without them","files":null},{"type":3,"author":{"id":"364914f8b1c8a9131d300bf2978e4ffe2ff1aeeb"},"timestamp":1612896332,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDc3NjE1NjgwMQ==","github-url":"https://github.com/dandi/dandi-cli/issues/370#issuecomment-776156801"},"message":"@yarikoptic So should dandi-cli just discard the identifier field from the extracted metadata?","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1612896559,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDc3NjE1OTAzNw==","github-url":"https://github.com/dandi/dandi-cli/issues/370#issuecomment-776159037"},"message":"yes, for now just `pop` it during upload... we will distill a more proper way","files":null},{"type":4,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1612901428,"metadata":{"github-id":"MDExOkNsb3NlZEV2ZW50NDMxMTIyMzYzNw=="},"status":2}]}