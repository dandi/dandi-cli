{"version":2,"ops":[{"type":3,"author":{"id":"12cb25e6e3f19b53447b05d00d7d4d53c925c908"},"timestamp":1618233940,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDgxNzgwOTc3Nw==","github-url":"https://github.com/dandi/dandi-cli/issues/554#issuecomment-817809777"},"message":"@jwodder - i would stay away from a notion of a folder and simply consider a filter on a set of assets. note that the CLI will not need to support anything in girder, so any future support should be from the perspective of the api server models. i think any refactor at this point should eliminate girder from consideration.\n\ni would also encourage us not to support anything that has gui.dandiarchive.org and instead focus on our api surface and any identifiers we release. in the ui we should provide a download link for a folder via a path regex, but the client should not think of it as a folder (just a returned collection of asset objects).","files":null},{"type":3,"author":{"id":"364914f8b1c8a9131d300bf2978e4ffe2ff1aeeb"},"timestamp":1618234276,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDgxNzgxNDA1Nw==","github-url":"https://github.com/dandi/dandi-cli/issues/554#issuecomment-817814057"},"message":"@satra \n\n\u003e i think any refactor at this point should eliminate girder from consideration.\n\nThat's only viable if the refactor occurs after we remove Girder support from the codebase.  Do we know yet when that's going to happen?","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1618235713,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDgxNzgzMjgwNA==","github-url":"https://github.com/dandi/dandi-cli/issues/554#issuecomment-817832804"},"message":"\u003e That's only viable if the refactor occurs after we remove Girder support from the codebase.\n\nI think so too.\n\n\u003e Do we know yet when that's going to happen?\n\nany moment now I guess ;) we should finalize migration roadmap/dates today at 2pm meetup.\n\nAs for @satra s\n\n\u003e i would stay away from a notion of a folder and simply consider a filter on a set of assets\n\non one hand - yes.  On another -- we should decide on what behavior of the client would be in delivering those assets to local file system .  With a folder - they are all placed into that folder.  With a list of assets coming from various folders - not that clear.","files":null},{"type":3,"author":{"id":"12cb25e6e3f19b53447b05d00d7d4d53c925c908"},"timestamp":1618235997,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDgxNzgzNjYwNw==","github-url":"https://github.com/dandi/dandi-cli/issues/554#issuecomment-817836607"},"message":"\u003e  With a folder - they are all placed into that folder. With a list of assets coming from various folders - not that clear.\n\ni would say the CLI should first evaluate if there are clashes on path location. (i'm assuming future search results across dandisets).  for now, since the path search is only within a dandiset, it can just create the locations as referred to by path. (for example a search on behavior may return multiple assets across participants).\n\nso the CLI should respect the path info returned and deal with that.","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1619705817,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDgyOTI3NjAxOQ==","github-url":"https://github.com/dandi/dandi-cli/issues/554#issuecomment-829276019"},"message":"re clashes: it would lead to problems with consecutive invocations -- e.g first - no clashes, then reran - and getting clashes, need folders - what to do with old assets -- move? (then could break analysis scripts) etc... makes it ambiguous etc.  We already have a similar problem with incremental `organize`, so better stay away from doing \"clashes resolution\" IMHO ;)\n\nAt this point in time, directories are present all around -- web UI, datalad dandisets, we have API call to list directory content etc.  So I would cater to those immediate use-cases ATM.  For a loose collection of assets from various dandisets -- we would decide what to do whenever we get there.  E.g. there could be a mode which downloads assets into filenames based on `asset.identifier`, or file path gets formatted based on the metadata record (pretty much like `git annex view`) thus allowing arbitrary hierarchy composition, or mode which would do what `organize` does in composing the path to organize into (and that is the one which takes care about clashes). But overall -- there could be various modes (in the future)","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1619706523,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDgyOTI4NTczMg==","github-url":"https://github.com/dandi/dandi-cli/issues/554#issuecomment-829285732"},"message":"further thoughts: whenever we get those \"meta-dandisets\" functionality (create a dandiset from assets of other dandisets eg. based on a search) -- if  we create them on dandi-api level and create a new dandiset, things would still work since it would again be just a dandiset.  If we are to make it possible on dandi-cli level - there could then be `SearchResultURL` which would provide a list of assets (and we add aforementioned modes to give options on how to present them locally, without establishing a dandiset).\n\nSo, overall IMHO @jwodder 's proposal is ok with me and we could extend it in the future if it would be necessary.","files":null},{"type":4,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1619817926,"metadata":{"github-id":"MDExOkNsb3NlZEV2ZW50NDY3MjA5MTEyNA=="},"status":2}]}