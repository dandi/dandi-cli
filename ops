{"version":2,"ops":[{"type":1,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1651183343,"metadata":{"github-id":"I_kwDODBZtRc5IreQP","github-url":"https://github.com/dandi/dandi-cli/issues/988","origin":"github"},"title":"bids validation -- report error on invalid json of dataset_description.json","message":"happened due to https://github.com/dandisets/000058/issues/1 .\n\n```\n$\u003e dandi validate-bids derivatives/fitparmms/Siemens/sub-MITU01/ses-MR/anat/*nii.gz\n2022-04-28 17:50:00,802 [    INFO] Logs saved in /home/yoh/.cache/dandi-cli/log/20220428214959Z-1778025.log\nError: Expecting ',' delimiter: line 13 column 3 (char 172)\n```\nand even looking into that .log file it is not clear on what is going on, in what file etc.  Had to go to pdb to figure it out\n```\nlena:/tmp/dandisets/000058\n$\u003e dandi --pdb validate-bids derivatives/fitparmms/Siemens/sub-MITU01/ses-MR/anat/*nii.gz   \n2022-04-28 17:50:36,028 [    INFO] Logs saved in /home/yoh/.cache/dandi-cli/log/20220428215034Z-1778174.log\nTraceback (most recent call last):\n  File \"/home/yoh/proj/dandi/dandi-cli-master/venvs/dev3/bin/dandi\", line 33, in \u003cmodule\u003e\n    sys.exit(load_entry_point('dandi', 'console_scripts', 'dandi')())\n  File \"/home/yoh/proj/dandi/dandi-cli-master/venvs/dev3/lib/python3.9/site-packages/click/core.py\", line 1128, in __call__\n    return self.main(*args, **kwargs)\n  File \"/home/yoh/proj/dandi/dandi-cli-master/venvs/dev3/lib/python3.9/site-packages/click/core.py\", line 1053, in main\n    rv = self.invoke(ctx)\n  File \"/home/yoh/proj/dandi/dandi-cli-master/venvs/dev3/lib/python3.9/site-packages/click/core.py\", line 1659, in invoke\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\n  File \"/home/yoh/proj/dandi/dandi-cli-master/venvs/dev3/lib/python3.9/site-packages/click/core.py\", line 1395, in invoke\n    return ctx.invoke(self.callback, **ctx.params)\n  File \"/home/yoh/proj/dandi/dandi-cli-master/venvs/dev3/lib/python3.9/site-packages/click/core.py\", line 754, in invoke\n    return __callback(*args, **kwargs)\n  File \"/home/yoh/proj/dandi/dandi-cli-master/venvs/dev3/lib/python3.9/site-packages/click/decorators.py\", line 38, in new_func\n    return f(get_current_context().obj, *args, **kwargs)\n  File \"/home/yoh/proj/dandi/dandi-cli-master/dandi/cli/base.py\", line 102, in wrapper\n    return f(*args, **kwargs)\n  File \"/home/yoh/proj/dandi/dandi-cli-master/dandi/cli/cmd_validate.py\", line 33, in validate_bids\n    validate_bids_(\n  File \"/home/yoh/proj/dandi/dandi-cli-master/dandi/validate.py\", line 36, in validate_bids\n    return validate_bids_(\n  File \"/home/yoh/proj/dandi/dandi-cli-master/dandi/bids_validator_xs.py\", line 699, in validate_bids\n    bids_schema_dir = select_schema_dir(\n  File \"/home/yoh/proj/dandi/dandi-cli-master/dandi/bids_validator_xs.py\", line 614, in select_schema_dir\n    dataset_info = json.load(f)\n  File \"/usr/lib/python3.9/json/__init__.py\", line 293, in load\n    return loads(fp.read(),\n  File \"/usr/lib/python3.9/json/__init__.py\", line 346, in loads\n    return _default_decoder.decode(s)\n  File \"/usr/lib/python3.9/json/decoder.py\", line 337, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n  File \"/usr/lib/python3.9/json/decoder.py\", line 353, in raw_decode\n    obj, end = self.scan_once(s, idx)\njson.decoder.JSONDecodeError: Expecting ',' delimiter: line 13 column 3 (char 172)\n\n\u003e /usr/lib/python3.9/json/decoder.py(353)raw_decode()\n-\u003e obj, end = self.scan_once(s, idx)\n(Pdb) up\n```\n\nideally should have reported an error 27 JSON_INVALID from \"Validator issues\" instead of just crash","files":null}]}