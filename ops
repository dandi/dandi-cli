{"version":2,"ops":[{"type":1,"author":{"id":"5abab4dc6d21919c4a74bdcfda7d268fdd9b9da7"},"timestamp":1723494774,"metadata":{"github-id":"I_kwDODBZtRc6SvL0R","github-url":"https://github.com/dandi/dandi-cli/issues/1481","origin":"github"},"title":"failed to extract metadata: UnboundLocalError: local variable 'value' referenced before assignment","message":"When trying to upload a dataset, I get a number of errors regarding a local variable \"value\" and a failure to extract metadata. \n\nTraceback below\n\n```\nTraceback (most recent call last):\n  File \"/home/nrsc/.local/lib/python3.10/site-packages/dandi/upload.py\", line 346, in process_path\n    metadata = dfile.get_metadata(\n  File \"/home/nrsc/.local/lib/python3.10/site-packages/dandi/files/bases.py\", line 484, in get_metadata\n    metadata = nwb2asset(self.filepath, digest=digest)\n  File \"/home/nrsc/.local/lib/python3.10/site-packages/dandi/metadata/nwb.py\", line 150, in nwb2asset\n    asset_md = prepare_metadata(metadata)\n  File \"/home/nrsc/.local/lib/python3.10/site-packages/dandi/metadata/core.py\", line 76, in prepare_metadata\n    return extract_model(models.BareAsset, metadata)\n  File \"/home/nrsc/.local/lib/python3.10/site-packages/dandi/metadata/util.py\", line 511, in extract_model\n    value = kwargs.get(field, extract_field(field, metadata))\n  File \"/home/nrsc/.local/lib/python3.10/site-packages/dandi/metadata/util.py\", line 628, in extract_field\n    return FIELD_EXTRACTORS[field](metadata)\n  File \"/home/nrsc/.local/lib/python3.10/site-packages/dandi/metadata/util.py\", line 522, in func\n    m = extract_model(\n  File \"/home/nrsc/.local/lib/python3.10/site-packages/dandi/metadata/util.py\", line 511, in extract_model\n    value = kwargs.get(field, extract_field(field, metadata))\n  File \"/home/nrsc/.local/lib/python3.10/site-packages/dandi/metadata/util.py\", line 628, in extract_field\n    return FIELD_EXTRACTORS[field](metadata)\n  File \"/home/nrsc/.local/lib/python3.10/site-packages/dandi/metadata/util.py\", line 477, in extract_species\n    f\"Cannot interpret species field: {value}. Please \"\nUnboundLocalError: local variable 'value' referenced before assignment\n\n```\nAny help would be appreciated.\n\nCheers,\n\nScott","files":null}]}