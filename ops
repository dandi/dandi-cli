{"version":2,"ops":[{"type":1,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1617726787,"metadata":{"github-id":"MDU6SXNzdWU4NTE1OTkxOTA=","github-url":"https://github.com/dandi/dandi-cli/issues/534","origin":"github"},"title":"ls: -r is \"insufficient\" to get detailed information about assets in a folder","message":"ATM\n```\n(git)lena:~/proj/dandi/dandi-cli-master[master]git\n$\u003e dandi ls -f json_pp -r 'https://gui-beta-dandiarchive-org.netlify.app/#/dandiset/000003/draft/files?location=sub-YutaMouse20%2F'       \n{\n  \"asset_count\": 101,\n  \"created\": \"2021-04-05T15:25:03.799071Z\",\n  \"metadata\": {\n ...\n  \"path\": \"000003\",\n  \"size\": 2559248010229,\n  \"version\": \"draft\"\n}\n{\n  \"asset_id\": \"ca90f128-4e55-4d5b-8f0e-647bd2cf78b2\",\n  \"created\": \"2021-04-05T15:29:02.570155Z\",\n  \"modified\": \"2021-04-05T15:29:02.570211Z\",\n  \"path\": \"sub-YutaMouse20/sub-YutaMouse20_ses-YutaMouse20-140327_behavior+ecephys.nwb\",\n  \"size\": 8417855886\n}\n...\n```\nso we do provide detailed record on the dandiset but not for each individual asset.  I think we should provide a way to make individual asset metadata returned as well. \n\nObviously then a single `-r` cannot tell between the two desires (just a list of assets from end point as API returns or query/include metadata per asset).  We could have made it into an option `--recursive `None`,\"auto\",\"assets\"`  (we tend to go for such style in datalad more these days acknowledging that flags eventually become insufficient) but I think it would make unnecessarily harder to split `-r|--recursive` from positional arguments (would require `--` in cases where value is not provided).\n\nSo let's go for an explicit `--metadata api,all,dandiset,assets` ?  `api` -- just return what API returns for a given case, and that would be current behavior. `all`/`dandiset`/`assets` -- would query metadata (for the dandiset or an asset) if no `metadata` in the corresponding record. \n\nI am open to other ideas as well. WDYT @jwodder @satra ?","files":null}]}