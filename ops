{"version":2,"ops":[{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1620685307,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDgzNzQyOTE2OA==","github-url":"https://github.com/dandi/dandi-cli/issues/625#issuecomment-837429168"},"message":"\"different ways\", \"optional injections\"... I am not sure what you are proposing @satra, could you please detail/elaborate. \n\nNote that it is for such use cases and so we could efficiently cache\n\n```python\nwith open(\"../tmp/schema/0.3.0/dandiset.json\") as fp:\n    schema = json.load(fp)\n```\n\nI would prefer not to mutate an already released version","files":null},{"type":3,"author":{"id":"12cb25e6e3f19b53447b05d00d7d4d53c925c908"},"timestamp":1620686908,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDgzNzQ1MzAwNA==","github-url":"https://github.com/dandi/dandi-cli/issues/625#issuecomment-837453004"},"message":"jsonschema will give the first error only and stop. pydantic will give multiple errors, but not being used on the server. this was simply an exercise to try and get to understand what errors exist. \n\nso we may want to indicate to the dataset creator through different means about validity of the metadata and on different interfaces tell them what to fix.","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1626385252,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDg4MTAzMDkyNA==","github-url":"https://github.com/dandi/dandi-cli/issues/625#issuecomment-881030924"},"message":"ok, so we should \n\n- for `validate` function/command add `--against {auto,nwb,dandischema,jsonschema}` (later with `bids` as well) with default `auto` to validate against underlying format (e.g. nwb files) and dandischema\n- in `upload` code, also use the same validate with `auto` to pass to `validate`.  ATM we just call `validate_file` which does only nwb level validation. But later we `get_asset_metadata` to provide for an asset, so we should have validated it too.\n\nOr do you think we should close our eyes on nwb validation during upload @satra and just validate against `dandischema`?","files":null},{"type":3,"author":{"id":"12cb25e6e3f19b53447b05d00d7d4d53c925c908"},"timestamp":1626828035,"metadata":{"github-id":"IC_kwDODBZtRc40rbG_","github-url":"https://github.com/dandi/dandi-cli/issues/625#issuecomment-883798463"},"message":"for now we validate should try to open the file and make sure the metadata conforms to dandischema. but the cli options, we should think through before making available.  but i don't know what nwb validate is buying us right now. is there a way to include what we are validating in nwb using the metadata?","files":null},{"type":5,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1659125893,"metadata":{"github-id":"LE_lADODBZtRc40oyTVzwAAAAGmtkhZ"},"added":["schema"],"removed":[]},{"type":5,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1659125898,"metadata":{"github-id":"LE_lADODBZtRc40oyTVzwAAAAGmtkm6"},"added":["cmd-validate"],"removed":[]}]}