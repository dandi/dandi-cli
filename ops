{"version":2,"ops":[{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1600355837,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY5NDMwNjE1Nw==","github-url":"https://github.com/dandi/dandi-cli/issues/243#issuecomment-694306157"},"message":"actually it might be much easier --- we don't need to tune `get_dandiset_and_assets` or add a new command -- just a devel option `--assetstore` option to `download` command and do `cp` instead of download if that one is found in the assetstore.  \nRecords returned by get_dandiset_and_assets already include `girder.id` :\n\n```shell\n$\u003e dandi ls -r https://dandiarchive.org/dandiset/000027/draft      \n2020-09-17 11:15:53,755 [    INFO] Traversing remote dandisets (000027) recursively\n- ...\n- attrs:\n    ctime: '2020-07-21T22:00:36.362000+00:00'\n    mtime: '2020-07-21T17:31:55.283394-04:00'\n    size: 18792\n  girder:\n    id: 5f176584f63d62e1dbd06946\n...\n  name: sub-RAT123.nwb\n  path: /sub-RAT123/sub-RAT123.nwb\n...\n  type: file\n```\nso it will just be a helper function in download to resolve girder id to the path in the asset store, ideally cached.","files":null},{"type":3,"author":{"id":"364914f8b1c8a9131d300bf2978e4ffe2ff1aeeb"},"timestamp":1600361682,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY5NDM2NDMyMQ==","github-url":"https://github.com/dandi/dandi-cli/issues/243#issuecomment-694364321"},"message":"Is it really necessary to implement this as a download option?  It's not something that any normal user would need, and it would probably be cleaner if the whole thing was just a script that used dandi as a library.","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1600362059,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY5NDM2NzYyMg==","github-url":"https://github.com/dandi/dandi-cli/issues/243#issuecomment-694367622"},"message":"Sure -- could just be an outside script.  I just thought it might be simpler to just implement it within `dandi-cli` as a `DANDI_DEVEL` option.","files":null},{"type":3,"author":{"id":"364914f8b1c8a9131d300bf2978e4ffe2ff1aeeb"},"timestamp":1600362593,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY5NDM2OTkxMQ==","github-url":"https://github.com/dandi/dandi-cli/issues/243#issuecomment-694369911"},"message":"Is there a recommended way to get a list of all Dandiset IDs?  I know I can use Girder's `/dandi` endpoint, but it lacks decent pagination support, and I'm not sure if one of the other API components has a better endpoint.","files":null},{"type":6,"author":{"id":"364914f8b1c8a9131d300bf2978e4ffe2ff1aeeb"},"timestamp":1600362593,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdElzc3VlQ29tbWVudEVkaXQ6NDAwNzg5NzQw"},"target":"a4e79ed8e5c7f646f5d4e38e764f32ac00c6b96d5ecebbc8aa000334aab6d64d","message":"Is there a recommended way to get a list of all Dandiset IDs?  I know I can use Girder's `/dandi` endpoint, but it lacks decent pagination support, and I'm not sure if one of the other API components has a better endpoint.\n\nAlso, should there be some sort of handling of Dandiset versions?","files":null},{"type":3,"author":{"id":"364914f8b1c8a9131d300bf2978e4ffe2ff1aeeb"},"timestamp":1600363400,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY5NDM4MDQ4Nw==","github-url":"https://github.com/dandi/dandi-cli/issues/243#issuecomment-694380487"},"message":"Problem: The Python on drogon is 3.5, yet this library requires 3.6.","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1600368264,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY5NDQyNzA1Mw==","github-url":"https://github.com/dandi/dandi-cli/issues/243#issuecomment-694427053"},"message":"Please just install miniconda in your `HOME` with any suitable Python.\n\nre list of dandisets: \n```\nIn [11]: from dandi import girder                                                                                \n\nIn [12]: cl = girder.get_client(\"https://girder.dandiarchive.org\")                                               \n\nIn [13]: [r['name'] for r in cl.listFolder(\"5e59bb0af19e820ab6ea6c62\", parentFolderType='collection')]           \nOut[13]: \n['000003',\n '000004',\n '000005',\n '000006',\n '000007',\n '000008',\n '000009',\n '000010',\n '000011',\n '000012',\n '000013',\n '000015',\n...\n```","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1600368328,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY5NDQyNzY0Nw==","github-url":"https://github.com/dandi/dandi-cli/issues/243#issuecomment-694427647"},"message":"re miniconda: cut pasteable example from http://handbook.datalad.org/en/latest/intro/installation.html?highlight=hpc#linux-machines-with-no-root-access-e-g-hpc-systems\n```\n$ wget https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh\n$ bash Miniconda3-latest-Linux-x86_64.sh\n# acknowledge license, keep everything at default\n$ conda install -c conda-forge datalad\n```","files":null},{"type":3,"author":{"id":"364914f8b1c8a9131d300bf2978e4ffe2ff1aeeb"},"timestamp":1600370750,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY5NDQ0ODYxOA==","github-url":"https://github.com/dandi/dandi-cli/issues/243#issuecomment-694448618"},"message":"The asset for `000020/sub-746220081/sub-746220081_ses-751268829_icephys.nwb` (which should be at `girder-assetstore/47/dc/47dc1e65b27441f28d5e7d9cf1109c12`) appears to be missing from the backup for some reason, making the script fail.  Should failures of the `cp` command just be ignored?","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1600387806,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY5NDU2NzIwNw==","github-url":"https://github.com/dandi/dandi-cli/issues/243#issuecomment-694567207"},"message":"hm... for now please add an option for that -- for the \"investigate metadata compliance\" it is ok to miss a few files. BUT eventually we need to figure it out. (backup runs daily, so it might be that there were some changes to that dandiset today? will check later)","files":null},{"type":3,"author":{"id":"364914f8b1c8a9131d300bf2978e4ffe2ff1aeeb"},"timestamp":1600433936,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY5NDg1MjMzMg==","github-url":"https://github.com/dandi/dandi-cli/issues/243#issuecomment-694852332"},"message":"The script has finished running, taking 20 minutes and 22 seconds.  Should I commit it to a top-level `tools/` directory in this repository or place it somewhere else?","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1600440874,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY5NDkxNjM5OQ==","github-url":"https://github.com/dandi/dandi-cli/issues/243#issuecomment-694916399"},"message":"awesome! yes please - commit it under `tools/`.\n\nDue to the https://github.com/dandi/dandiarchive/issues/491 though we are lacking dandiset.yaml in each one of those.  Could you please adjust the script to use `dandi download --download dandiset.yaml` to instantiate all of them so we get them \"more complete\"?","files":null},{"type":3,"author":{"id":"364914f8b1c8a9131d300bf2978e4ffe2ff1aeeb"},"timestamp":1600443029,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY5NDkzNTU5Mg==","github-url":"https://github.com/dandi/dandi-cli/issues/243#issuecomment-694935592"},"message":"Done.  Pull request: https://github.com/dandi/dandi-cli/pull/244","files":null},{"type":4,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1600699696,"metadata":{"github-id":"MDExOkNsb3NlZEV2ZW50Mzc4OTA3Njc0OA=="},"status":2}]}