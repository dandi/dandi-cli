{"version":2,"ops":[{"type":3,"author":{"id":"364914f8b1c8a9131d300bf2978e4ffe2ff1aeeb"},"timestamp":1597353263,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY3MzcxMzc2MA==","github-url":"https://github.com/dandi/dandi-cli/issues/198#issuecomment-673713760"},"message":"We could do what Safari and Firefox do: When downloading to `a/blah.nwb`, create a directory `a/blah.nwb.download` containing the output file plus a file of metadata about the download (checksum etc.).  If we need a lockfile, we can put it in the directory as well.  When the download is finished, move the file to its final location and delete the rest of the directory.","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1597931274,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY3NzY3NTA3Mw==","github-url":"https://github.com/dandi/dandi-cli/issues/198#issuecomment-677675073"},"message":"Sounds good @jwodder !","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1600116833,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY5MjMwODM3Ng==","github-url":"https://github.com/dandi/dandi-cli/issues/198#issuecomment-692308376"},"message":"Please implement this one for current master.  This logic is agnostic of what is underlying service (API vs girder) so we should be good even after going API all the way.","files":null},{"type":3,"author":{"id":"364914f8b1c8a9131d300bf2978e4ffe2ff1aeeb"},"timestamp":1600272801,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY5MzUxMDYyNw==","github-url":"https://github.com/dandi/dandi-cli/issues/198#issuecomment-693510627"},"message":"* What should happen if the downloaded file already exists (in its final location, not in a special `.download` folder) at the start of a download?\n\n* What should happen if another process already has a lock on the lockfile?","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1600274211,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY5MzUyMzY4NA==","github-url":"https://github.com/dandi/dandi-cli/issues/198#issuecomment-693523684"},"message":"\u003e What should happen if the downloaded file already exists (in its final location, not in a special .download folder) at the start of a download?\n\ndownload into `.download` folder, when ready to replace existing ones - unlink  existing, and move new download into its place\n\n\u003e What should happen if another process already has a lock on the lockfile?\n\nraise an exception.  We already have `LockingError` which we use in girder related code, I think it is ok to reuse it for now - later girder code would go away.","files":null},{"type":3,"author":{"id":"364914f8b1c8a9131d300bf2978e4ffe2ff1aeeb"},"timestamp":1600874317,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY5NzUyODAzOQ==","github-url":"https://github.com/dandi/dandi-cli/issues/198#issuecomment-697528039"},"message":"Exactly what metadata should be stored in the directory and checked when resuming download?  Just the checksum for the complete file?","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1601060121,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY5OTA5NzYyOA==","github-url":"https://github.com/dandi/dandi-cli/issues/198#issuecomment-699097628"},"message":"Storing a checksum should be sufficient, but this issue PR does not necessarily should address resumed downloads (although could if only for API calls/downloader, girder will be gone anyways).","files":null},{"type":4,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1601649049,"metadata":{"github-id":"MDExOkNsb3NlZEV2ZW50MzgzNDI0NzgwNw=="},"status":2}]}