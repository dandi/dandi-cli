{"version":2,"ops":[{"type":1,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1657821721,"metadata":{"github-id":"I_kwDODBZtRc5Nypfj","github-url":"https://github.com/dandi/dandi-cli/issues/1059","origin":"github"},"title":"move: add ability to \"upload\"","message":"Use case brought up by @satra . In some cases local dandiset might not be fully sync'ed to remote one yet, and `move` is used. Then `move` might error out on some file which is not yet present on the server. We might want to consider adding an option to `upload` some files which are missing on the server. I have reservations though against combining that feature into `move` since `upload` does already have a good number of options (on validation, which files to select, etc) and exposing them to `move` would make it too overloaded and complicate interface.  WDYT @jwodder ?\n\nNB Interestingly it might error out with two different messages:\n\n```\n$\u003e dandi download dandi://dandi/000029@draft \nPATH                                             SIZE     DONE            DONE% CHECKSUM STATUS          MESSAGE   \ndandiset.yaml                                                                            done            updated   \nsub-anm369964/sub-anm369964_behavior+ecephys.nwb 7.7 MB   7.7 MB           100%    ok    done                      \nsub-anm369963/sub-anm369963_behavior+ecephys.nwb 6.4 MB   6.4 MB           100%    ok    done                      \nsub-anm369962/sub-anm369962_behavior+ecephys.nwb 6.6 MB   6.6 MB           100%    ok    done                      \nsample.json                                      40 Bytes 40 Bytes         100%    ok    done                      \nsub-RAT123/sub-RAT123_.nwb                       18.8 kB  18.8 kB          100%    ok    done                      \nSummary:                                         20.7 MB  20.7 MB                        6 done          1 updated \n                                                          100.00%                                                  \n2022-07-14 13:53:51,638 [    INFO] Logs saved in /home/yoh/.cache/dandi-cli/log/20220714175343Z-591857.log\n\n$\u003e cd 000029\n\n$\u003e dandi move sample.json sample-moved.json\n2022-07-14 13:54:07,521 [    INFO] Fetching list of assets for Dandiset 000029\nSOURCE      TARGET            LOCAL  REMOTE MESSAGE\nsample.json sample-moved.json Moved  Moved         \n2022-07-14 13:54:08,272 [    INFO] Logs saved in /home/yoh/.cache/dandi-cli/log/20220714175405Z-591968.log\n\n$\u003e echo data \u003e  newfile.dat\n\n$\u003e dandi move newfile.dat newfile-moved.dat\n2022-07-14 13:55:40,584 [    INFO] Fetching list of assets for Dandiset 000029\n2022-07-14 13:55:40,681 [    INFO] Logs saved in /home/yoh/.cache/dandi-cli/log/20220714175538Z-592308.log\nError: No asset at remote path 'newfile.dat'\n\n$\u003e echo data \u003e sub-anm369964/newfile.dat\n\n$\u003e dandi move sub-anm369964 sub-anm369964-moved \n2022-07-14 13:56:45,356 [    INFO] Fetching list of assets for Dandiset 000029\n2022-07-14 13:56:45,495 [    INFO] Logs saved in /home/yoh/.cache/dandi-cli/log/20220714175643Z-592564.log\nError: Mismatch between local and remote servers: asset 'sub-anm369964/newfile.dat' only exists locally\n```\n\nso we have \"No asset at remote path\" and \"Mismatch between local and remote servers\".  Note that should be \"server\" (not servers), but what is the difference?","files":null}]}