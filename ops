{"version":2,"ops":[{"type":3,"author":{"id":"364914f8b1c8a9131d300bf2978e4ffe2ff1aeeb"},"timestamp":1626891298,"metadata":{"github-id":"IC_kwDODBZtRc40tr41","github-url":"https://github.com/dandi/dandi-cli/issues/719#issuecomment-884391477"},"message":"When was the file uploaded?  `encodingFormat` only started to be set for all files in commit 0322f50b17b31cf2ca7345b7bff6ee25f449af9b.","files":null},{"type":3,"author":{"id":"12cb25e6e3f19b53447b05d00d7d4d53c925c908"},"timestamp":1626892896,"metadata":{"github-id":"IC_kwDODBZtRc40twRP","github-url":"https://github.com/dandi/dandi-cli/issues/719#issuecomment-884409423"},"message":"looks like yesterday. https://api.dandiarchive.org/api/dandisets/000108/versions/draft/assets/e84b5900-bef1-494a-9399-7eaf537390bf/\n\ni'm pinging @dchiquito as well on this thread. \n\ni suspect someone used an older dandi-cli to do this. because the schemaVersion is 0.3.0. we should also set a minimum version of the schema on the server as well and reject posts/puts that have  missing schemaVersion or use a schema lower than the minimum. this also means that the cli did not error locally for this person.","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1626896082,"metadata":{"github-id":"IC_kwDODBZtRc40t4t0","github-url":"https://github.com/dandi/dandi-cli/issues/719#issuecomment-884444020"},"message":"yeap, we do always provide encodingFormat as of 0.21.0-1-g0322f50 (although no validation is done - just that code does provide it), so nothing to fix for this particular issue probably.  But IMHO #722 should be addressed to prevent this and similar cases where required by API server metadata is not provided in the future.","files":null},{"type":4,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1626896082,"metadata":{"github-id":"MDExOkNsb3NlZEV2ZW50NTA1MjE3ODU5OA=="},"status":2},{"type":3,"author":{"id":"12cb25e6e3f19b53447b05d00d7d4d53c925c908"},"timestamp":1626896173,"metadata":{"github-id":"IC_kwDODBZtRc40t48t","github-url":"https://github.com/dandi/dandi-cli/issues/719#issuecomment-884444973"},"message":"we have a mechanism to prevent earlier clients through ET, but it seems the ET bad versions is not being used to prevent this.","files":null},{"type":3,"author":{"id":"12cb25e6e3f19b53447b05d00d7d4d53c925c908"},"timestamp":1626896292,"metadata":{"github-id":"IC_kwDODBZtRc40t5O-","github-url":"https://github.com/dandi/dandi-cli/issues/719#issuecomment-884446142"},"message":"do we know if ET bad version exception is overridden in the CLI? the version that was used is listed as being bad.","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1626961487,"metadata":{"github-id":"IC_kwDODBZtRc40vt_E","github-url":"https://github.com/dandi/dandi-cli/issues/719#issuecomment-884924356"},"message":"yeah, I think we just issue a warning on any exception from etelemetry: https://github.com/dandi/dandi-cli/blob/master/dandi/cli/command.py#L132","files":null},{"type":3,"author":{"id":"12cb25e6e3f19b53447b05d00d7d4d53c925c908"},"timestamp":1626961752,"metadata":{"github-id":"IC_kwDODBZtRc40vuv7","github-url":"https://github.com/dandi/dandi-cli/issues/719#issuecomment-884927483"},"message":"so we aren't at all protecting against bad versions then? also that line isn't asking etelemetry to check for bad versions: https://github.com/sensein/etelemetry-client/blob/fc36b7202494c6733526bf582f9516d2c8e17e1c/etelemetry/client.py#L72\n\ni think the exception is mostly to track if for some reason etelemetry could not be imported. perhaps this should be addressed properly.","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1626965572,"metadata":{"github-id":"IC_kwDODBZtRc40v62B","github-url":"https://github.com/dandi/dandi-cli/issues/719#issuecomment-884977025"},"message":"ref: https://github.com/dandi/dandi-cli/pull/725 on PR to error out on bad versions, and https://github.com/dandi/dandi-cli/issues/726 for making ET check used also when used as a Python library","files":null}]}