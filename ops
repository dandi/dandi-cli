{"version":2,"ops":[{"type":5,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1709049822,"metadata":{"github-id":"LE_lADODBZtRc6AkQPMzwAAAALHnsVv"},"added":["DX"],"removed":[]},{"type":5,"author":{"id":"364914f8b1c8a9131d300bf2978e4ffe2ff1aeeb"},"timestamp":1709049887,"metadata":{"github-id":"LE_lADODBZtRc6AkQPMzwAAAALHnwYr"},"added":["Python API"],"removed":[]},{"type":3,"author":{"id":"364914f8b1c8a9131d300bf2978e4ffe2ff1aeeb"},"timestamp":1709127558,"metadata":{"github-id":"IC_kwDODBZtRc51XK0F","github-url":"https://github.com/dandi/dandi-cli/issues/1413#issuecomment-1969007877"},"message":"@jjnesbitt @mvandenburgh The \"draft\" and \"user\" query parameters to `/dandisets/` are underdocumented in Swagger, and I need to document them in the Python API.  What exactly do they do?  (It appears that `draft` controls whether Dandisets without published versions are included, but I'd like to get confirmation.)  Also, what exactly does `search` search?\n\n@yarikoptic Should the names of the arguments to the `get_dandisets()` method match the query parameters?  In particular, this endpoint's use of `ordering` is inconsistent with the name `order` used when fetching versions \u0026 assets ([which I've previously complained about](https://github.com/dandi/dandi-archive/issues/1228#issuecomment-1204338808)), so we might want to align all the arguments to `order` in the Python API.","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1709136474,"metadata":{"github-id":"IC_kwDODBZtRc51YWI2","github-url":"https://github.com/dandi/dandi-cli/issues/1413#issuecomment-1969316406"},"message":"I am ok with your judgement on this matter: it seems we would be inconsistent either way. Ideally here or in https://github.com/dandi/dandi-archive/issues/1228#issuecomment-1204338808 we arrive at the target -- e.g. I propose: **let's make it `order` and aim for it**\n\n\u003cdetails\u003e\n\u003csummary\u003eorder vs ordering is pretty much \"equal match\" within dandi-archive but in dandi-cli we have only (and many of) `order`\u003c/summary\u003e \n\n```shell\n❯ git grep -p '\\\u003corder\\\u003e *[:=]'\ndandiapi/api/views/asset.py=class AssetFilter(filters.FilterSet):\ndandiapi/api/views/asset.py:    order = filters.OrderingFilter(fields=['created', 'modified', 'path'])\ndandiapi/api/views/version.py=class VersionFilter(filters.FilterSet):\ndandiapi/api/views/version.py:    order = filters.OrderingFilter(fields=['created'])\nweb/src/rest.ts=const dandiRest = {\nweb/src/rest.ts:    const versions = await this.versions(identifier, { page_size: 1, order: '-created' });\n❯ git grep -p '\\\u003cordering\\\u003e *[:=]'\ndandiapi/api/admin.py=class UserAdmin(BaseUserAdmin):\ndandiapi/api/admin.py:    @admin.display(ordering='metadata__status')\ndandiapi/api/models/dandiset.py=class Dandiset(TimeStampedModel):\ndandiapi/api/models/dandiset.py:        ordering = ['id']\ndandiapi/api/views/dandiset.py=class DandisetFilterBackend(filters.OrderingFilter):\ndandiapi/api/views/dandiset.py:            ordering = orderings[0]\nweb/src/components/DandisetsPage.vue=export default defineComponent({\nweb/src/components/DandisetsPage.vue:      const ordering = ((sortDir.value === -1) ? '-' : '') + sortField.value;\nweb/src/views/DandisetLandingView/DandisetLandingView.vue=async function fetchNextPage() {\nweb/src/views/DandisetLandingView/DandisetLandingView.vue:  const ordering = ((sortDir === -1) ? '-' : '') + sortField;\n❯ cd ../dandi-cli-master\nCHANGELOG.md    LICENSE      README.md     build/      coverage.xml  dandi.egg-info/  docs/     pyproject.toml  setup.py*  tox.ini  versioneer.py\nDEVELOPMENT.md  MANIFEST.in  __pycache__/  codeql.yml  dandi/        dist/            lgtm.yml  setup.cfg       tools/     venvs/\n❯ git grep -p '\\\u003cordering\\\u003e *[:=]'\n❯ git grep -p '\\\u003corder\\\u003e *[:=]'\ndandi/dandiapi.py=class RemoteDandiset:\ndandi/dandiapi.py:    def get_versions(self, order: str | None = None) -\u003e Iterator[Version]:\ndandi/dandiapi.py:        for v in self.get_versions(order=\"-created\"):\ndandi/dandiapi.py:    def get_assets(self, order: str | None = None) -\u003e Iterator[RemoteAsset]:\ndandi/dandiapi.py:        self, path: str, order: str | None = None\ndandi/dandiapi.py:        self, pattern: str, order: str | None = None\ndandi/dandiarchive.py=class ParsedDandiURL(ABC):\ndandi/dandiarchive.py:        self, client: DandiAPIClient, order: str | None = None, strict: bool = False\ndandi/dandiarchive.py=class DandisetURL(ParsedDandiURL):\ndandi/dandiarchive.py:        self, client: DandiAPIClient, order: str | None = None, strict: bool = False\n... many more ...\n```\n\u003c/details\u003e\n\nIdeally in dandi-archive we deprecate `ordering` in API  should be doable to add `order` to replace `ordering` but keep `ordering` available for backward compatibility to be pruned later.\n\nWDYT @dandi/archive-maintainers ?","files":null},{"type":3,"author":{"id":"c3aba9547dfec2aff2928d9a69b39673172a76a7"},"timestamp":1709139012,"metadata":{"github-id":"IC_kwDODBZtRc51YtpG","github-url":"https://github.com/dandi/dandi-cli/issues/1413#issuecomment-1969412678"},"message":"Thanks for pointing this out @jwodder, I made a PR on dandi-archive to improve the Swagger descriptions for this endpoint - #1875.\n\n\u003e @jjnesbitt @mvandenburgh The \"draft\" and \"user\" query parameters to `/dandisets/` are underdocumented in Swagger, and I need to document them in the Python API. What exactly do they do? (It appears that `draft` controls whether Dandisets without published versions are included, but I'd like to get confirmation.) Also, what exactly does `search` search?\n\nYou are correct about `draft`. The `user` param is kind of weird, in that it only has one valid value, \"me\". When set to \"me\", the endpoint will only return dandisets that the logged in user is an owner of. We should maybe reconsider how that's implemented on the API side. `search` does a string search over the json `metadata` of every `Version` in the system. \n\n\u003e order vs ordering is pretty much \"equal match\" within dandi-archive but in dandi-cli we have only (and many of) `order`\n\u003e Ideally in dandi-archive we deprecate `ordering` in API should be doable to add `order` to replace `ordering` but keep `ordering` available for backward compatibility to be pruned later.\n\u003e \n\u003e WDYT @dandi/archive-maintainers ?\n\nI agree we should make these consistent.","files":null},{"type":4,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1709239501,"metadata":{"github-id":"CE_lADODBZtRc6AkQPMzwAAAALJi3x6"},"status":2},{"type":3,"author":{"id":"7a8552494914d3e4116f4b434eb4812a914ca405"},"timestamp":1710874012,"metadata":{"github-id":"IC_kwDODBZtRc53rhBh","github-url":"https://github.com/dandi/dandi-cli/issues/1413#issuecomment-2007896161"},"message":"\u003c!-- GITHUB_RELEASE COMMENT: released --\u003e\n:rocket: Issue was released in [`0.61.0`](https://github.com/dandi/dandi-cli/releases/tag/0.61.0) :rocket:","files":null},{"type":5,"author":{"id":"7a8552494914d3e4116f4b434eb4812a914ca405"},"timestamp":1710874013,"metadata":{"github-id":"LE_lADODBZtRc6AkQPMzwAAAALVopI2"},"added":["released"],"removed":[]}]}