{"version":2,"ops":[{"type":1,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1597089050,"metadata":{"github-id":"MDU6SXNzdWU2NzYzNzUzNDQ=","github-url":"https://github.com/dandi/dandi-cli/issues/184","origin":"github"},"title":"use redirector's `/server-info` (or just \"OPTIONS\" call)","message":"A satellite issue to redirector's https://github.com/dandi/redirector/issues/20 to be merged in after redirector gets its portion merged:\n\n- provide a helper (probably with caching) e.g. `get_instance` to avoid direct use of `known_instances` lookup table.  Instead it should given an instance name (or even just a URL later on?), take a `.redirector` url and request that information from it.  If it is a URL provided -- should just talk to it directly (that would in the future allow to specify \"instance\" via URL not hardcoded name)\n- if there is a response from the redirector providing the record:\n  - if current client version does not satisfy `cli-version` in the record, raise a dedicated exception which would explain that the instance demands minimal version X and there are some bad versions which must not be used (if any prescribed in that record). \n  - compose instance record using `.url` fields from the record (instead of hardcoded ones in `consts.py`)\n- if there is no response from the redirector, issue a warning and continue using hard-coded values for now.  later we will RF it away but probably worth keeping it as a safety blanket for now.","files":null}]}