{"version":2,"ops":[{"type":1,"author":{"id":"364914f8b1c8a9131d300bf2978e4ffe2ff1aeeb"},"timestamp":1706905953,"metadata":{"github-id":"I_kwDODBZtRc5-G9Tl","github-url":"https://github.com/dandi/dandi-cli/issues/1400","origin":"github"},"title":"`test_validate_simple3_no_subject_id` failing","message":"The test `dandi/tests/test_files.py::test_validate_simple3_no_subject_id` is currently failing with the error:\n\n```\ndandi/tests/test_files.py:364: in test_validate_simple3_no_subject_id\n    assert errmsgs == [\"subject_id is missing.\"]\nE   assert ['Traceback (most recent call last):\\n  File \"/Users/jwodder/dartmouth/dandi-cli/.tox/py3/lib/python3.11/site-packages/nwbinspector/nwbinspector.py\", line 588, in inspect_nwbfile\\n    for inspector_message in inspect_nwbfile_object(\\n  File \"/Users/jwodder/dartmouth/dandi-cli/.tox/py3/lib/python3.11/site-packages/nwbinspector/nwbinspector.py\", line 686, in inspect_nwbfile_object\\n    subject_dependent_checks = _intercept_in_vitro_protein(nwbfile_object=nwbfile_object, checks=checks)\\n                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \"/Users/jwodder/dartmouth/dandi-cli/.tox/py3/lib/python3.11/site-packages/nwbinspector/nwbinspector.py\", line 632, in _intercept_in_vitro_protein\\n    and getattr(subject, \"subject_id\", \"\").startswith(\"protein\")\\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\nAttributeError: \\'NoneType\\' object has no attribute \\'startswith\\'\\n'] == ['subject_id is missing.']\nE     \nE     At index 0 diff: 'Traceback (most recent call last):\\n  File \"/Users/jwodder/dartmouth/dandi-cli/.tox/py3/lib/python3.11/site-packages/nwbinspector/nwbinspector.py\", line 588, in inspect_nwbfile\\n    for inspector_message in inspect_nwbfile_object(\\n  File \"/Users/jwodder/dartmouth/dandi-cli/.tox/py3/lib/python3.11/site-packages/nwbinspector/nwbinspector.py\", line 686, in inspect_nwbfile_object\\n    subject_dependent_checks = _intercept_in_vitro_protein(nwbfile_object=nwbfile_object, checks=checks)\\n                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \"/Users/jwodder/dartmouth/dandi-cli/.tox/py3/lib/python3.11/site-packages/nwbinspector/nwbinspector.py\", line 632, in _intercept_in_vitro_protein\\n    and getattr(subject, \"subject_id\", \"\").startswith(\"protein\")\\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\nAttributeError: \\'NoneType\\' object has no attribute \\'startswith\\'\\n' != 'subject_id is missing.'\nE     \nE     Full diff:\nE       [\nE     -     'subject_id is missing.',\nE     +     'Traceback (most recent call last):\\n'\nE     +     '  File '\nE     +     '\"/Users/jwodder/dartmouth/dandi-cli/.tox/py3/lib/python3.11/site-packages/nwbinspector/nwbinspector.py\", '\nE     +     'line 588, in inspect_nwbfile\\n'\nE     +     '    for inspector_message in inspect_nwbfile_object(\\n'\nE     +     '  File '\nE     +     '\"/Users/jwodder/dartmouth/dandi-cli/.tox/py3/lib/python3.11/site-packages/nwbinspector/nwbinspector.py\", '\nE     +     'line 686, in inspect_nwbfile_object\\n'\nE     +     '    subject_dependent_checks = '\nE     +     '_intercept_in_vitro_protein(nwbfile_object=nwbfile_object, '\nE     +     'checks=checks)\\n'\nE     +     '                               '\nE     +     '^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n'\nE     +     '  File '\nE     +     '\"/Users/jwodder/dartmouth/dandi-cli/.tox/py3/lib/python3.11/site-packages/nwbinspector/nwbinspector.py\", '\nE     +     'line 632, in _intercept_in_vitro_protein\\n'\nE     +     '    and getattr(subject, \"subject_id\", \"\").startswith(\"protein\")\\n'\nE     +     '        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n'\nE     +     \"AttributeError: 'NoneType' object has no attribute 'startswith'\\n\",\nE       ]\n```\n\nThis seems to be due to the release of nwbinspector 0.4.32 about an hour ago.  The test in question involves an NWB that does not have `subject_id` set.\n\n@bendichter Is this a bug in nwbinspector, or is the test doing something wrong?","files":null}]}