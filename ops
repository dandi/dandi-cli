{"version":2,"ops":[{"type":1,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1755620010,"metadata":{"github-id":"I_kwDODBZtRc7Gxy1L","github-url":"https://github.com/dandi/dandi-cli/issues/1683","origin":"github"},"title":"protected branch is still not allowing to push!","message":"https://github.com/dandi/dandi-cli/actions/runs/17074567581/job/48412360145 has\n\n\u003e @CodyCBakerPhD is creating a release triggered by push\n\nso seems like it is @CodyCBakerPhD who merged the PR to be considered to be an actor, not automagically based on GH_TOKEN which was set up/provided from @dandibot \n\n\nin https://github.com/dandi/dandi-cli/blob/master/.github/workflows/release.yml\n\nwe have\n\n```\n      - name: Create release\n        run: |\n          echo \"@${{ github.actor }} is creating a release triggered by ${{ github.event_name }}\"\n          if [ \"${{ github.event_name }}\" = workflow_dispatch ]\n          then opts=\n          else opts=--only-publish-with-release-label\n          fi\n          ~/auto shipit -vv $opts\n        env:\n          GH_TOKEN: ${{ secrets.GH_TOKEN }}\n```\n\nwe have\n\n\u003cimg width=\"1045\" height=\"216\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/e68aab98-5f30-4d45-a4cb-640f7113b75c\" /\u003e\n\nAFAIK from @dandibot  with `repo` permissions (classical token).\n\nWe have \n\n\u003cimg width=\"1978\" height=\"803\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/c7621ad1-557f-4e36-8720-68f14c855cbe\" /\u003e\n\nand we still have\n\n```\nTo https://github.com/dandi/dandi-cli\n * [new tag]           0.70.1 -\u003e 0.70.1\n ! [remote rejected]   master -\u003e master (protected branch hook declined)\nerror: failed to push some refs to 'https://github.com/dandi/dandi-cli'\nError: Running command 'git' with args [push, --follow-tags, --set-upstream, https://****2GTm@github.com/dandi/dandi-cli, master] failed\n```\n\nI do not see where/what we are missing @CodyCBakerPhD @jjnesbitt ?\n\nIf no ideas, I would be doomed to disable protections on `master` to re-gain proper operations","files":null}]}