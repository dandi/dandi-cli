{"version":2,"ops":[{"type":6,"author":{"id":"12cb25e6e3f19b53447b05d00d7d4d53c925c908"},"timestamp":1622605258,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdElzc3VlRWRpdDo1NDg4MDYzMDU="},"target":"f999d57345d02ba757c9512767f156551f0fbc9bc5ed8448c4e22122fb635928","message":"could the cli try to use the API-key to `GET` the `/auth/token` and if it returns the same value the key is valid, if the GET fails due to an authorization error, then the key is invalid. in the latter case,  ask the user to refresh their key and then provide it to the cli.\n\nvalid\n```shell\n$ curl --request GET --header \"Authorization: token ${DANDI_API_KEY}\" --url \\\nhttps://api.dandiarchive.org/api/auth/token/\n\n\u003cDANDI_API_KEY\u003e\n```\n\ninvalid\n\n```shell\n$ curl --request GET --header \"Authorization: token ${DANDI_API_KEY}bad\" --url \\\n https://api.dandiarchive.org/api/auth/token/\n\n{\"detail\":\"Invalid token.\"}\n```","files":null},{"type":5,"author":{"id":"12cb25e6e3f19b53447b05d00d7d4d53c925c908"},"timestamp":1622604997,"metadata":{"github-id":"MDEyOkxhYmVsZWRFdmVudDQ4MjkxOTYxMzY="},"added":["enhancement"],"removed":[]},{"type":5,"author":{"id":"12cb25e6e3f19b53447b05d00d7d4d53c925c908"},"timestamp":1622604997,"metadata":{"github-id":"MDEyOkxhYmVsZWRFdmVudDQ4MjkxOTYxMzg="},"added":["cmd-upload"],"removed":[]},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1622657843,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDg1MzI3NjU0NQ==","github-url":"https://github.com/dandi/dandi-cli/issues/653#issuecomment-853276545"},"message":"Even though I might not completely eliminate possibly desired \"reaction\" to 401s e.g. during upload etc, I think it would indeed be nice to first do auth \"pre-check\" for any command which would require authentication (`upload`, `delete`) and request a replacement token if the known is no good before proceeding to the action (which might be parallelized etc).","files":null},{"type":5,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1622657852,"metadata":{"github-id":"MDEyOkxhYmVsZWRFdmVudDQ4MzMzNjYzNjk="},"added":["cmd-delete"],"removed":[]},{"type":4,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1623082569,"metadata":{"github-id":"MDExOkNsb3NlZEV2ZW50NDg1MzA5MDg3OQ=="},"status":2}]}