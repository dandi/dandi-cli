{"version":2,"ops":[{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1651183916,"metadata":{"github-id":"IC_kwDODBZtRc5CUnvN","github-url":"https://github.com/dandi/dandi-cli/issues/991#issuecomment-1112701901"},"message":"what does it validate really? doesn't even complain if sub / ses label doesn't match between folders and files:\n```\n$\u003e dandi validate-bids sub-MITU02/ses-MR2/sub-MITU01_ses-MR_SSSPDmap.nii.gz\n2022-04-28 18:11:09,291 [ WARNING] BIDSVersion 1.5.0 is less than the minimal working 1.7.0+012+dandi001. Falling back to 1.7.0+012+dandi001. To force the usage of earlier versions specify them explicitly when calling the validator.\n2022-04-28 18:11:09,873 [    INFO] Logs saved in /home/yoh/.cache/dandi-cli/log/20220428221107Z-1784078.log\n(dev3) 1 21475 [1].....................................:Thu 28 Apr 2022 06:11:10 PM EDT:.\nlena:/tmp/test\n$\u003e cat /home/yoh/.cache/dandi-cli/log/20220428221107Z-1784078.log\n2022-04-28T18:11:07-0400 [INFO    ] dandi 1784078:140317588195136 dandi v0.39.4+2.gb73f44d1, hdmf v3.1.1, pynwb v2.0.0, h5py v3.6.0\n2022-04-28T18:11:07-0400 [INFO    ] dandi 1784078:140317588195136 sys.argv = ['/home/yoh/proj/dandi/dandi-cli-master/venvs/dev3/bin/dandi', 'validate-bids', 'sub-MITU02/ses-MR2/sub-MITU01_ses-MR_SSSPDmap.nii.gz']\n2022-04-28T18:11:07-0400 [INFO    ] dandi 1784078:140317588195136 os.getcwd() = /tmp/test\n2022-04-28T18:11:08-0400 [DEBUG   ] urllib3.connectionpool 1784078:140317588195136 Starting new HTTPS connection (1): rig.mit.edu:443\n2022-04-28T18:11:08-0400 [DEBUG   ] urllib3.connectionpool 1784078:140317588195136 https://rig.mit.edu:443 \"GET /et/projects/dandi/dandi-cli HTTP/1.1\" 200 579\n2022-04-28T18:11:08-0400 [DEBUG   ] dandi 1784078:140317588195136 Running a newer version (0.39.4+2.gb73f44d1) of dandi/dandi-cli than available (0.39.4)\n2022-04-28T18:11:08-0400 [DEBUG   ] h5py._conv 1784078:140317588195136 Creating converter from 7 to 5\n2022-04-28T18:11:08-0400 [DEBUG   ] h5py._conv 1784078:140317588195136 Creating converter from 5 to 7\n2022-04-28T18:11:08-0400 [DEBUG   ] h5py._conv 1784078:140317588195136 Creating converter from 7 to 5\n2022-04-28T18:11:08-0400 [DEBUG   ] h5py._conv 1784078:140317588195136 Creating converter from 5 to 7\n2022-04-28T18:11:09-0400 [WARNING ] dandi 1784078:140317588195136 BIDSVersion 1.5.0 is less than the minimal working 1.7.0+012+dandi001. Falling back to 1.7.0+012+dandi001. To force the usage of earlier versions specify them explicitly when calling the validator.\n2022-04-28T18:11:09-0400 [INFO    ] dandi 1784078:140317588195136 Logs saved in /home/yoh/.cache/dandi-cli/log/20220428221107Z-1784078.log\n```","files":null},{"type":6,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1651183973,"metadata":{"github-id":"UCE_lALODBZtRc5CUnvNziLawto"},"target":"249ad168327f899471c1a3491be43e5e376cd2dfdaca5728ebd02a1d26971338","message":"what does it validate really? doesn't even complain if sub / ses label doesn't match between folders and files:\n```\n$\u003e dandi validate-bids sub-MITU02/ses-MR2/sub-MITU01_ses-MR_SSSPDmap.nii.gz\n2022-04-28 18:11:09,291 [ WARNING] BIDSVersion 1.5.0 is less than the minimal working 1.7.0+012+dandi001. Falling back to 1.7.0+012+dandi001. To force the usage of earlier versions specify them explicitly when calling the validator.\n2022-04-28 18:11:09,873 [    INFO] Logs saved in /home/yoh/.cache/dandi-cli/log/20220428221107Z-1784078.log\n(dev3) 1 21475 [1].....................................:Thu 28 Apr 2022 06:11:10 PM EDT:.\nlena:/tmp/test\n$\u003e cat /home/yoh/.cache/dandi-cli/log/20220428221107Z-1784078.log\n2022-04-28T18:11:07-0400 [INFO    ] dandi 1784078:140317588195136 dandi v0.39.4+2.gb73f44d1, hdmf v3.1.1, pynwb v2.0.0, h5py v3.6.0\n2022-04-28T18:11:07-0400 [INFO    ] dandi 1784078:140317588195136 sys.argv = ['/home/yoh/proj/dandi/dandi-cli-master/venvs/dev3/bin/dandi', 'validate-bids', 'sub-MITU02/ses-MR2/sub-MITU01_ses-MR_SSSPDmap.nii.gz']\n2022-04-28T18:11:07-0400 [INFO    ] dandi 1784078:140317588195136 os.getcwd() = /tmp/test\n2022-04-28T18:11:08-0400 [DEBUG   ] urllib3.connectionpool 1784078:140317588195136 Starting new HTTPS connection (1): rig.mit.edu:443\n2022-04-28T18:11:08-0400 [DEBUG   ] urllib3.connectionpool 1784078:140317588195136 https://rig.mit.edu:443 \"GET /et/projects/dandi/dandi-cli HTTP/1.1\" 200 579\n2022-04-28T18:11:08-0400 [DEBUG   ] dandi 1784078:140317588195136 Running a newer version (0.39.4+2.gb73f44d1) of dandi/dandi-cli than available (0.39.4)\n2022-04-28T18:11:08-0400 [DEBUG   ] h5py._conv 1784078:140317588195136 Creating converter from 7 to 5\n2022-04-28T18:11:08-0400 [DEBUG   ] h5py._conv 1784078:140317588195136 Creating converter from 5 to 7\n2022-04-28T18:11:08-0400 [DEBUG   ] h5py._conv 1784078:140317588195136 Creating converter from 7 to 5\n2022-04-28T18:11:08-0400 [DEBUG   ] h5py._conv 1784078:140317588195136 Creating converter from 5 to 7\n2022-04-28T18:11:09-0400 [WARNING ] dandi 1784078:140317588195136 BIDSVersion 1.5.0 is less than the minimal working 1.7.0+012+dandi001. Falling back to 1.7.0+012+dandi001. To force the usage of earlier versions specify them explicitly when calling the validator.\n2022-04-28T18:11:09-0400 [INFO    ] dandi 1784078:140317588195136 Logs saved in /home/yoh/.cache/dandi-cli/log/20220428221107Z-1784078.log\n```\n\nedit: here is the tarball of that \"tricky\" case -- http://www.onerussian.com/tmp/test-bids.tgz","files":null},{"type":3,"author":{"id":"0ab0e40999605aa8d5ec6be68372511fdc4a2fdf"},"timestamp":1651237220,"metadata":{"github-id":"IC_kwDODBZtRc5CW1vN","github-url":"https://github.com/dandi/dandi-cli/issues/991#issuecomment-1113283533"},"message":"@yarikoptic it figures out that there is a mismatch, just that the function only returns a dictionary of the summary, and optionally writes issues it found to the report file via `-r`.\n\nThis should additionally log the errors: https://github.com/dandi/dandi-cli/pull/992","files":null},{"type":6,"author":{"id":"0ab0e40999605aa8d5ec6be68372511fdc4a2fdf"},"timestamp":1651238332,"metadata":{"github-id":"UCE_lALODBZtRc5CW1vNziLfMq4"},"target":"552f185df108dfe7a060547f82989a182bc8ab7b644eccc5410ee62cbb52de72","message":"@yarikoptic it marks the file as invalid if there is a mismatch, just that the function only returns a dictionary of the summary, and optionally writes issues it found to the report file via `-r`.\n\nThis should additionally log the errors: https://github.com/dandi/dandi-cli/pull/992","files":null},{"type":3,"author":{"id":"0ab0e40999605aa8d5ec6be68372511fdc4a2fdf"},"timestamp":1651237240,"metadata":{"github-id":"IC_kwDODBZtRc5CW1z9","github-url":"https://github.com/dandi/dandi-cli/issues/991#issuecomment-1113283837"},"message":"```console\nchymera@decohost ~ $ dandi validate-bids test -r\n2022-04-29 08:56:51,060 [ WARNING] A newer version (0.39.4) of dandi/dandi-cli is available. You are using 0.39.2+47.gb73f44d.dirty\n2022-04-29 08:56:51,157 [    INFO] Note: NumExpr detected 12 cores but \"NUMEXPR_MAX_THREADS\" not set, so enforcing safe limit of 8.\n2022-04-29 08:56:51,158 [    INFO] NumExpr defaulting to 8 threads.\n2022-04-29 08:56:52,377 [ WARNING] BIDSVersion 1.5.0 is less than the minimal working 1.7.0+012+dandi001. Falling back to 1.7.0+012+dandi001. To force the usage of earlier versions specify them explicitly when calling the validator.\n2022-04-29 08:56:53,148 [    INFO] BIDS validation log written to /home/chymera/.cache/dandi-cli/log/bids-validator-report_20220429125653Z-1736.log\n2022-04-29 08:56:53,149 [   ERROR] The `.*?/README$` regex pattern file required by BIDS was not found\n2022-04-29 08:56:53,149 [   ERROR] The `.*?/CHANGES$` regex pattern file required by BIDS was not found\n2022-04-29 08:56:53,149 [ WARNING] The `/home/chymera/test/sub-MITU02/ses-MR2/sub-MITU01_ses-MR_SSSPDmap.nii.gz` file was not matched by any regex schema entry.\n2022-04-29 08:56:53,149 [    INFO] Logs saved in /home/chymera/.cache/dandi-cli/log/20220429125650Z-1736.log\n```","files":null},{"type":6,"author":{"id":"0ab0e40999605aa8d5ec6be68372511fdc4a2fdf"},"timestamp":1651237283,"metadata":{"github-id":"UCE_lALODBZtRc5CW1z9ziLfEoI"},"target":"5fa320c8b0e50bc705af732441ca96582874431b38bb44b26f51a66c9103ef11","message":"```console\nchymera@decohost ~ $ wget http://www.onerussian.com/tmp/test-bids.tgz\nchymera@decohost ~ $ tar xvf test-bids.tgz\nchymera@decohost ~ $ dandi validate-bids test -r\n2022-04-29 08:56:51,060 [ WARNING] A newer version (0.39.4) of dandi/dandi-cli is available. You are using 0.39.2+47.gb73f44d.dirty\n2022-04-29 08:56:51,157 [    INFO] Note: NumExpr detected 12 cores but \"NUMEXPR_MAX_THREADS\" not set, so enforcing safe limit of 8.\n2022-04-29 08:56:51,158 [    INFO] NumExpr defaulting to 8 threads.\n2022-04-29 08:56:52,377 [ WARNING] BIDSVersion 1.5.0 is less than the minimal working 1.7.0+012+dandi001. Falling back to 1.7.0+012+dandi001. To force the usage of earlier versions specify them explicitly when calling the validator.\n2022-04-29 08:56:53,148 [    INFO] BIDS validation log written to /home/chymera/.cache/dandi-cli/log/bids-validator-report_20220429125653Z-1736.log\n2022-04-29 08:56:53,149 [   ERROR] The `.*?/README$` regex pattern file required by BIDS was not found\n2022-04-29 08:56:53,149 [   ERROR] The `.*?/CHANGES$` regex pattern file required by BIDS was not found\n2022-04-29 08:56:53,149 [ WARNING] The `/home/chymera/test/sub-MITU02/ses-MR2/sub-MITU01_ses-MR_SSSPDmap.nii.gz` file was not matched by any regex schema entry.\n2022-04-29 08:56:53,149 [    INFO] Logs saved in /home/chymera/.cache/dandi-cli/log/20220429125650Z-1736.log\n```","files":null},{"type":6,"author":{"id":"0ab0e40999605aa8d5ec6be68372511fdc4a2fdf"},"timestamp":1651238203,"metadata":{"github-id":"UCE_lALODBZtRc5CW1z9ziLfLnc"},"target":"5fa320c8b0e50bc705af732441ca96582874431b38bb44b26f51a66c9103ef11","message":"```console\nchymera@decohost ~ $ wget http://www.onerussian.com/tmp/test-bids.tgz -q\nchymera@decohost ~ $ tar xvf test-bids.tgz\ntest/\ntest/dataset_description.json\ntest/sub-MITU02/\ntest/sub-MITU02/ses-MR2/\ntest/sub-MITU02/ses-MR2/sub-MITU01_ses-MR_SSSPDmap.nii.gz\nchymera@decohost ~ $ dandi validate-bids test -r\n2022-04-29 08:56:51,060 [ WARNING] A newer version (0.39.4) of dandi/dandi-cli is available. You are using 0.39.2+47.gb73f44d.dirty\n2022-04-29 08:56:51,157 [    INFO] Note: NumExpr detected 12 cores but \"NUMEXPR_MAX_THREADS\" not set, so enforcing safe limit of 8.\n2022-04-29 08:56:51,158 [    INFO] NumExpr defaulting to 8 threads.\n2022-04-29 08:56:52,377 [ WARNING] BIDSVersion 1.5.0 is less than the minimal working 1.7.0+012+dandi001. Falling back to 1.7.0+012+dandi001. To force the usage of earlier versions specify them explicitly when calling the validator.\n2022-04-29 08:56:53,148 [    INFO] BIDS validation log written to /home/chymera/.cache/dandi-cli/log/bids-validator-report_20220429125653Z-1736.log\n2022-04-29 08:56:53,149 [   ERROR] The `.*?/README$` regex pattern file required by BIDS was not found\n2022-04-29 08:56:53,149 [   ERROR] The `.*?/CHANGES$` regex pattern file required by BIDS was not found\n2022-04-29 08:56:53,149 [ WARNING] The `/home/chymera/test/sub-MITU02/ses-MR2/sub-MITU01_ses-MR_SSSPDmap.nii.gz` file was not matched by any regex schema entry.\n2022-04-29 08:56:53,149 [    INFO] Logs saved in /home/chymera/.cache/dandi-cli/log/20220429125650Z-1736.log\n```","files":null},{"type":6,"author":{"id":"0ab0e40999605aa8d5ec6be68372511fdc4a2fdf"},"timestamp":1651238285,"metadata":{"github-id":"UCE_lALODBZtRc5CW1z9ziLfMTk"},"target":"5fa320c8b0e50bc705af732441ca96582874431b38bb44b26f51a66c9103ef11","message":"```console\nchymera@decohost ~ $ wget http://www.onerussian.com/tmp/test-bids.tgz -q\nchymera@decohost ~ $ tar xvf test-bids.tgz\ntest/\ntest/dataset_description.json\ntest/sub-MITU02/\ntest/sub-MITU02/ses-MR2/\ntest/sub-MITU02/ses-MR2/sub-MITU01_ses-MR_SSSPDmap.nii.gz\nchymera@decohost ~ $ dandi validate-bids test -r\n2022-04-29 08:56:51,060 [ WARNING] A newer version (0.39.4) of dandi/dandi-cli is available. You are using 0.39.2+47.gb73f44d.dirty\n2022-04-29 08:56:51,157 [    INFO] Note: NumExpr detected 12 cores but \"NUMEXPR_MAX_THREADS\" not set, so enforcing safe limit of 8.\n2022-04-29 08:56:51,158 [    INFO] NumExpr defaulting to 8 threads.\n2022-04-29 08:56:52,377 [ WARNING] BIDSVersion 1.5.0 is less than the minimal working 1.7.0+012+dandi001. Falling back to 1.7.0+012+dandi001. To force the usage of earlier versions specify them explicitly when calling the validator.\n2022-04-29 08:56:53,148 [    INFO] BIDS validation log written to /home/chymera/.cache/dandi-cli/log/bids-validator-report_20220429125653Z-1736.log\n2022-04-29 08:56:53,149 [   ERROR] The `.*?/README$` regex pattern file required by BIDS was not found.\n2022-04-29 08:56:53,149 [   ERROR] The `.*?/CHANGES$` regex pattern file required by BIDS was not found.\n2022-04-29 08:56:53,149 [ WARNING] The `/home/chymera/test/sub-MITU02/ses-MR2/sub-MITU01_ses-MR_SSSPDmap.nii.gz` file was not matched by any regex schema entry.\n2022-04-29 08:56:53,149 [    INFO] Logs saved in /home/chymera/.cache/dandi-cli/log/20220429125650Z-1736.log\n```","files":null},{"type":6,"author":{"id":"0ab0e40999605aa8d5ec6be68372511fdc4a2fdf"},"timestamp":1651238481,"metadata":{"github-id":"UCE_lALODBZtRc5CW1z9ziLfNyQ"},"target":"5fa320c8b0e50bc705af732441ca96582874431b38bb44b26f51a66c9103ef11","message":"```console\nchymera@decohost ~ $ wget http://www.onerussian.com/tmp/test-bids.tgz -q\nchymera@decohost ~ $ tar xvf test-bids.tgz\ntest/\ntest/dataset_description.json\ntest/sub-MITU02/\ntest/sub-MITU02/ses-MR2/\ntest/sub-MITU02/ses-MR2/sub-MITU01_ses-MR_SSSPDmap.nii.gz\nchymera@decohost ~ $ dandi validate-bids test -r\n2022-04-29 08:56:51,060 [ WARNING] A newer version (0.39.4) of dandi/dandi-cli is available. You are using 0.39.2+47.gb73f44d.dirty\n2022-04-29 08:56:51,157 [    INFO] Note: NumExpr detected 12 cores but \"NUMEXPR_MAX_THREADS\" not set, so enforcing safe limit of 8.\n2022-04-29 08:56:51,158 [    INFO] NumExpr defaulting to 8 threads.\n2022-04-29 08:56:52,377 [ WARNING] BIDSVersion 1.5.0 is less than the minimal working 1.7.0+012+dandi001. Falling back to 1.7.0+012+dandi001. To force the usage of earlier versions specify them explicitly when calling the validator.\n2022-04-29 08:56:53,148 [    INFO] BIDS validation log written to /home/chymera/.cache/dandi-cli/log/bids-validator-report_20220429125653Z-1736.log\n2022-04-29 08:56:53,149 [   ERROR] The `.*?/README$` regex pattern file required by BIDS was not found.\n2022-04-29 08:56:53,149 [   ERROR] The `.*?/CHANGES$` regex pattern file required by BIDS was not found.\n2022-04-29 08:56:53,149 [ WARNING] The `/home/chymera/test/sub-MITU02/ses-MR2/sub-MITU01_ses-MR_SSSPDmap.nii.gz` file was not matched by any regex schema entry.\n2022-04-29 08:56:53,149 [    INFO] Logs saved in /home/chymera/.cache/dandi-cli/log/20220429125650Z-1736.log\nchymera@decohost ~ $ ppb /home/chymera/.cache/dandi-cli/log/bids-validator-report_20220429125653Z-1736.log\nUpload succeeded:\nhttps://ppb.chymera.eu/fe88e3.log\n```","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1657321726,"metadata":{"github-id":"IC_kwDODBZtRc5GTIiv","github-url":"https://github.com/dandi/dandi-cli/issues/991#issuecomment-1179420847"},"message":"now it is #1037 I think\n\n```\n(git-annex)lena:~/proj/dandi/dandisets/000108[draft]git\n$\u003e dandi validate-bids sub-MITU02/ses-20210521h17m17s06/micr/sub-MITU01_ses-20210521h17m17s06_sample-178_stain-NN_run-1_chunk-1_SPIM.ome.zarr                                                    \n2022-07-08 19:06:33,800 [ WARNING] A newer version (0.44.1) of dandi/dandi-cli is available. You are using 0.39.6+39.g8139966\n2022-07-08 19:06:34,992 [ WARNING] BIDSVersion 1.4.0 is less than the minimal working 1.7.0+012+dandi001. Falling back to 1.7.0+012+dandi001. To force the usage of earlier versions specify them explicitly when calling the validator.\n2022-07-08 19:06:35,655 [    INFO] Logs saved in /home/yoh/.cache/dandi-cli/log/20220708230633Z-424963.log\nError: list index out of range\n```\nwhile testing the 0.39.6+39.g8139966 of #1011","files":null},{"type":3,"author":{"id":"0ab0e40999605aa8d5ec6be68372511fdc4a2fdf"},"timestamp":1658882292,"metadata":{"github-id":"IC_kwDODBZtRc5HS7GI","github-url":"https://github.com/dandi/dandi-cli/issues/991#issuecomment-1196142984"},"message":"@yarikoptic This is not the same issue as the one you linked, and the issue here was just missing reporting.","files":null},{"type":6,"author":{"id":"0ab0e40999605aa8d5ec6be68372511fdc4a2fdf"},"timestamp":1658882332,"metadata":{"github-id":"UCE_lALODBZtRc5HS7GIziWNWGo"},"target":"6fa0ff29a98b9653cb9ead8e0a4f9a4be652a6b2e54193a7854f7e9821bf0284","message":"@yarikoptic This is not the same issue as the initial one reported, and that particular issue was just missing reporting which has been fixed a while ago.","files":null},{"type":4,"author":{"id":"0ab0e40999605aa8d5ec6be68372511fdc4a2fdf"},"timestamp":1658882292,"metadata":{"github-id":"CE_lADODBZtRc5IrgLmzwAAAAGlV0qQ"},"status":2}]}