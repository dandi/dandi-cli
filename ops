{"version":2,"ops":[{"type":6,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1597335900,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdElzc3VlRWRpdDo0MTYwMTY1MTU="},"target":"1a16baccd67751b220c393c329c4e67649eed7cc53338bdde96555ae0d66a848","message":"while building conda package:\nhttps://github.com/conda-forge/dandi-feedstock/pull/5\n\nhttps://dev.azure.com/conda-forge/feedstock-builds/_build/results?buildId=196889\u0026view=logs\u0026j=171a126d-c574-5c8c-1269-ff3b989e923d\u0026t=1183ba29-a0b5-5324-8463-2a49ace9e213\u0026l=863\n\ne.g.\n```\n___________________________ test_get_instance_dandi ___________________________\n\n    @responses.activate\n    def test_get_instance_dandi():\n        responses.add(\n            responses.GET,\n            \"https://dandiarchive.org/server-info\",\n            json={\n                \"version\": \"1.0.0\",\n                \"cli-minimal-version\": \"0.5.0\",\n                \"cli-bad-versions\": [],\n                \"services\": {\n                    \"girder\": {\"url\": \"https://girder.dandi\"},\n                    \"webui\": {\"url\": \"https://gui.dandi\"},\n                    \"api\": {\"url\": \"https://publish.dandi/api\"},\n                    \"jupyterhub\": {\"url\": \"https://hub.dandi\"},\n                },\n            },\n        )\n\u003e       assert get_instance(\"dandi\") == dandi_instance(\n            girder=\"https://girder.dandi\",\n            gui=\"https://gui.dandi\",\n            redirector=\"https://dandiarchive.org\",\n            api=\"https://publish.dandi/api\",\n        )\nE       AssertionError: assert dandi_instanc...hive.org/api') == dandi_instanc...sh.dandi/api')\nE         At index 0 diff: 'https://girder.dandiarchive.org' != 'https://girder.dandi'\nE         Full diff:\nE         - dandi_instance(girder='https://girder.dandi', gui='https://gui.dandi', redirector='https://dandiarchive.org', api='https://publish.dandi/api')\nE         + dandi_instance(girder='https://girder.dandiarchive.org', gui='https://gui.dandiarchive.org', redirector='https://dandiarchive.org', api='https://publish.dandiarchive.org/api')\nE         ?                                            +++++++++++                         +++++++++++                                                                    +++++++++...\nE         \nE         ...Full output truncated (1 line hidden), use '-vv' to show\n\n..\\_test_env\\lib\\site-packages\\dandi\\tests\\test_utils.py:170: AssertionError\n------------------------------ Captured log call ------------------------------\nWARNING  dandi:utils.py:565 Request to https://dandiarchive.org failed ('HTTPHeaderDict' object has no attribute 'get_all')\nWARNING  dandi:utils.py:567 Using hard-coded URLs\n____________________________ test_get_instance_url ____________________________\n...\n```\n\nany quick idea @jwodder ?","files":null},{"type":3,"author":{"id":"364914f8b1c8a9131d300bf2978e4ffe2ff1aeeb"},"timestamp":1597331169,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY3MzUzMzMxNw==","github-url":"https://github.com/dandi/dandi-cli/issues/193#issuecomment-673533317"},"message":"@yarikoptic This is apparently due to a mix of incompatible versions of `responses`, `requests`, and `urllib3`: https://github.com/getsentry/responses/issues/292","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1597335571,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY3MzU3MzEzNQ==","github-url":"https://github.com/dandi/dandi-cli/issues/193#issuecomment-673573135"},"message":"well, in https://github.com/getsentry/responses/issues/292#issuecomment-670760655 \"fix for me was to force upgrade urllib3 to 1.25.10\", which is what we had according to \"setup\" step: https://dev.azure.com/conda-forge/84710dde-1620-425b-80d0-4cf5baca359d/_apis/build/builds/196889/logs/36 and requests also recent 2.24.0  ... but then in build step it is indeed older versions are installed (apparently `setup` is not really the `build` environment :-( bleh).  I will try to demand `requests \u003e= 2.22.0`","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1597356676,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY3MzczNTU0NQ==","github-url":"https://github.com/dandi/dandi-cli/issues/193#issuecomment-673735545"},"message":"and that seemed to help! merging the feedstock recipe now. Thank you @jwodder for digging that issue out!","files":null},{"type":4,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1597356677,"metadata":{"github-id":"MDExOkNsb3NlZEV2ZW50MzY1NDAzNTE1OQ=="},"status":2}]}