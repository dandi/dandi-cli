{"version":2,"ops":[{"type":3,"author":{"id":"364914f8b1c8a9131d300bf2978e4ffe2ff1aeeb"},"timestamp":1598446763,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY4MDg2MzI5OQ==","github-url":"https://github.com/dandi/dandi-cli/issues/213#issuecomment-680863299"},"message":"Looks like symlink permission issues.  The Windows environments used for GitHub Actions are presumably already configured to allow symlinks.","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1598457800,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY4MDk3MjQ4MA==","github-url":"https://github.com/dandi/dandi-cli/issues/213#issuecomment-680972480"},"message":"right -- I was blind -- majority seems to be symlink related!  Didn't enable symlinking somewhat on \"purpose\" since not sure if users would have symlinking enabled, so better have most conservative environment. \nIMHO we should then just skip those tests (or portions of them, like in cache/memoize one) on file systems which do not allow symlinking. I do not remember what about the \"simulate\" run needing symlinks -- should be looked at.\nI guess all of the above would resurface if tests are ran on some vfat file system (usb stick or loop device).  On linux following helper could streamline it: https://github.com/datalad/datalad/blob/master/tools/eval_under_testloopfs","files":null},{"type":3,"author":{"id":"364914f8b1c8a9131d300bf2978e4ffe2ff1aeeb"},"timestamp":1598460328,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY4MDk5NjIwNA==","github-url":"https://github.com/dandi/dandi-cli/issues/213#issuecomment-680996204"},"message":"I think I found a bug in the the cache test that I'd like you to confirm.  In the following block:\n\nhttps://github.com/dandi/dandi-cli/blob/0954b66dbcf07be549e0adab6903782ea510eae4/dandi/support/tests/test_cache.py#L143-L149\n\n1. Shouldn't `os.symlink(fname, symlink1)` on line 145 be changed to `os.symlink(path, symlink1)`?  `path` includes a directory component; `fname` does not.\n\n2. Shouldn't `op.islink(fname)` on line 146 be changed to `op.islink(symlink1)`, since `symlink1` is the symlink, not `fname`?  Note that codecov says lines 147-149 are currently not covered, meaning that the `if` never succeeds.\n\nIf I'm correct, do you want these changes in their own PR or as part of the PR for this issue?\n\nWhether or not these changes are made, I believe the correct way to handle symlink failure on Windows in this snippet is to wrap line 145 in `try: ... except OSError: pass`.","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1598473773,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY4MTEwNjk4OA==","github-url":"https://github.com/dandi/dandi-cli/issues/213#issuecomment-681106988"},"message":"\u003e 1. Shouldn't os.symlink(fname, symlink1) on line 145 be changed to os.symlink(path, symlink1)? path includes a directory component; fname does not.\n\nI don't think so... just a relative (not an absolute path) symlink in the target (`path`) directory.\n\n\u003e 2. \n\nYES -- that is a bug -- Thank you for eyeballing it!!!\n\n\u003e Whether or not these changes are made, I believe the correct way to handle symlink failure on Windows in this snippet is to wrap line 145 in try: ... except OSError: pass.\n\nyes -- please!\n\n\u003e If I'm correct, do you want these changes in their own PR or as part of the PR for this issue?\n\ntotally up to you!","files":null},{"type":3,"author":{"id":"364914f8b1c8a9131d300bf2978e4ffe2ff1aeeb"},"timestamp":1598473987,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY4MTEwODgzNA==","github-url":"https://github.com/dandi/dandi-cli/issues/213#issuecomment-681108834"},"message":"I already submitted the PR: #222","files":null},{"type":4,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1598476064,"metadata":{"github-id":"MDExOkNsb3NlZEV2ZW50MzY5NjYyMjIxOA=="},"status":2}]}