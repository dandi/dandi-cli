{"version":2,"ops":[{"type":3,"author":{"id":"364914f8b1c8a9131d300bf2978e4ffe2ff1aeeb"},"timestamp":1598448103,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY4MDg3NTc5Mw==","github-url":"https://github.com/dandi/dandi-cli/issues/214#issuecomment-680875793"},"message":"Once #217 is merged, [this bit of code](https://github.com/dandi/dandi-cli/blob/bf-win/dandi/upload.py#L120-L127) should be unreachable, because the condition succeeds only if `allow_any_path` is false, in which case the conditional on line 115 will limit `paths` to only containing dandiset metadata files and NWB files.  Should the code be deleted, or should the body of the `if` be replaced with something like:\n\n    raise AssertionError(\"This shouldn't happen\")  # pragma: no cover","files":null},{"type":3,"author":{"id":"364914f8b1c8a9131d300bf2978e4ffe2ff1aeeb"},"timestamp":1598457860,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY4MDk3MjU3Ng==","github-url":"https://github.com/dandi/dandi-cli/issues/214#issuecomment-680972576"},"message":"Do you just want to cover the parts show in the diff that aren't already covered, or do you want coverage for the whole of the modified files?\n\nFor the parts shown in the diff, I'm unsure how to test the following:\n\n* [This block](https://github.com/dandi/dandi-cli/blob/c1daa2322ef2ade67b5ff277d90fab70d6a44fc0/dandi/upload.py#L169-L175) just returns messages to be printed out.  Trying to capture the output would be complicated by the usage of pyout.  `process_path()` cannot be called directly to check its return value, as it is defined inside another function.\n\n* [This block](https://github.com/dandi/dandi-cli/blob/c1daa2322ef2ade67b5ff277d90fab70d6a44fc0/dandi/upload.py#L421-L427) tests for something that isn't supposed to happen.\n\n* [This block](https://github.com/dandi/dandi-cli/blob/c1daa2322ef2ade67b5ff277d90fab70d6a44fc0/dandi/upload.py#L522-L524) just logs \u0026 sleeps.","files":null},{"type":6,"author":{"id":"364914f8b1c8a9131d300bf2978e4ffe2ff1aeeb"},"timestamp":1598457860,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdElzc3VlQ29tbWVudEVkaXQ6Mzk1OTExOTAy"},"target":"4fa9c0a37e87cbec19b06c51e8dc0a2899980ae944bb689c2cd2e523c24d8d5c","message":"Do you just want to cover the parts show in the diff that aren't already covered, or do you want coverage for the whole of the modified files?  Also, should the PR be merged into bf-win or master?\n\nFor the parts shown in the diff, I'm unsure how to test the following:\n\n* [This block](https://github.com/dandi/dandi-cli/blob/c1daa2322ef2ade67b5ff277d90fab70d6a44fc0/dandi/upload.py#L169-L175) just returns messages to be printed out.  Trying to capture the output would be complicated by the usage of pyout.  `process_path()` cannot be called directly to check its return value, as it is defined inside another function.\n\n* [This block](https://github.com/dandi/dandi-cli/blob/c1daa2322ef2ade67b5ff277d90fab70d6a44fc0/dandi/upload.py#L421-L427) tests for something that isn't supposed to happen.\n\n* [This block](https://github.com/dandi/dandi-cli/blob/c1daa2322ef2ade67b5ff277d90fab70d6a44fc0/dandi/upload.py#L522-L524) just logs \u0026 sleeps.","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1598475722,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY4MTEyMTk1NQ==","github-url":"https://github.com/dandi/dandi-cli/issues/214#issuecomment-681121955"},"message":"in 1st and 3rd -- useful even just to smoke test it so code doesn't blow later on if we change something (expected message keys etc) and it would reach that code path only on a user system.\n\n2nd -- indeed - should not happen... especially with locking now in place.  so it is more of an assert... in this function though I think it might even be worth RFing to avoid exception and just do the same as in the first block -- yield a msg with error and return.  indeed not worth sweating over covering it up in tests, but I would still like to keep that \"assertion\" in place.","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1598475945,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY4MTEyMzcwOA==","github-url":"https://github.com/dandi/dandi-cli/issues/214#issuecomment-681123708"},"message":"\u003e Do you just want to cover the parts show in the diff that aren't already covered, or do you want coverage for the whole of the modified files? \n\nup to you... sooner or later we would need to improve testing anyways.\n\n\u003e Also, should the PR be merged into bf-win or master?\n\nI have addressed your comments and merged that PR into master to make to progress easier... yet to get to test it in bloody windows \"real life\" (chasing some other bugs atm)","files":null},{"type":4,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1598557607,"metadata":{"github-id":"MDExOkNsb3NlZEV2ZW50MzcwMTE1NzM1Mw=="},"status":2}]}