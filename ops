{"version":2,"ops":[{"type":3,"author":{"id":"364914f8b1c8a9131d300bf2978e4ffe2ff1aeeb"},"timestamp":1612888558,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDc3NjA3MDA1OQ==","github-url":"https://github.com/dandi/dandi-cli/issues/369#issuecomment-776070059"},"message":"Is is strictly necessary for these fields to be stored under `\"metadata\"` instead of at the top-level of the asset object alongside `created` etc.?","files":null},{"type":3,"author":{"id":"12cb25e6e3f19b53447b05d00d7d4d53c925c908"},"timestamp":1612889559,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDc3NjA4MTcwMw==","github-url":"https://github.com/dandi/dandi-cli/issues/369#issuecomment-776081703"},"message":"we can add anything at the top level for archive interaction, but the metadata field has to correspond to our schema and should allow us to change the schema without database migrations.","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1612890024,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDc3NjA4NzU2Nw==","github-url":"https://github.com/dandi/dandi-cli/issues/369#issuecomment-776087567"},"message":"but it seems we need to \"separate\" / subclass, or otherwise annotate schema for a local asset -vs- asset on the server.","files":null},{"type":3,"author":{"id":"12cb25e6e3f19b53447b05d00d7d4d53c925c908"},"timestamp":1612890342,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDc3NjA5MTM1Mg==","github-url":"https://github.com/dandi/dandi-cli/issues/369#issuecomment-776091352"},"message":"you need to decide which fields to check for locally during validation. it will be a bit more complicated to separate out fields, since many are shared through the commonmodel between dandiset and asset.","files":null},{"type":2,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1613415554,"metadata":{"github-id":"MDE3OlJlbmFtZWRUaXRsZUV2ZW50NDMzMzA5Mzk1Mg=="},"title":"Make validation on local assets not require identifier and contentUrl","was":"Make validation on local assets not require identifier and contentUrl"},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1613415642,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDc3OTQwMDk3NA==","github-url":"https://github.com/dandi/dandi-cli/issues/369#issuecomment-779400974"},"message":"#373 initiated the approach where could use BareAssetMeta (instead of AssetMeta) for validation of the local assets.\n\nOtherwise validation of any asset would fail ATM, which leads to e.g.\n```\ndandi@drogon:/mnt/backup/dandi/dandi-api-datasets$ git grep -B1 'field required (type=value_error.missing)' | grep identifier | nl | tail\n  6500\t000053/VALIDATION.errors-identifier\n  6501\t000053/VALIDATION.errors-identifier\n  6502\t000053/VALIDATION.errors-identifier\n  6503\t000053/VALIDATION.errors-identifier\n  6504\t000053/VALIDATION.errors-identifier\n  6505\t000053/VALIDATION.errors-identifier\n  6506\t000053/VALIDATION.errors-identifier\n  6507\t000053/VALIDATION.errors-identifier\n  6508\t000053/VALIDATION.errors-identifier\n  6509\t000053/VALIDATION.errors-identifier\n```\nfails.","files":null},{"type":4,"author":{"id":"364914f8b1c8a9131d300bf2978e4ffe2ff1aeeb"},"timestamp":1613496834,"metadata":{"github-id":"MDExOkNsb3NlZEV2ZW50NDMzNzQzOTQ2Ng=="},"status":2}]}