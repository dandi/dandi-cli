{"version":2,"ops":[{"type":6,"author":{"id":"f3557c4ceea08ee5e22c6aab1e8604bfb798bfa4"},"timestamp":1744137890,"metadata":{"github-id":"UCE_lAHODBZtRc6xqW46zncjLls"},"target":"0036b3243e7606c1c60cc763dc0071481c3989e8b7c8c563480608dce7a66386","message":"The latest version of `numcodecs`, at 0.16.0, breaks the latest Zarr releases at version 2.\n\n\u003cdetails\u003e\n\n```console\n(test) ➜  test pip list\nPackage    Version\n---------- -------\npip        25.0.1\nsetuptools 78.1.0\n(test) ➜  test pip install zarr~=2.10\nCollecting zarr~=2.10\n  Downloading zarr-2.18.6-py3-none-any.whl.metadata (5.8 kB)\nCollecting asciitree (from zarr~=2.10)\n  Using cached asciitree-0.3.3-py3-none-any.whl\nCollecting numpy\u003e=1.24 (from zarr~=2.10)\n  Using cached numpy-2.2.4-cp311-cp311-macosx_14_0_arm64.whl.metadata (62 kB)\nCollecting fasteners (from zarr~=2.10)\n  Using cached fasteners-0.19-py3-none-any.whl.metadata (4.9 kB)\nCollecting numcodecs!=0.14.0,!=0.14.1,\u003e=0.10.0 (from zarr~=2.10)\n  Using cached numcodecs-0.16.0-cp311-cp311-macosx_11_0_arm64.whl.metadata (3.0 kB)\nCollecting typing_extensions (from numcodecs!=0.14.0,!=0.14.1,\u003e=0.10.0-\u003ezarr~=2.10)\n  Using cached typing_extensions-4.13.1-py3-none-any.whl.metadata (3.0 kB)\nDownloading zarr-2.18.6-py3-none-any.whl (211 kB)\nUsing cached numcodecs-0.16.0-cp311-cp311-macosx_11_0_arm64.whl (1.2 MB)\nUsing cached numpy-2.2.4-cp311-cp311-macosx_14_0_arm64.whl (5.4 MB)\nUsing cached fasteners-0.19-py3-none-any.whl (18 kB)\nUsing cached typing_extensions-4.13.1-py3-none-any.whl (45 kB)\nInstalling collected packages: asciitree, typing_extensions, numpy, fasteners, numcodecs, zarr\nSuccessfully installed asciitree-0.3.3 fasteners-0.19 numcodecs-0.16.0 numpy-2.2.4 typing_extensions-4.13.1 zarr-2.18.6\n(test) ➜  test pip list | grep zarr\nzarr              2.18.6\n(test) ➜  test pip list | grep numcodecs\nnumcodecs         0.16.0\n(test) ➜  test python\nPython 3.11.7 (main, Jan 23 2024, 13:42:45) [Clang 15.0.0 (clang-1500.1.0.2.5)] on darwin\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n\u003e\u003e\u003e import zarr\nTraceback (most recent call last):\n  File \"\u003cstdin\u003e\", line 1, in \u003cmodule\u003e\n  File \"/Users/isaac/.pyenv/versions/test/lib/python3.11/site-packages/zarr/__init__.py\", line 3, in \u003cmodule\u003e\n    from zarr.convenience import (\n  File \"/Users/isaac/.pyenv/versions/test/lib/python3.11/site-packages/zarr/convenience.py\", line 8, in \u003cmodule\u003e\n    from zarr._storage.store import data_root, meta_root, assert_zarr_v3_api_available\n  File \"/Users/isaac/.pyenv/versions/test/lib/python3.11/site-packages/zarr/_storage/store.py\", line 10, in \u003cmodule\u003e\n    from zarr.meta import Metadata2, Metadata3\n  File \"/Users/isaac/.pyenv/versions/test/lib/python3.11/site-packages/zarr/meta.py\", line 10, in \u003cmodule\u003e\n    from zarr.util import json_dumps, json_loads\n  File \"/Users/isaac/.pyenv/versions/test/lib/python3.11/site-packages/zarr/util.py\", line 34, in \u003cmodule\u003e\n    from numcodecs.blosc import cbuffer_sizes, cbuffer_metainfo\nImportError: cannot import name 'cbuffer_sizes' from 'numcodecs.blosc' (/Users/isaac/.pyenv/versions/test/lib/python3.11/site-packages/numcodecs/blosc.cpython-311-darwin.so)\n\u003e\u003e\u003e\n```\n\u003c/details\u003e\n\nThere is already an existing issue, https://github.com/zarr-developers/numcodecs/issues/721, is filed for the problem.\n\nFor now, I will create a PR temporarily pin the `numcodecs` dependency to below `0.16.0` until that https://github.com/zarr-developers/numcodecs/issues/721 is resolved. This issue should remain open until then.\n\nPing @dandi/dandiarchive","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1744138613,"metadata":{"github-id":"IC_kwDODBZtRc6mJFOV","github-url":"https://github.com/dandi/dandi-cli/issues/1607#issuecomment-2787398549"},"message":"it is already known to hdmf ppl as well:\nhttps://github.com/hdmf-dev/hdmf-zarr/issues/269#issuecomment-2784112059","files":null},{"type":3,"author":{"id":"f3557c4ceea08ee5e22c6aab1e8604bfb798bfa4"},"timestamp":1744159447,"metadata":{"github-id":"IC_kwDODBZtRc6mLMw3","github-url":"https://github.com/dandi/dandi-cli/issues/1607#issuecomment-2787953719"},"message":"Closing this since hdmf ppl has put in the [dependency restriction](https://github.com/hdmf-dev/hdmf-zarr/pull/270/files) in the `[hdmf-zarr](https://github.com/hdmf-dev/hdmf-zarr)` package.","files":null},{"type":4,"author":{"id":"f3557c4ceea08ee5e22c6aab1e8604bfb798bfa4"},"timestamp":1744159447,"metadata":{"github-id":"CE_lADODBZtRc6xqW46zwAAAAP__OzE"},"status":2},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1744160915,"metadata":{"github-id":"IC_kwDODBZtRc6mLbG_","github-url":"https://github.com/dandi/dandi-cli/issues/1607#issuecomment-2788012479"},"message":"inquiring there further about release","files":null},{"type":3,"author":{"id":"f3557c4ceea08ee5e22c6aab1e8604bfb798bfa4"},"timestamp":1744161515,"metadata":{"github-id":"IC_kwDODBZtRc6mLiuy","github-url":"https://github.com/dandi/dandi-cli/issues/1607#issuecomment-2788043698"},"message":"\u003e inquiring there further about release\n\n`hdmf-zarr` just had a new release.","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1744173286,"metadata":{"github-id":"IC_kwDODBZtRc6mMWJv","github-url":"https://github.com/dandi/dandi-cli/issues/1607#issuecomment-2788254319"},"message":"\u003cdetails\u003e\n\u003csummary\u003eindeed -- seems to work now (and somehow I thought that pynwb already depends on hdmf-zarr\u003c/summary\u003e \n\n```shell\n rm -rf venv\n❯ py=3.11; d=venv/dev$py; python$py -m venv $d \u0026\u0026 source $d/bin/activate \u0026\u0026 pip install pynwb \u0026\u0026 python -c 'import zarr.util'\nCollecting pynwb\n  Using cached pynwb-3.0.0-py3-none-any.whl.metadata (8.9 kB)\nCollecting h5py\u003e=3.2.0 (from pynwb)\n  Using cached h5py-3.13.0-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (2.5 kB)\nCollecting hdmf\u003c5,\u003e=3.14.5 (from pynwb)\n  Using cached hdmf-4.0.0-py3-none-any.whl.metadata (10 kB)\nCollecting numpy\u003e=1.24.0 (from pynwb)\n  Using cached numpy-2.2.4-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (62 kB)\nCollecting pandas\u003e=1.2.0 (from pynwb)\n  Using cached pandas-2.2.3-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (89 kB)\nCollecting python-dateutil\u003e=2.8.2 (from pynwb)\n  Using cached python_dateutil-2.9.0.post0-py2.py3-none-any.whl.metadata (8.4 kB)\nCollecting jsonschema\u003e=3.2.0 (from hdmf\u003c5,\u003e=3.14.5-\u003epynwb)\n  Using cached jsonschema-4.23.0-py3-none-any.whl.metadata (7.9 kB)\nCollecting ruamel-yaml\u003e=0.16 (from hdmf\u003c5,\u003e=3.14.5-\u003epynwb)\n  Using cached ruamel.yaml-0.18.10-py3-none-any.whl.metadata (23 kB)\nCollecting pytz\u003e=2020.1 (from pandas\u003e=1.2.0-\u003epynwb)\n  Using cached pytz-2025.2-py2.py3-none-any.whl.metadata (22 kB)\nCollecting tzdata\u003e=2022.7 (from pandas\u003e=1.2.0-\u003epynwb)\n  Using cached tzdata-2025.2-py2.py3-none-any.whl.metadata (1.4 kB)\nCollecting six\u003e=1.5 (from python-dateutil\u003e=2.8.2-\u003epynwb)\n  Using cached six-1.17.0-py2.py3-none-any.whl.metadata (1.7 kB)\nCollecting attrs\u003e=22.2.0 (from jsonschema\u003e=3.2.0-\u003ehdmf\u003c5,\u003e=3.14.5-\u003epynwb)\n  Using cached attrs-25.3.0-py3-none-any.whl.metadata (10 kB)\nCollecting jsonschema-specifications\u003e=2023.03.6 (from jsonschema\u003e=3.2.0-\u003ehdmf\u003c5,\u003e=3.14.5-\u003epynwb)\n  Using cached jsonschema_specifications-2024.10.1-py3-none-any.whl.metadata (3.0 kB)\nCollecting referencing\u003e=0.28.4 (from jsonschema\u003e=3.2.0-\u003ehdmf\u003c5,\u003e=3.14.5-\u003epynwb)\n  Using cached referencing-0.36.2-py3-none-any.whl.metadata (2.8 kB)\nCollecting rpds-py\u003e=0.7.1 (from jsonschema\u003e=3.2.0-\u003ehdmf\u003c5,\u003e=3.14.5-\u003epynwb)\n  Using cached rpds_py-0.24.0-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (4.1 kB)\nCollecting ruamel.yaml.clib\u003e=0.2.7 (from ruamel-yaml\u003e=0.16-\u003ehdmf\u003c5,\u003e=3.14.5-\u003epynwb)\n  Using cached ruamel.yaml.clib-0.2.12-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (2.7 kB)\nCollecting typing-extensions\u003e=4.4.0 (from referencing\u003e=0.28.4-\u003ejsonschema\u003e=3.2.0-\u003ehdmf\u003c5,\u003e=3.14.5-\u003epynwb)\n  Using cached typing_extensions-4.13.1-py3-none-any.whl.metadata (3.0 kB)\nUsing cached pynwb-3.0.0-py3-none-any.whl (1.4 MB)\nUsing cached h5py-3.13.0-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (4.5 MB)\nUsing cached hdmf-4.0.0-py3-none-any.whl (334 kB)\nUsing cached numpy-2.2.4-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (16.4 MB)\nUsing cached pandas-2.2.3-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (13.1 MB)\nUsing cached python_dateutil-2.9.0.post0-py2.py3-none-any.whl (229 kB)\nUsing cached jsonschema-4.23.0-py3-none-any.whl (88 kB)\nUsing cached pytz-2025.2-py2.py3-none-any.whl (509 kB)\nUsing cached ruamel.yaml-0.18.10-py3-none-any.whl (117 kB)\nUsing cached six-1.17.0-py2.py3-none-any.whl (11 kB)\nUsing cached tzdata-2025.2-py2.py3-none-any.whl (347 kB)\nUsing cached attrs-25.3.0-py3-none-any.whl (63 kB)\nUsing cached jsonschema_specifications-2024.10.1-py3-none-any.whl (18 kB)\nUsing cached referencing-0.36.2-py3-none-any.whl (26 kB)\nUsing cached rpds_py-0.24.0-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (389 kB)\nUsing cached ruamel.yaml.clib-0.2.12-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (739 kB)\nUsing cached typing_extensions-4.13.1-py3-none-any.whl (45 kB)\nInstalling collected packages: pytz, tzdata, typing-extensions, six, ruamel.yaml.clib, rpds-py, numpy, attrs, ruamel-yaml, referencing, python-dateutil, h5py, pandas, jsonschema-specifications, jsonschema, hdmf, pynwb\nSuccessfully installed attrs-25.3.0 h5py-3.13.0 hdmf-4.0.0 jsonschema-4.23.0 jsonschema-specifications-2024.10.1 numpy-2.2.4 pandas-2.2.3 pynwb-3.0.0 python-dateutil-2.9.0.post0 pytz-2025.2 referencing-0.36.2 rpds-py-0.24.0 ruamel-yaml-0.18.10 ruamel.yaml.clib-0.2.12 six-1.17.0 typing-extensions-4.13.1 tzdata-2025.2\n\n[notice] A new release of pip is available: 24.0 -\u003e 25.0.1\n[notice] To update, run: pip install --upgrade pip\npip install pynwb  5.26s user 0.22s system 85% cpu 6.367 total\nTraceback (most recent call last):\n  File \"\u003cstring\u003e\", line 1, in \u003cmodule\u003e\nModuleNotFoundError: No module named 'zarr'\n❯ py=3.11; d=venv/dev$py; python$py -m venv $d \u0026\u0026 source $d/bin/activate \u0026\u0026 pip install pynwb hdmf-zarr \u0026\u0026 python -c 'import zarr.util'\nRequirement already satisfied: pynwb in ./venv/dev3.11/lib/python3.11/site-packages (3.0.0)\nCollecting hdmf-zarr\n  Downloading hdmf_zarr-0.11.1-py3-none-any.whl.metadata (6.7 kB)\nRequirement already satisfied: h5py\u003e=3.2.0 in ./venv/dev3.11/lib/python3.11/site-packages (from pynwb) (3.13.0)\nRequirement already satisfied: hdmf\u003c5,\u003e=3.14.5 in ./venv/dev3.11/lib/python3.11/site-packages (from pynwb) (4.0.0)\nRequirement already satisfied: numpy\u003e=1.24.0 in ./venv/dev3.11/lib/python3.11/site-packages (from pynwb) (2.2.4)\nRequirement already satisfied: pandas\u003e=1.2.0 in ./venv/dev3.11/lib/python3.11/site-packages (from pynwb) (2.2.3)\nRequirement already satisfied: python-dateutil\u003e=2.8.2 in ./venv/dev3.11/lib/python3.11/site-packages (from pynwb) (2.9.0.post0)\nCollecting numcodecs\u003c0.16.0,\u003e=0.10.0 (from hdmf-zarr)\n  Downloading numcodecs-0.15.1-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (2.9 kB)\nCollecting threadpoolctl\u003e=3.1.0 (from hdmf-zarr)\n  Using cached threadpoolctl-3.6.0-py3-none-any.whl.metadata (13 kB)\nCollecting zarr\u003c3.0,\u003e=2.18.0 (from hdmf-zarr)\n  Downloading zarr-2.18.6-py3-none-any.whl.metadata (5.8 kB)\nRequirement already satisfied: jsonschema\u003e=3.2.0 in ./venv/dev3.11/lib/python3.11/site-packages (from hdmf\u003c5,\u003e=3.14.5-\u003epynwb) (4.23.0)\nRequirement already satisfied: ruamel-yaml\u003e=0.16 in ./venv/dev3.11/lib/python3.11/site-packages (from hdmf\u003c5,\u003e=3.14.5-\u003epynwb) (0.18.10)\nCollecting deprecated (from numcodecs\u003c0.16.0,\u003e=0.10.0-\u003ehdmf-zarr)\n  Using cached Deprecated-1.2.18-py2.py3-none-any.whl.metadata (5.7 kB)\nRequirement already satisfied: pytz\u003e=2020.1 in ./venv/dev3.11/lib/python3.11/site-packages (from pandas\u003e=1.2.0-\u003epynwb) (2025.2)\nRequirement already satisfied: tzdata\u003e=2022.7 in ./venv/dev3.11/lib/python3.11/site-packages (from pandas\u003e=1.2.0-\u003epynwb) (2025.2)\nRequirement already satisfied: six\u003e=1.5 in ./venv/dev3.11/lib/python3.11/site-packages (from python-dateutil\u003e=2.8.2-\u003epynwb) (1.17.0)\nCollecting asciitree (from zarr\u003c3.0,\u003e=2.18.0-\u003ehdmf-zarr)\n  Using cached asciitree-0.3.3-py3-none-any.whl\nCollecting fasteners (from zarr\u003c3.0,\u003e=2.18.0-\u003ehdmf-zarr)\n  Using cached fasteners-0.19-py3-none-any.whl.metadata (4.9 kB)\nRequirement already satisfied: attrs\u003e=22.2.0 in ./venv/dev3.11/lib/python3.11/site-packages (from jsonschema\u003e=3.2.0-\u003ehdmf\u003c5,\u003e=3.14.5-\u003epynwb) (25.3.0)\nRequirement already satisfied: jsonschema-specifications\u003e=2023.03.6 in ./venv/dev3.11/lib/python3.11/site-packages (from jsonschema\u003e=3.2.0-\u003ehdmf\u003c5,\u003e=3.14.5-\u003epynwb) (2024.10.1)\nRequirement already satisfied: referencing\u003e=0.28.4 in ./venv/dev3.11/lib/python3.11/site-packages (from jsonschema\u003e=3.2.0-\u003ehdmf\u003c5,\u003e=3.14.5-\u003epynwb) (0.36.2)\nRequirement already satisfied: rpds-py\u003e=0.7.1 in ./venv/dev3.11/lib/python3.11/site-packages (from jsonschema\u003e=3.2.0-\u003ehdmf\u003c5,\u003e=3.14.5-\u003epynwb) (0.24.0)\nRequirement already satisfied: ruamel.yaml.clib\u003e=0.2.7 in ./venv/dev3.11/lib/python3.11/site-packages (from ruamel-yaml\u003e=0.16-\u003ehdmf\u003c5,\u003e=3.14.5-\u003epynwb) (0.2.12)\nCollecting wrapt\u003c2,\u003e=1.10 (from deprecated-\u003enumcodecs\u003c0.16.0,\u003e=0.10.0-\u003ehdmf-zarr)\n  Downloading wrapt-1.17.2-cp311-cp311-manylinux_2_5_x86_64.manylinux1_x86_64.manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (6.4 kB)\nRequirement already satisfied: typing-extensions\u003e=4.4.0 in ./venv/dev3.11/lib/python3.11/site-packages (from referencing\u003e=0.28.4-\u003ejsonschema\u003e=3.2.0-\u003ehdmf\u003c5,\u003e=3.14.5-\u003epynwb) (4.13.1)\nDownloading hdmf_zarr-0.11.1-py3-none-any.whl (32 kB)\nDownloading numcodecs-0.15.1-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (8.9 MB)\n   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 8.9/8.9 MB 5.8 MB/s eta 0:00:00\nUsing cached threadpoolctl-3.6.0-py3-none-any.whl (18 kB)\nDownloading zarr-2.18.6-py3-none-any.whl (211 kB)\n   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 211.3/211.3 kB 5.3 MB/s eta 0:00:00\nUsing cached Deprecated-1.2.18-py2.py3-none-any.whl (10.0 kB)\nUsing cached fasteners-0.19-py3-none-any.whl (18 kB)\nDownloading wrapt-1.17.2-cp311-cp311-manylinux_2_5_x86_64.manylinux1_x86_64.manylinux_2_17_x86_64.manylinux2014_x86_64.whl (83 kB)\n   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 83.2/83.2 kB 4.9 MB/s eta 0:00:00\nInstalling collected packages: asciitree, wrapt, threadpoolctl, fasteners, deprecated, numcodecs, zarr, hdmf-zarr\nSuccessfully installed asciitree-0.3.3 deprecated-1.2.18 fasteners-0.19 hdmf-zarr-0.11.1 numcodecs-0.15.1 threadpoolctl-3.6.0 wrapt-1.17.2 zarr-2.18.6\n\n[notice] A new release of pip is available: 24.0 -\u003e 25.0.1\n[notice] To update, run: pip install --upgrade pip\n\n```\n\u003c/details\u003e","files":null}]}