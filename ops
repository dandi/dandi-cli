{"version":2,"ops":[{"type":3,"author":{"id":"f3557c4ceea08ee5e22c6aab1e8604bfb798bfa4"},"timestamp":1761589691,"metadata":{"github-id":"IC_kwDODBZtRc7NzGSc","github-url":"https://github.com/dandi/dandi-cli/issues/1730#issuecomment-3452724380"},"message":"Are you saying to use different environment variable as the value of the API key when connecting to different DANDI known DANDI instances as listed in\n\n```shell\n(dandi-cli) âžœ  dandi-cli git:(master) dandi instances\ndandi:\n  api: https://api.dandiarchive.org/api\n  gui: https://dandiarchive.org\ndandi-api-local-docker-tests:\n  api: http://localhost:8000/api\n  gui: http://localhost:8085\ndandi-sandbox:\n  api: https://api.sandbox.dandiarchive.org/api\n  gui: https://sandbox.dandiarchive.org\ndandi-staging:\n  api: https://api.sandbox.dandiarchive.org/api\n  gui: https://sandbox.dandiarchive.org\nember:\n  api: https://api-dandi.emberarchive.org/api\n  gui: https://dandi.emberarchive.org\nember-sandbox:\n  api: https://api-dandi-sandbox.emberarchive.org/api\n  gui: https://apl-setup--ember-dandi-archive.netlify.app/\nlinc:\n  api: https://api.lincbrain.org/api\n  gui: https://lincbrain.org\nlinc-staging:\n  api: https://staging-api.lincbrain.org/api\n  gui: https://staging.lincbrain.org\n2025-10-27 11:11:49,228 [    INFO] Logs saved in /Users/isaac/Library/Logs/dandi-cli/2025.10.27-18.11.43Z-66382.log\n```\n\n\u003e Did you spot/change that already when looking at dandi-cli?\n\nNo, I have not. As we put dandi-cli items of the vendorization effort in Stage X in https://github.com/dandi/dandi-schema/issues/299 and dandi-cli remains largely vendor agnoistic.\n\nI think that one way to do it is to set the environment variable name for the API keys as `f'{instance_name}_API_KEY'` where the instance name is obtained through the schema config published in the `api/info` API endpoint, https://github.com/dandi/dandi-archive/pull/2430.\n\n@yarikoptic Let me know what you think.","files":null},{"type":3,"author":{"id":"f3557c4ceea08ee5e22c6aab1e8604bfb798bfa4"},"timestamp":1761592829,"metadata":{"github-id":"IC_kwDODBZtRc7Nz22O","github-url":"https://github.com/dandi/dandi-cli/issues/1730#issuecomment-3452923278"},"message":"An alternative to what I proposed above is to just used an environment variable name `f'{instance_name}_API_KEY'` with `instance_name` being the upper case version of the name of a known instance. For example,\n\nDANDI_API_KEY\nDANDI_SANBOX_API_KEY\nEMBER_API_KEY\nEMBER_SANBOX_API_KEY\n...\n\nThe dandi-cli already save the token in a similar manner, https://github.com/dandi/dandi-cli/blob/a79fffc8e8cc32637cf592a8c0bdd809eacd64e9/dandi/dandiapi.py#L482. I don't know why the environment variable is hardcoded.\n\nLet me know if you want me to use this approach. The downside of this approach is that it may not be very flexible if we are to customized instances that are not one of the known instances.","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1761595358,"metadata":{"github-id":"IC_kwDODBZtRc7N0ePX","github-url":"https://github.com/dandi/dandi-cli/issues/1730#issuecomment-3453084631"},"message":"yes, that's what I had in mind - to use `f'{instance_name.upper()}_API_KEY'` env var. \n\n@CodyCBakerPhD please also clarify what interaction you observed while working with two different instances from the same shell session ? (attn @dandi/ember )","files":null},{"type":4,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1762179245,"metadata":{"github-id":"CE_lADODBZtRc7UEdIozwAAAATQYcri"},"status":2}]}