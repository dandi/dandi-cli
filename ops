{"version":2,"ops":[{"type":6,"author":{"id":"12cb25e6e3f19b53447b05d00d7d4d53c925c908"},"timestamp":1585873656,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdElzc3VlRWRpdDozNjY5NTA2NTc="},"target":"81cfb4e2b821ca7353e97d98039dbcb6ac27c331525df48c9207c47195e63e0a","message":"a request by labs via @bendichter to know which file was converted to the dandiset. perhaps organize can upload this with the file/item metadata and dandi cli can look this up from the server.\n\nhowever in general perhaps we can add a simple provenance file:\n\n\u003cfilename 1\u003e wasDerivedFrom \u003cold filename\u003e .\n\u003cfilename1\u003e \u003csha512_or_some_such\u003e \u003csha\u003e .\n\nthis may be useful to create a manifest file later or for checking against amazon store on download.\n\nat present organize doesn't change checksums. so that notion is simply a flag for now.","files":null},{"type":6,"author":{"id":"12cb25e6e3f19b53447b05d00d7d4d53c925c908"},"timestamp":1585921524,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdElzc3VlRWRpdDozNjcxNjkwMTI="},"target":"81cfb4e2b821ca7353e97d98039dbcb6ac27c331525df48c9207c47195e63e0a","message":"a request by labs via @bendichter to know which file was converted to the dandiset. perhaps organize can upload this with the file/item metadata and dandi cli can look this up from the server.\n\nhowever in general perhaps we can add a simple provenance file:\n\n```\n\u003cfilename 1\u003e wasDerivedFrom \u003cold filename\u003e .\n\u003cfilename1\u003e \u003csha512_or_some_such\u003e \u003csha\u003e .\n```\nthis may be useful to create a manifest file later or for checking against amazon store on download.\n\nat present organize doesn't change checksums. so that notion is simply a flag for now.","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1585921086,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDYwODQzODI5NQ==","github-url":"https://github.com/dandi/dandi-cli/issues/70#issuecomment-608438295"},"message":"ATM organize indeed doesn't change files, and I hope it will never have to. We already upload object id from nwb which could be used to track which file was already uploaded. I guess there could be a dedicated function/command to check for each file if it is already known to an uploaded dandiset. Actually might just need to be an option to dandi ls.\n\nTracking provenance of changes is a much bigger issue, but since out tools don't change files yet, we aren't even in that realm yet, besides tracking uploads - #43","files":null},{"type":3,"author":{"id":"12cb25e6e3f19b53447b05d00d7d4d53c925c908"},"timestamp":1585921583,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDYwODQ0MjQ2Nw==","github-url":"https://github.com/dandi/dandi-cli/issues/70#issuecomment-608442467"},"message":"but a name change is still a change, and i think that's what the labs were looking for. till we get labs to use dandiset organization locally, it may be nice to provide such an option to `lookup` old name.","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1585927266,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDYwODUwMjQ0MA==","github-url":"https://github.com/dandi/dandi-cli/issues/70#issuecomment-608502440"},"message":"thanks for the clarification. Indeed knowing association would be helpful.\nI am thinking that adding `dandi diff` command would make most sense here.  Filed a dedicated https://github.com/dandi/dandi-cli/issues/72","files":null},{"type":3,"author":{"id":"12cb25e6e3f19b53447b05d00d7d4d53c925c908"},"timestamp":1585927413,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDYwODUwMzcyMg==","github-url":"https://github.com/dandi/dandi-cli/issues/70#issuecomment-608503722"},"message":"i think some of this is coming from the fact that @bendichter  did the conversion and uploaded, so only he has the symlinks to the original dataset. but in general this would be an issue with any member of the lab","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1585938642,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDYwODU5NDQ4Mw==","github-url":"https://github.com/dandi/dandi-cli/issues/70#issuecomment-608594483"},"message":"well, people in the lab should have access to \"organized\" version.  As long as we do not introduce options which we do not save along with organized dandiset, `organize` should be idempotent, so anyone in the lab could (re)organize (with symlinks or not), and rerun `dandi upload` which should not reupload already present files.\n \nGetting back to `diff`, I think we could provide output such as \n```\n$ dandi diff . http://dandi.../000XXX/drafts\npath1            path2\n./blah1.nwb  sub-0X/sub-0X.....nwb\n./blah2.nwb  sub-0Y/sub-0Y.....nwb   \n./blah3.nwb\n                    sub-0Z/sub-0Z....nwb \n```\nso you could see which files are the same but renamed in the 2nd path, and which are missing here or there.","files":null},{"type":3,"author":{"id":"12cb25e6e3f19b53447b05d00d7d4d53c925c908"},"timestamp":1585940740,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDYwODYwOTE2OQ==","github-url":"https://github.com/dandi/dandi-cli/issues/70#issuecomment-608609169"},"message":"that's a good starting point for now.  will the local path support a tree (or does it have to be flat).","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1585945910,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDYwODY0NDY1NQ==","github-url":"https://github.com/dandi/dandi-cli/issues/70#issuecomment-608644655"},"message":"the sky is the limit! since nothing is actually implemented ;) but it should indeed operate across subdirectories as well","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1596567068,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY2ODc2NTQzNg==","github-url":"https://github.com/dandi/dandi-cli/issues/70#issuecomment-668765436"},"message":"It seems that users reporting issues which could be mitigated by having this issue addressed. I will slate it for 0.7.0 for now","files":null}]}