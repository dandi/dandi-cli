{"version":2,"ops":[{"type":6,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1597168488,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdElzc3VlRWRpdDo0MTUwNjg2Njg="},"target":"c2f8e98fab1b41021d40ece6a682cc223699535814c72659c9ea2404a2bc93bb","message":"ATM (as of WiP #134) we retry download up to 3 times.  We do it from the beginning of the file, which might be just a waste of bandwidth and \"not productive\".  Ideally we should just \n- roll back a little to position e.g. `Y=downloaded - 2*chunk_size`\n- instruct downloader to get a stream from `Y` (not sure if girder allows, so might need to become only for direct downloads from S3)\n- download first chunk (again -- the same up to 3 times rule) and compare to the content in previously downloaded -- it matches -- proceed with writing to the file starting at position `downloaded - chunk_size`, if not -- bail and try downloading from beginning.\n\nedit1: Should probably be implemented within RFed `download` as around this point https://github.com/dandi/dandi-cli/pull/134/files#diff-f84d8150d7873723a79e1057aced4240R717 of instantiating a new `downloader` for the first/next attempt:  so that `downloader` returned by `get_download_file_iter` would need to gain a new `, startat=0` (or alike) option to start downloading from a specific offset. Unfortunately girder's `downloadFileAsIterator` does not provide such ability AFAIK, but eventually we would be going not through girder anyways, but a direct download from the URL.  As for how to do it with `requests`, here is an example: https://stackoverflow.com/a/22894873","files":null},{"type":5,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1600117110,"metadata":{"github-id":"MDEyOkxhYmVsZWRFdmVudDM3NjUzMTY3NDg="},"added":["on-hold-waiting-for-API-service"],"removed":[]},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1603473693,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDcxNTQ3MTQzMA==","github-url":"https://github.com/dandi/dandi-cli/issues/182#issuecomment-715471430"},"message":"I believe done by #247","files":null},{"type":4,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1603473693,"metadata":{"github-id":"MDExOkNsb3NlZEV2ZW50MzkxNDk0NTM3MA=="},"status":2}]}