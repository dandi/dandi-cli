{"version":2,"ops":[{"type":1,"author":{"id":"0e75956bc1f9bf7e3cd1dc71486886c85ad6bfb7"},"timestamp":1637108194,"metadata":{"github-id":"I_kwDODBZtRc4-6q3S","github-url":"https://github.com/dandi/dandi-cli/issues/836","origin":"github"},"title":"`dandi organize` introduces validation errors","message":"I ran `dandi validate` on a directory of nwb files that were already almost organized according to dandi rules, then ran `dandi organize`, and it introduced validation error. Example: file sub-Baharat/sub-Baharat_ses-Baharat-01_desc-HomeCage_behavior+ecephys.nwb was reorganized into sub-Baharat/sub-Baharat_ses-Baharat01-HomeCage_behavior+ecephys.nwb. On a seemingly random subset of files (41 files out of ~500, which appear to have nothing in common), I get the following validation error:\n```\n2021-11-16T15:59:26-0800 [ERROR   ] dandi 68496:68500   \nFailed to read metadata: Link iteration failed (file read failed: time = Mon Nov 15 17:54:26 2021,\n filename = '\\\\hub.gladstone.internal\\huanglab-lfp\\Emily\\DREADDs_NWB\\000165\\sub-Baharat\\sub-Baharat_ses-Baharat01-HomeCage_behavior+ecephys.nwb',\n file descriptor = 9, errno = 22, error message = 'Invalid argument', buf = 000002A8A5BE9050,\n total read size = 512, bytes this sub-read = 512, bytes actually read = 18446744073709551615, offset = 680)\n```\n\nThe renamed+copied file and the original file are the same size. If I copy the original file into the organized directory and rename it manually, I get no validation errors.","files":null}]}