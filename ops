{"version":2,"ops":[{"type":3,"author":{"id":"364914f8b1c8a9131d300bf2978e4ffe2ff1aeeb"},"timestamp":1666883417,"metadata":{"github-id":"IC_kwDODBZtRc5NG_u4","github-url":"https://github.com/dandi/dandi-cli/issues/1146#issuecomment-1293679544"},"message":"@yarikoptic What do you mean, \"whenever it should skip those\"?  There's no rule (at the moment) that those should be ignored for Zarr checksum purposes.\n\nPossible duplicate: #1086","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1666884104,"metadata":{"github-id":"IC_kwDODBZtRc5NHEPs","github-url":"https://github.com/dandi/dandi-cli/issues/1146#issuecomment-1293698028"},"message":"It \"should\" as that we should skip those in zarr-digest estimation -- might indeed just require fix for #1086, but I think skipping `.dandi` and `.datalad` is specific to zarr checksumming , and if we decide to use threaded walk for something else we might or not want to skip them.","files":null},{"type":3,"author":{"id":"364914f8b1c8a9131d300bf2978e4ffe2ff1aeeb"},"timestamp":1666884355,"metadata":{"github-id":"IC_kwDODBZtRc5NHFkA","github-url":"https://github.com/dandi/dandi-cli/issues/1146#issuecomment-1293703424"},"message":"@yarikoptic \n\n* Exactly what files should be skipped?  Note that backups2datalad currently regards `.dandi/`, `.datalad/`, `.git/`, `.gitattributes`, and `.gitmodules` as special and ignored for traversal purposes.\n* Should these files only be ignored when they occur at the root of the Zarr or anywhere in the Zarr?\n* Should the exclusion only apply to the `dandi digest` command or also to uploading Zarrs?","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1666884764,"metadata":{"github-id":"IC_kwDODBZtRc5NHHzd","github-url":"https://github.com/dandi/dandi-cli/issues/1146#issuecomment-1293712605"},"message":"\u003e * Exactly what files should be skipped?  Note that backups2datalad currently regards `.dandi/`, `.datalad/`, `.git/`, `.gitattributes`, and `.gitmodules` as special and ignored for traversal purposes.\n\nLet's skip all those.\n\n\u003e * Should these files only be ignored when they occur at the root of the Zarr or anywhere in the Zarr?\n\nAFAIK they should be present only at the root. If we could easily add a check - if any of those happen anywhere not there then raise some RuntimeException -- would be the best so we do not miss some obscure use case.  If that is tricky to do -- let's just skip them everywhere since I am not expecting them to be a part of any zarr folder anywhere under.\n\n\u003e * Should the exclusion only apply to the `dandi digest` command or also to uploading Zarrs?\n\nalso to uploading, thanks for checking on that.","files":null},{"type":3,"author":{"id":"364914f8b1c8a9131d300bf2978e4ffe2ff1aeeb"},"timestamp":1666900565,"metadata":{"github-id":"IC_kwDODBZtRc5NINcZ","github-url":"https://github.com/dandi/dandi-cli/issues/1146#issuecomment-1293997849"},"message":"@yarikoptic\n\n* If we're applying this exclusion to uploading, should we also exclude when downloading a Zarr (i.e., don't delete any local special files when synchronizing the file set) ?\n* I think trying to ignore these files regardless of what depth they appear at may make it difficult to enforce the \"no more than 7 directories deep\" check on Zarrs.","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1666901973,"metadata":{"github-id":"IC_kwDODBZtRc5NIS4O","github-url":"https://github.com/dandi/dandi-cli/issues/1146#issuecomment-1294020110"},"message":"\u003e @yarikoptic\n\u003e \n\u003e * If we're applying this exclusion to uploading, should we also exclude when downloading a Zarr (i.e., don't delete any local special files when synchronizing the file set) ?\n\nHmm, I can't see any legit use case where we would have some local special files to coexist with new downloaded files from Zarr. Do you see the need/use case?\n\n\u003e * I think trying to ignore these files regardless of what depth they appear at may make it difficult to enforce the \"no more than 7 directories deep\" check on Zarrs.\n\nOk, let's just ignore on top only then for now","files":null},{"type":3,"author":{"id":"364914f8b1c8a9131d300bf2978e4ffe2ff1aeeb"},"timestamp":1666902387,"metadata":{"github-id":"IC_kwDODBZtRc5NIUcz","github-url":"https://github.com/dandi/dandi-cli/issues/1146#issuecomment-1294026547"},"message":"@yarikoptic \n\n\u003e Do you see the need/use case?\n\n`dandi download` can be used to sync a local Zarr with a copy on the server.  If the local copy is also a Git repository/DataLad dataset, then downloading will currently delete `.git` and other special files from the Zarr.  I don't know whether you consider that a likely use case, but if someone is already uploading a Zarr stored with special files (which seems unlikely to me), downloading into such a setup doesn't seem that unlikely.","files":null},{"type":3,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1666903951,"metadata":{"github-id":"IC_kwDODBZtRc5NIaL0","github-url":"https://github.com/dandi/dandi-cli/issues/1146#issuecomment-1294050036"},"message":"Indeed it could potentially be used for such case. Not sure though I would worry about special-casing for it here in download. Please proceed the way you see it be best.","files":null},{"type":4,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1667226864,"metadata":{"github-id":"CE_lADODBZtRc5U-_yYzwAAAAHLP62y"},"status":2}]}