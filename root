{"version":2,"ops":[{"type":1,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1626963918,"metadata":{"github-id":"MDU6SXNzdWU5NTA3Mjc3MjM=","github-url":"https://github.com/dandi/dandi-cli/issues/726","origin":"github"},"title":"Move etelemetry logic to become in effect also when used as a Python library","message":"ATM we have etelemetry under `cli/command.py:main` so it is only in effect for CLI.  As we will use it now to prevent \"bad\" versions (https://github.com/dandi/dandi-cli/pull/725), we should make it used consistently between CLI and when used as a Python module.\n\nNot yet sure how to not bother with etelemetry if user does use CLI but merely for `--help` -- I guess it is ok to do all etelemetry checks/etc, but if we are to fail on bad version, we should not bother with etelemetry for \"every import\".\n\nSince the main rationale is for \"interactions with dandiarchive\" I think we should \n\n- make etelemetry check helper a \"run once\" (so even if invoked multiple times - checks only once)\n- keep it at CLI level where it is\n- add to top level `DandiAPIClient.__init__` \n\n@satra - do you foresee any other aspects I forgot, or locations where to do the check? e.g. `organize` in principle also a worthy location to perform the check, but since used most likely through CLI -- should be covered.","files":null}]}