{"version":2,"ops":[{"type":1,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1614013171,"metadata":{"github-id":"MDU6SXNzdWU4MTM2ODMxMDY=","github-url":"https://github.com/dandi/dandi-cli/issues/410","origin":"github"},"title":"dandi-api: more logging to troubleshoot problems","message":"ATM we only yield messages that validation failed but do not log.  Messages (as displayed by pyout) are truncated to be visible on the screen and thus might not actually show what has happened, e.g.\n\n```\ndrogon:/mnt/backup/dandi/dandisets/000003\n*$\u003e DANDI_DEVEL=1 dandi -l 1 --pdb upload -i dandi-api --existing=force sub-YutaMouse33/\nPATH                                                            SIZE        ERRORS         UPLOAD STATUS            MESSAGE                                      CURRENT\n.../sub-YutaMouse33_ses-YutaMouse33-150218_behavior+ecephys.nwb 11.9 GB        3                  skipped           failed validation\n.../sub-YutaMouse33_ses-YutaMouse33-150219_behavior+ecephys.nwb 19.6 GB        0                  done\n.../sub-YutaMouse33_ses-YutaMouse33-150220_behavior+ecephys.nwb 22.9 GB        0                  done\n.../sub-YutaMouse33_ses-YutaMouse33-150221_behavior+ecephys.nwb 28.9 GB        0                  done\n.../sub-YutaMouse33_ses-YutaMouse33-150226_behavior+ecephys.nwb 27.5 GB        0                  done\n.../sub-YutaMouse33_ses-YutaMouse33-150222_behavior+ecephys.nwb 160.5 GB       0                  ERROR             Server-side asset validation failed!  Err...\n.../sub-YutaMouse33_ses-YutaMouse33-150223_behavior+ecephys.nwb 143.5 GB       0             100% ERROR             Server-side asset validation failed!  Err... 143508573281\n.../sub-YutaMouse33_ses-YutaMouse33-150224_behavior+ecephys.nwb 143.8 GB       0                  ERROR             Server-side asset validation failed!  Err...\n.../sub-YutaMouse33_ses-YutaMouse33-150225_behavior+ecephys.nwb 97.5 GB        0                  ERROR             Server-side asset validation failed!  Err...\nSummary:                                                        656.1 GB 1 with errors  19.8 MB/s 1 skipped         1 failed validation\n                                                                                                  4 done            4 Server-side asset validation failed!  E...\n```\n\nWe originally avoided logging in all the \"under pyout\" operation, but now (thanks to #401) that logging is not interfering with pyout, we should log as much as useful:\n- `lgr.warning` or even `lgr.error` whenever validation or upload or validation has failed\n- `lgr.info` upon successful finish of upload/download operation\n- `lgr.debug` for anything extra we feel might come handy while troubleshooting","files":null}]}