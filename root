{"version":2,"ops":[{"type":1,"author":{"id":"f068089e26f6e2e30d51a62e75a77af7d9dc5ecb"},"timestamp":1643392265,"metadata":{"github-id":"I_kwDODBZtRc5Cnnaq","github-url":"https://github.com/dandi/dandi-cli/issues/889","origin":"github"},"title":"DandiAPIClient not working for staging","message":"works as expected:\n\n```python\nclient = DandiAPIClient()\nclient.get_dandiset(\"000055\").get_metadata()\n```\n\nhowever this throws an error:\n\n```python\nclient = DandiAPIClient(\"https://gui-staging.dandiarchive.org\")\nclient.get_dandiset(\"101267\").get_metadata()\n```\n\n```python\n---------------------------------------------------------------------------\nHTTPError                                 Traceback (most recent call last)\n/opt/conda/lib/python3.8/site-packages/dandi/dandiapi.py in _get_data(self)\n    636             try:\n--\u003e 637                 self._data = self.client.get(f\"/dandisets/{self.identifier}/\")\n    638             except requests.HTTPError as e:\n\n/opt/conda/lib/python3.8/site-packages/dandi/dandiapi.py in get(self, path, **kwargs)\n    293         \"\"\"\n--\u003e 294         return self.request(\"GET\", path, **kwargs)\n    295 \n\n/opt/conda/lib/python3.8/site-packages/dandi/dandiapi.py in request(self, method, path, params, data, files, json, headers, json_resp, retry_statuses, **kwargs)\n    265                 lgr.error(\"%s: %s\", msg, result.text)\n--\u003e 266             raise requests.HTTPError(msg, response=result)\n    267 \n\nHTTPError: Error 404 while sending GET request to https://gui-staging.dandiarchive.org/dandisets/101267/\n\nDuring handling of the above exception, another exception occurred:\n\nNotFoundError                             Traceback (most recent call last)\n/tmp/ipykernel_316/3875352354.py in \u003cmodule\u003e\n      1 client = DandiAPIClient(\"https://gui-staging.dandiarchive.org\")\n----\u003e 2 client.get_dandiset(\"101267\").get_metadata()\n\n/opt/conda/lib/python3.8/site-packages/dandi/dandiapi.py in get_metadata(self)\n    848         `dandischema.models.Dandiset` instance\n    849         \"\"\"\n--\u003e 850         return models.Dandiset.parse_obj(self.get_raw_metadata())\n    851 \n    852     def get_raw_metadata(self) -\u003e Dict[str, Any]:\n\n/opt/conda/lib/python3.8/site-packages/dandi/dandiapi.py in get_raw_metadata(self)\n    856         \"\"\"\n    857         try:\n--\u003e 858             return cast(Dict[str, Any], self.client.get(self.version_api_path))\n    859         except requests.HTTPError as e:\n    860             if e.response.status_code == 404:\n\n/opt/conda/lib/python3.8/site-packages/dandi/dandiapi.py in version_api_path(self)\n    729         Dandiset are made\n    730         \"\"\"\n--\u003e 731         return f\"/dandisets/{self.identifier}/versions/{self.version_id}/\"\n    732 \n    733     @property\n\n/opt/conda/lib/python3.8/site-packages/dandi/dandiapi.py in version_id(self)\n    647         \"\"\"The identifier for the Dandiset version\"\"\"\n    648         if self._version_id is None:\n--\u003e 649             self._version_id = self.version.identifier\n    650         return self._version_id\n    651 \n\n/opt/conda/lib/python3.8/site-packages/dandi/dandiapi.py in version(self)\n    655         if self._version is None:\n    656             if self._version_id is None:\n--\u003e 657                 self._get_data()\n    658             if self._data is not None:\n    659                 for vattr in [\"most_recent_published_version\", \"draft_version\"]:\n\n/opt/conda/lib/python3.8/site-packages/dandi/dandiapi.py in _get_data(self)\n    638             except requests.HTTPError as e:\n    639                 if e.response.status_code == 404:\n--\u003e 640                     raise NotFoundError(f\"No such Dandiset: {self.identifier}\")\n    641                 else:\n    642                     raise\n\nNotFoundError: No such Dandiset: 101267\n```","files":null}]}