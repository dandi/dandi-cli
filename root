{"version":2,"ops":[{"type":1,"author":{"id":"f068089e26f6e2e30d51a62e75a77af7d9dc5ecb"},"timestamp":1655360199,"metadata":{"github-id":"I_kwDODBZtRc5L4gO9","github-url":"https://github.com/dandi/dandi-cli/issues/1031","origin":"github"},"title":"file fails validation","message":"I am trying to upload this file\n[ecephys_tutorial.nwb.zip](https://github.com/dandi/dandi-cli/files/8916143/ecephys_tutorial.nwb.zip)\n\nbut when I run `dandi upload` I get \n\n```\nPATH                        SIZE     ERRORS UPLOAD STATUS           MESSAGE                  \ndandiset.yaml               4.5 kB                 skipped          should be edited online  \nsub-001/sub-001_ecephys.nwb 204.1 kB               pre-validating                            \nPATH                        SIZE        ERRORS     UPLOAD STATUS           MESSAGE                  \ndandiset.yaml               4.5 kB                        skipped          should be edited online  \nsub-001/sub-001_ecephys.nwb 204.1 kB       1              skipped          failed validation        \nSummary:                    208.7 kB 1 with e\nrrors        2 skipped        1 should be edited online\n                                                                           1 failed validation      \n```\n\nThe log does not appear to give me any useful information about why validation failed\n\n[20220616060840Z-86009.log](https://github.com/dandi/dandi-cli/files/8916150/20220616060840Z-86009.log)\n\nThe standard way of validating NWB files, `python -m pynwb.validate sub-001/sub-001_ecephys.nwb` yields no errors.\n\nRunning nwbinspector does not help either, as all of the messages are \"best practice suggestions\" and should not prevent an upload:\n\n```\n(base) MacBook-Pro-5:000121 bendichter$ nwbinspector --config dandi sub-001/sub-001_ecephys.nwb \nInspecting NWBFiles...:   0%|                                                                                                                                    | 0/1 [00:00\u003c?, ?it/s]/Users/bendichter/opt/miniconda3/lib/python3.9/site-packages/pynwb/ecephys.py:93: UserWarning: The second dimension of data does not match the length of electrodes. Your data may be transposed.\n  warnings.warn(\"The second dimension of data does not match the length of electrodes. Your data may be \"\n                                                                                                                                                                                       \n\n**************************************************\nNWBInspector Report Summary\n\nTimestamp: 2022-06-16 02:14:22.338099-04:00\nPlatform: macOS-10.16-x86_64-i386-64bit\nNWBInspector version: 0.4.0\n\nFound 5 issues over 1 files:\n       5 - BEST_PRACTICE_SUGGESTION\n**************************************************\n\n\n0  BEST_PRACTICE_SUGGESTION\n===========================\n\n0.0  sub-001/sub-001_ecephys.nwb: None - 'None' object with name 'None'\n       Message: The second dimension of data does not match the length of electrodes. Your data may be transposed.\n\n0.1  sub-001/sub-001_ecephys.nwb: None - 'None' object with name 'None'\n       Message: Description is missing.\n\n0.2  sub-001/sub-001_ecephys.nwb: None - 'None' object with name 'None'\n       Message: Description ('no description') is a placeholder.\n\n0.3  sub-001/sub-001_ecephys.nwb: None - 'None' object with name 'None'\n       Message: Metadata /general/keywords is missing.\n\n0.4  sub-001/sub-001_ecephys.nwb: None - 'None' object with name 'None'\n       Message: Subject.sex is missing.\n\n```\n\nTwo separate issues here.\n1. Why isn't this file validating?\n2. This is a bad user experience. Even if this file is not up to DANDI standards there needs to be a better communication of why.","files":null}]}