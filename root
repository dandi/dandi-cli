{"version":2,"ops":[{"type":1,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1618418408,"metadata":{"github-id":"MDU6SXNzdWU4NTgwNzIyMzM=","github-url":"https://github.com/dandi/dandi-cli/issues/570","origin":"github"},"title":"upload -i dandi-api stalled","message":"was uploading 000003 \"for testing\".  Found that I still have that process running with\n\n```\n...use23-140804_behavior+ecephys.nwb 10.3 GB        0             100% uploading\n...use23-140805_behavior+ecephys.nwb 9.7 GB         0             100% done\n...use23-140806_behavior+ecephys.nwb 14.3 GB        0             100% done\nSummary:                             2.6 TB   1 with errors 639.5 MB/s 1 skipped         1 should be ed...\n                                                                       100 done\n                                                                       1 uploading\n\n```\nin the trailer of the output.  I do not see that \"uploading\" file listed in the log\n```\n$ grep use23-140804_behavior.ecephys.nwb /home/yoh/.cache/dandi-cli/log/20210409145439Z-13654.log\n```\nand following \n```shell\n*$\u003e grep Retry /home/yoh/.cache/dandi-cli/log/20210409145439Z-13654.log | sed -e 's,uploadId=[^ ]*,uploadId=SENSORED,g'\n2021-04-09T10:59:50-0400 [WARNING ] dandi 13654:140499134412544 Retrying requests.sessions.Session.put in 1.1 seconds as it raised SSLError: HTTPSConnectionPool(host='dandiarchive.s3.amazonaws.com', port=443): Max\n retries exceeded with url: /blobs/92a/126/92a1269d-cf17-4890-adb0-d49e68e5bb7a?uploadId=SENSORED (Caused by SSLError(SSLZeroReturnError(6, 'TLS/SSL connection has been closed (EOF) (_ssl.c:1124)'))).\n2021-04-09T11:08:48-0400 [WARNING ] dandi 13654:140500115908352 Retrying requests.sessions.Session.post in 1.1 seconds as it returned \u003cResponse [503]\u003e.\n2021-04-09T11:20:44-0400 [WARNING ] dandi 13654:140499780364032 Retrying requests.sessions.Session.put in 1.1 seconds as it raised SSLError: HTTPSConnectionPool(host='dandiarchive.s3.amazonaws.com', port=443): Max\n retries exceeded with url: /blobs/976/118/97611870-277f-4570-ab8b-517c0daa7d0f?uploadId=SENSORED (Caused by SSLError(SSLZeroReturnError(6, 'TLS/SSL connection has been closed (EOF) (_ssl.c:1124)'))).\n```\nwhich I do not know if relate to this particular one or not (didn't do some kind of matching to blobs).  dandi-cli was 0.12.1+64.gcebdf86 .\n\nnot sure at what stage/how upload was stalled but most likely at requests level . I wonder if we should add some timeout for all the put/posts we do so we could catch such cases. WDYT @jwodder ?\n\nmeanwhile -- interrupted and reuploading","files":null}]}