{"version":2,"ops":[{"type":1,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1644520331,"metadata":{"github-id":"I_kwDODBZtRc5DZW3u","github-url":"https://github.com/dandi/dandi-cli/issues/906","origin":"github"},"title":"provide \"update zarr\" functionality","message":"zarr folders are heavy, and likely to fail to upload at any specific point in time and would need to be \"continued\" or \"fixed up\" (that is our C2 in #903).\n\nAlso relates to https://github.com/dandi/dandi-cli/issues/903 as possibly solution might incorporate \"in band\" compute of the checksum across files to be uploaded (or not).\n\nWe need to\n\n- generate an asset immediately when we initiate a new `zarr_id` -- that would associate a given dandiset (id) and zarr path with a `zarr_id` so we could re-upload\n- when we encounter already existing zarr asset for the path, we should not initiate a new zarr but modify existing\n  - unless it is completely empty (all of those have the same checksum; but also size 0 and filenumber 0) we need to\n    - get a list of files in the zarr\n    - get a list of files locally\n    - for those which are present on both, compare checksums\n    - \"schedule\" the ones missing or different on the server to be uploaded\n    - after uploads complete, remove files which are not present locally but present remotely\n  - if it was completely empty, we can avoid getting a list and assume it is `[]` and proceed with the same algorithm really, so no need of special casing","files":null}]}