{"version":2,"ops":[{"type":1,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1599084407,"metadata":{"github-id":"MDU6SXNzdWU2OTE0NjI3ODE=","github-url":"https://github.com/dandi/dandi-cli/issues/228","origin":"github"},"title":"Changes in dandi-publish broke downloader","message":"```shell\n$\u003e dandi --pdb -l debug download -f debug https://dandiarchive.org/dandiset/000027/0.200721.2222\n2020-09-02 18:04:53,725 [   DEBUG] Running a newer version (0.6.2+57.g00414f5) of dandi/dandi-cli than available (0.6.1)\n2020-09-02 18:04:53,833 [   DEBUG] Parsing url https://dandiarchive.org/dandiset/000027/0.200721.2222\n2020-09-02 18:04:54,444 [   DEBUG] Parsing url https://gui.dandiarchive.org/#/dandiset/000027/0.200721.2222\n2020-09-02 18:04:54,451 [   DEBUG] Parsed into ('api', 'https://publish.dandiarchive.org/api/', 'dandiset', {'dandiset_id': '000027', 'version': '0.200721.2222'})\n2020-09-02 18:04:54,452 [    INFO] Traversing 000027 (version: 0.200721.2222)\n2020-09-02 18:04:54,718 [ WARNING] Got completely empty metadata record for dandiset, not producing dandiset.yaml\n2020-09-02 18:04:54,798 [   DEBUG] Caught exception Invalid isoformat string: '2020-07-21T22:22:16.882641Z'\nTraceback (most recent call last):\n  File \"/home/yoh/proj/dandi/dandi-cli/venvs/dev3/bin/dandi\", line 11, in \u003cmodule\u003e\n    load_entry_point('dandi', 'console_scripts', 'dandi')()\n  File \"/usr/lib/python3/dist-packages/click/core.py\", line 764, in __call__\n    return self.main(*args, **kwargs)\n  File \"/usr/lib/python3/dist-packages/click/core.py\", line 717, in main\n    rv = self.invoke(ctx)\n  File \"/usr/lib/python3/dist-packages/click/core.py\", line 1137, in invoke\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\n  File \"/usr/lib/python3/dist-packages/click/core.py\", line 956, in invoke\n    return ctx.invoke(self.callback, **ctx.params)\n  File \"/usr/lib/python3/dist-packages/click/core.py\", line 555, in invoke\n    return callback(*args, **kwargs)\n  File \"/home/yoh/proj/dandi/dandi-cli/dandi/cli/base.py\", line 106, in wrapper\n    return f(*args, **kwargs)\n  File \"/home/yoh/proj/dandi/dandi-cli/dandi/cli/cmd_download.py\", line 95, in download\n    return download.download(\n  File \"/home/yoh/proj/dandi/dandi-cli/dandi/download.py\", line 317, in download\n    for rec in gen_:\n  File \"/home/yoh/proj/dandi/dandi-cli/dandi/download.py\", line 471, in download_generator\n    for resp in _download_generator:\n  File \"/home/yoh/proj/dandi/dandi-cli/dandi/download.py\", line 697, in _download_file\n    if is_same_time(stat.st_mtime, mtime):\n  File \"/home/yoh/proj/dandi/dandi-cli/dandi/utils.py\", line 114, in is_same_time\n    norm_times = [\n  File \"/home/yoh/proj/dandi/dandi-cli/dandi/utils.py\", line 115, in \u003clistcomp\u003e\n    ensure_datetime(t, strip_tzinfo=strip_tzinfo, tz=datetime.timezone.utc)\n  File \"/home/yoh/proj/dandi/dandi-cli/dandi/utils.py\", line 175, in ensure_datetime\n    t = fromisoformat(t)\n  File \"/home/yoh/proj/dandi/dandi-cli/dandi/utils.py\", line 155, in fromisoformat\n    return datetime.datetime.fromisoformat(t)\nValueError: Invalid isoformat string: '2020-07-21T22:22:16.882641Z'\n\n\u003e /home/yoh/proj/dandi/dandi-cli/dandi/utils.py(155)fromisoformat()\n-\u003e return datetime.datetime.fromisoformat(t)\n```\n\nPS I have \"released\" 0.6.2 on github now, so etelemetry should become happy again","files":null}]}