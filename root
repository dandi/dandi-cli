{"version":2,"ops":[{"type":1,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1625599518,"metadata":{"github-id":"MDU6SXNzdWU5MzgxOTI5NjI=","github-url":"https://github.com/dandi/dandi-cli/issues/700","origin":"github"},"title":"provide LD-ready `ls -f jsonld{,_pp}` output?","message":"@satra , sorry for a basic LD question -- how would we do that? ;)\n\n@surchs is interested to see how dandischema records might look like in json-ld and might be interested to use/help with all json-ld'ification.\n\nATM we have a https://raw.githubusercontent.com/dandi/schema/master/releases/0.4.4/context.json which we do provide in json representation of the metadata for Dandiset:\n\n\u003cdetails\u003e\n\u003csummary\u003ean example of a \"json_dict\" dump of a Dandiset\u003c/summary\u003e \n\n```shell\n(dandisets) dandi@drogon:/mnt/backup/dandi/dandisets$ for ds in 000*; do python -c \"from dandischema.models import Dandiset; import yaml; ds = Dandiset.unvalidated(**yaml.load(open('$ds/dandiset.yaml'), Loader=yaml.FullLoader));print(ds.json(indent=2))\" \u0026\u0026 echo $ds; break; done\n{ \n  \"@context\": \"https://raw.githubusercontent.com/dandi/schema/master/releases/0.4.4/context.json\",\n  \"about\": [\n    { \n      \"identifier\": \"UBERON:0002436\",\n      \"name\": \"primary visual cortex\",\n      \"schemaKey\": \"Anatomy\"\n    }\n  ],\n  \"access\": [\n    { \n      \"contactPoint\": {\n        \"email\": \"petersen.peter@gmail.com\",\n        \"schemaKey\": \"ContactPoint\"\n      },\n      \"status\": \"dandi:OpenAccess\"\n    }\n  ],\n  \"assetsSummary\": {\n    \"approach\": [\n      { \n        \"name\": \"electrophysiological approach\",\n        \"schemaKey\": \"ApproachType\"\n      },\n      { \n        \"name\": \"behavioral approach\",\n        \"schemaKey\": \"ApproachType\"\n      }\n    ],\n    \"dataStandard\": [\n      { \n        \"identifier\": \"RRID:SCR_015242\",\n        \"name\": \"Neurodata Without Borders (NWB)\",\n        \"schemaKey\": \"StandardsType\"\n      }\n    ],\n    \"measurementTechnique\": [\n      { \n        \"name\": \"signal filtering technique\",\n        \"schemaKey\": \"MeasurementTechniqueType\"\n      },\n      { \n        \"name\": \"fourier analysis technique\",\n        \"schemaKey\": \"MeasurementTechniqueType\"\n      },\n      { \n        \"name\": \"spike sorting technique\",\n        \"schemaKey\": \"MeasurementTechniqueType\"\n      },\n      { \n        \"name\": \"behavioral technique\",\n        \"schemaKey\": \"MeasurementTechniqueType\"\n      },\n      { \n        \"name\": \"multi electrode extracellular electrophysiology recording technique\",\n        \"schemaKey\": \"MeasurementTechniqueType\"\n      }\n    ],\n    \"numberOfBytes\": 2559248010229,\n    \"numberOfFiles\": 101,\n    \"numberOfSubjects\": 16,\n    \"schemaKey\": \"AssetsSummary\",\n    \"species\": [\n      { \n        \"identifier\": \"http://purl.obolibrary.org/obo/NCBITaxon_10090\",\n        \"name\": \"House mouse\",\n        \"schemaKey\": \"SpeciesType\"\n      }\n    ],\n    \"variableMeasured\": [\n      \"DecompositionSeries\",\n      \"LFP\",\n      \"Units\",\n      \"Position\",\n      \"ElectricalSeries\"\n    ]\n  },\n  \"citation\": \"Senzai, Yuta; Fernandez-Ruiz, Antonio; Buzs\\u00e1ki, Gy\\u00f6rgy (2021) Layer-Specific Physiological Features and Interlaminar Interactions in the Primary Visual Cortex of the Mouse (Version draft) [Data set]. DANDI archive. https://dandiarchive.org/dandiset/000003/draft\",\n  \"contributor\": [\n    { \n      \"affiliation\": [],\n      \"includeInCitation\": true,\n      \"name\": \"Senzai, Yuta\",\n      \"roleName\": [\n        \"dcite:Author\",\n        \"dcite:ContactPerson\",\n        \"dcite:DataCollector\",\n        \"dcite:FormalAnalysis\"\n      ],\n      \"schemaKey\": \"Person\"\n    },\n    { \n      \"affiliation\": [],\n      \"identifier\": \"0000-0001-8481-0796\",\n      \"includeInCitation\": true,\n      \"name\": \"Fernandez-Ruiz, Antonio\",\n      \"roleName\": [\n        \"dcite:Author\",\n        \"dcite:FormalAnalysis\"\n      ],\n      \"schemaKey\": \"Person\"\n    },\n    { \n      \"affiliation\": [\n        { \n          \"contactPoint\": [],\n          \"identifier\": \"https://ror.org/005dvqh91\",\n          \"includeInCitation\": false,\n          \"name\": \"New York University Langone Medical Center\",\n          \"roleName\": [],\n          \"schemaKey\": \"Affiliation\",\n          \"url\": \"http://nyulangone.org/\"\n        }\n      ],\n      \"identifier\": \"0000-0002-3100-4800\",\n      \"includeInCitation\": true,\n      \"name\": \"Buzs\\u00e1ki, Gy\\u00f6rgy\",\n      \"roleName\": [\n        \"dcite:Author\"\n      ],\n      \"schemaKey\": \"Person\"\n    }\n  ],\n  \"description\": \"Data from \\\"Layer-Specific Physiological Features and Interlaminar Interactions in the Primary Visual Cortex of the Mouse\\\" Senzai, Fernandez-Ruiz, Buzsaki, Neuron 2019. Electrophysiology recordings of hippocampus during theta maze exploration.\",\n  \"ethicsApproval\": [],\n  \"id\": \"DANDI:000003/draft\",\n  \"identifier\": \"DANDI:000003\",\n  \"keywords\": [\n    \"cell types\",\n    \"cortical layers\",\n    \"current source density\",\n    \"laminar recordings\",\n    \"optogenetics\",\n    \"oscillations\",\n    \"primary visual cortex\",\n    \"sleep\",\n    \"alpha rhythm\"\n  ],\n  \"license\": [\n    \"spdx:CC-BY-4.0\"\n  ],\n  \"manifestLocation\": [],\n  \"name\": \"Layer-Specific Physiological Features and Interlaminar Interactions in the Primary Visual Cortex of the Mouse\",\n  \"protocol\": [],\n  \"relatedResource\": [\n    { \n      \"identifier\": \"doi:10.1016/j.neuron.2016.12.011\",\n      \"relation\": \"dcite:IsDescribedBy\",\n      \"url\": \"https://doi.org/10.1016/j.neuron.2016.12.011\"\n    }\n  ],\n  \"repository\": \"https://dandiarchive.org/\",\n  \"schemaKey\": \"Dandiset\",\n  \"schemaVersion\": \"0.4.4\",\n  \"studyTarget\": [],\n  \"url\": \"https://dandiarchive.org/dandiset/000003/draft\",\n  \"version\": \"draft\",\n  \"wasGeneratedBy\": [],\n  \"acknowledgement\": null,\n  \"dateCreated\": null,\n  \"dateModified\": null\n}\n\n```\n\u003c/details\u003e\n\nbut I guess many items/contexts are just \"ending\" at `dandi:` and even `age` is not really \"linked\" anywhere.\n\n\u003cdetails\u003e\n\u003csummary\u003eand if we do add @context to `Dandiset`'s json_dict dump, it seems absent from an asset record\u003c/summary\u003e \n\n```shell\n$\u003e python -c 'import json; from dandischema.models import Asset; from dandi.dandiapi import DandiAPIClient as C; c=C(); ds = c.get_dandiset(\"000004\"); asset = next(ds.get_assets());print(json.dumps(Asset(**asset.get_raw_metadata()).json_dict(), indent=2))'\n{\n  \"id\": \"dandiasset:38304fe9-5f37-4c0d-a741-9cf2bafab9ff\",\n  \"schemaKey\": \"Asset\",\n  \"schemaVersion\": \"0.4.4\",\n  \"keywords\": [\n    \"Intracranial Recordings\",\n    \"Intractable Epilepsy\",\n    \"Single-Unit Recordings\",\n    \"Cognitive Neuroscience\",\n    \"Learning\",\n    \"Memory\",\n    \"Neurosurgery\"\n  ],\n  \"access\": [\n    {\n      \"schemaKey\": \"AccessRequirements\",\n      \"status\": \"dandi:OpenAccess\"\n    }\n  ],\n  \"repository\": \"https://dandiarchive.org/\",\n  \"wasGeneratedBy\": [\n    {\n      \"id\": \"urn:uuid:4fa83952-03c6-4868-b9dd-1247ac8ae6b4\",\n      \"schemaKey\": \"Activity\",\n      \"name\": \"Metadata generation\",\n      \"description\": \"Metadata generated by DANDI cli\",\n      \"wasAssociatedWith\": [\n        {\n          \"schemaKey\": \"Software\",\n          \"identifier\": \"RRID:SCR_019009\",\n          \"name\": \"DANDI Command Line Interface\",\n          \"version\": \"0.22.0\",\n          \"url\": \"https://github.com/dandi/dandi-cli\"\n        }\n      ]\n    }\n  ],\n  \"contentSize\": 73156888,\n  \"encodingFormat\": \"application/x-nwb\",\n  \"digest\": {\n    \"dandi:sha2-256\": \"c4994d36fe0c7f0c19917b452c9355567ade7f449f17156dffea5cd5e53e519f\",\n    \"dandi:dandi-etag\": \"72aede0fb38eef9a1e94350c6fe7382b-2\"\n  },\n  \"path\": \"sub-P10HMH/sub-P10HMH_ses-20060901_ecephys+image.nwb\",\n  \"dateModified\": \"2021-07-01T16:30:11.012406-04:00\",\n  \"blobDateModified\": \"2020-10-20T23:40:40.971199-04:00\",\n  \"approach\": [\n    {\n      \"schemaKey\": \"ApproachType\",\n      \"name\": \"electrophysiological approach\"\n    }\n  ],\n  \"measurementTechnique\": [\n    {\n      \"schemaKey\": \"MeasurementTechniqueType\",\n      \"name\": \"spike sorting technique\"\n    }\n  ],\n  \"variableMeasured\": [\n    {\n      \"schemaKey\": \"PropertyValue\",\n      \"value\": \"Units\"\n    }\n  ],\n  \"wasAttributedTo\": [\n    {\n      \"schemaKey\": \"Participant\",\n      \"identifier\": \"P10HMH\",\n      \"sex\": {\n        \"schemaKey\": \"SexType\",\n        \"identifier\": \"http://purl.obolibrary.org/obo/PATO_0000384\",\n        \"name\": \"Male\"\n      },\n      \"species\": {\n        \"schemaKey\": \"SpeciesType\",\n        \"identifier\": \"http://purl.obolibrary.org/obo/NCBITaxon_9606\",\n        \"name\": \"Human\"\n      }\n    }\n  ],\n  \"identifier\": \"38304fe9-5f37-4c0d-a741-9cf2bafab9ff\",\n  \"contentUrl\": [\n    \"https://api.dandiarchive.org/api/assets/38304fe9-5f37-4c0d-a741-9cf2bafab9ff/download/\",\n    \"https://dandiarchive.s3.amazonaws.com/blobs/284/eb3/284eb346-0bc5-42a6-9b33-268e6b0b0bde\"\n  ]\n\n```\n\u003c/details\u003e","files":null}]}