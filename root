{"version":2,"ops":[{"type":1,"author":{"id":"0ab0e40999605aa8d5ec6be68372511fdc4a2fdf"},"timestamp":1685439654,"metadata":{"github-id":"I_kwDODBZtRc5nOqn6","github-url":"https://github.com/dandi/dandi-cli/issues/1302","origin":"github"},"title":"Issues with `dandi organize`","message":"I'm trying to follow [this guide]() to upload some BIDS-NWB data to DANDI.\nThe NWB validation seems to find no critical errors:\n\nIt seems `dandi organize` edits the source dataset:\n* removing the session intermediary directory (I guess this *could* make sense) but it seems a bit weird for DANDI to make decisions about the data hierarchy on its own\n* removing the `dataset_description.json`\n\nDemo:\n\n```console\n[deco]~/.local/share/dandi/000546 ❱ dandi organize ~/.local/share/datalad/vStr_phase_stim/bids/\n2023-05-30 03:08:31,168 [    INFO] Note: NumExpr detected 12 cores but \"NUMEXPR_MAX_THREADS\" not set, so enforcing safe limit of 8.\n2023-05-30 03:08:31,168 [    INFO] NumExpr defaulting to 8 threads.\n2023-05-30 03:08:32,560 [    INFO] Loading metadata from 1 files\n[Parallel(n_jobs=-1)]: Using backend LokyBackend with 12 concurrent workers.\n[Parallel(n_jobs=-1)]: Done   1 tasks      | elapsed:    1.9s\n[Parallel(n_jobs=-1)]: Done   1 out of   1 | elapsed:    1.9s finished\n2023-05-30 03:08:34,460 [    INFO] Symlink support autodetected; setting files_mode='symlink'\n2023-05-30 03:08:34,467 [    INFO] Organized 1 paths. Visit /run/media/chymera/data2/dandi/000546/\n2023-05-30 03:08:34,467 [    INFO] Logs saved in /home/chymera/.cache/dandi-cli/log/20230530070830Z-28068.log\n[deco]~/.local/share/dandi/000546 ❱ tree\n.\n├── dandiset.yaml\n└── sub-M322\n    └── sub-M322_ecephys.nwb -\u003e /home/chymera/.local/share/datalad/vStr_phase_stim/bids/sub-M322/ses-20220722/ieeg/sub-M322_ses-20220722_task-rest_run-01_ieeg.nwb\n\n2 directories, 2 files\n[deco]~/.local/share/dandi/000546 ❱ tree ~/.local/share/datalad/vStr_phase_stim/bids/\n/home/chymera/.local/share/datalad/vStr_phase_stim/bids/\n├── dataset_description.json\n├── README.md\n└── sub-M322\n    └── ses-20220722\n        └── ieeg\n            └── sub-M322_ses-20220722_task-rest_run-01_ieeg.nwb -\u003e ../../../../.git/annex/objects/KK/4V/MD5E-s7785862944--2851c1c5f6458d2d8431fa8a3eec6116.nwb/MD5E-s7785862944--2851c1c5f6458d2d8431fa8a3eec6116.nwb\n\n4 directories, 3 files\n```\n\nIs this something we *want* to do? If so, why, if not, how can I prevent this from happening?","files":null}]}