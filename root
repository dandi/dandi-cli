{"version":2,"ops":[{"type":1,"author":{"id":"12cb25e6e3f19b53447b05d00d7d4d53c925c908"},"timestamp":1625597379,"metadata":{"github-id":"MDU6SXNzdWU5MzgxNjg1MzU=","github-url":"https://github.com/dandi/dandi-cli/issues/699","origin":"github"},"title":"add validation related api","message":"something like below could be added to the cli api to find bad assets. \n\nfor example the code below returns that assets are failing because they are missing a sha256.  (https://github.com/dandi/dandi-api/issues/254)\n\n```python\ndef get_assets(dandiset, baseurl=\"api\"):\n    url = f\"https://{baseurl}.dandiarchive.org/api/dandisets/{dandiset}/versions/draft/assets/\"\n    querystring = {\"page_size\":\"100\"}\n    headers = {\"Accept\": \"application/json\"}\n    resp = requests.request(\"GET\", url, headers=headers, params=querystring).json()\n    results = resp[\"results\"]\n    while resp[\"next\"]:\n        resp = requests.request(\"GET\", resp[\"next\"], headers=headers).json()\n        results.extend(resp[\"results\"])\n    assert len(results) == resp[\"count\"]\n    url = f\"https://{baseurl}.dandiarchive.org/api/dandisets/{dandiset}/versions/draft/assets/\"\n    assetmeta = []\n    for val in results:\n        resp = requests.request(\"GET\", url + val[\"asset_id\"] + \"/validation\", headers=headers).json()\n        resp.update(**{\"identifier\": val[\"asset_id\"]})\n        assetmeta.append(resp)\n    return results, assetmeta\nres, vs = get_assets(\"000003\")\nvs\n[val for val in vs if val[\"validation_error\"]]\n```","files":null}]}