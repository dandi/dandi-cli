{"version":2,"ops":[{"type":1,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1657131540,"metadata":{"github-id":"I_kwDODBZtRc5NQoiU","github-url":"https://github.com/dandi/dandi-cli/issues/1046","origin":"github"},"title":"Do not /ingest zarr if we did not upload anything?","message":"While looking at log shared in https://github.com/dandi/dandi-cli/issues/1033 I saw \n\n```shell\n$\u003e grep 'ERROR.*Error 4.*already ingested' 20220706155505Z-3722021.log | grep -v pyout\n2022-07-06T12:12:27-0400 [ERROR   ] dandi 3722021:140235324802816 Error 400 while sending POST request to https://api.dandiarchive.org/api/zarr/f4e9e518-7dbf-40aa-b162-d1bd3fbdbf5a/ingest/: \"Zarr archive already ingested\"\n```\n\nbut interestingly that zarr seems to get no updates:\n\n```\n$\u003e grep f4e9e518-7dbf-40aa-b162-d1bd3fbdbf5a 20220706155505Z-3722021.log | grep -v pyout | grep -v GET \n2022-07-06T12:12:27-0400 [DEBUG   ] dandi 3722021:140235324802816 POST https://api.dandiarchive.org/api/zarr/f4e9e518-7dbf-40aa-b162-d1bd3fbdbf5a/ingest/\n2022-07-06T12:12:27-0400 [DEBUG   ] urllib3.connectionpool 3722021:140235324802816 https://api.dandiarchive.org:443 \"POST /api/zarr/f4e9e518-7dbf-40aa-b162-d1bd3fbdbf5a/ingest/ HTTP/1.1\" 400 31\n2022-07-06T12:12:27-0400 [ERROR   ] dandi 3722021:140235324802816 Error 400 while sending POST request to https://api.dandiarchive.org/api/zarr/f4e9e518-7dbf-40aa-b162-d1bd3fbdbf5a/ingest/: \"Zarr archive already ingested\"\nrequests.exceptions.HTTPError: Error 400 while sending POST request to https://api.dandiarchive.org/api/zarr/f4e9e518-7dbf-40aa-b162-d1bd3fbdbf5a/ingest/: \"Zarr archive already ingested\"\n```\n\nso why are we sending `/ingest` request if we did not update it?","files":null}]}