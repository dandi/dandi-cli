{"version":2,"ops":[{"type":1,"author":{"id":"0e75956bc1f9bf7e3cd1dc71486886c85ad6bfb7"},"timestamp":1637109107,"metadata":{"github-id":"I_kwDODBZtRc4-6s_m","github-url":"https://github.com/dandi/dandi-cli/issues/837","origin":"github"},"title":"`dandi upload` fails on random subset of files","message":"In attempting to upload files, a seemingly random subset (76 files of 510) are failing to upload. The files are not open in any other software nor are they empty. They all have this error message in the log file on upload:\n\n```\n2021-11-16T08:06:58-0800 [ERROR   ] dandi 60872:59432 Error uploading sub-Adobo/sub-Adobo_ses-Adobo02-LinearTrack_behavior+ecephys.nwb:\nTraceback (most recent call last):\n  File \"C:\\Users\\emily.jones\\Anaconda3\\envs\\nwb\\lib\\site-packages\\dandi\\upload.py\", line 262, in process_path\n    for r in remote_dandiset.iter_upload_raw_asset(\n  File \"C:\\Users\\emily.jones\\Anaconda3\\envs\\nwb\\lib\\site-packages\\dandi\\dandiapi.py\", line 1120, in iter_upload_raw_asset\n    out_part = fut.result()\n  File \"C:\\Users\\emily.jones\\Anaconda3\\envs\\nwb\\lib\\concurrent\\futures\\_base.py\", line 438, in result\n    return self.__get_result()\n  File \"C:\\Users\\emily.jones\\Anaconda3\\envs\\nwb\\lib\\concurrent\\futures\\_base.py\", line 390, in __get_result\n    raise self._exception\n  File \"C:\\Users\\emily.jones\\Anaconda3\\envs\\nwb\\lib\\concurrent\\futures\\thread.py\", line 52, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"C:\\Users\\emily.jones\\Anaconda3\\envs\\nwb\\lib\\site-packages\\dandi\\dandiapi.py\", line 1484, in _upload_part\n    chunk = fp.read(part[\"size\"])\nOSError: [Errno 22] Invalid argument\n```\n\nRe-running the upload lead to successfully uploading 11 of the 76 failed files, despite nothing changing between the two upload attempts. If it were simply a network connection error, I would expect more than ~14% of the failed files to upload successfully on the second attempt.","files":null}]}