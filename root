{"version":2,"ops":[{"type":1,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1630426834,"metadata":{"github-id":"MDU6SXNzdWU5ODQwNDgxMDc=","github-url":"https://github.com/dandi/dandi-cli/issues/761","origin":"github"},"title":"retry redirect on 502, 503, 504","message":"```\n2021-08-31T15:15:42.2110260Z _________________ test_download_000027_resume[draft-\u003clambda\u003e0] _________________\n2021-08-31T15:15:42.2111008Z dandi/tests/test_download.py:108: in test_download_000027_resume\n2021-08-31T15:15:42.2111761Z     download(url, tmp_path, get_metadata=False)\n2021-08-31T15:15:42.2112393Z dandi/download.py:59: in download\n2021-08-31T15:15:42.2112961Z     parsed_url = parse_dandi_url(urls[0])\n2021-08-31T15:15:42.2113569Z dandi/dandiarchive.py:421: in parse\n2021-08-31T15:15:42.2114186Z     new_url = cls.follow_redirect(url)\n2021-08-31T15:15:42.2114830Z dandi/dandiarchive.py:538: in follow_redirect\n2021-08-31T15:15:42.2115616Z     f\"Response for getting {url} to redirect returned {r.status_code}.\"\n2021-08-31T15:15:42.2117463Z E   dandi.exceptions.FailedToConnectError: Response for getting https://dandiarchive.org/dandiset/000027/draft to redirect returned 504. Please verify that it is a URL related to dandiarchive and supported by dandi client\n```\nfrom tests runs of https://github.com/dandi/dandi-cli/pull/760#pullrequestreview-742868211 . Let's add those other error codes into the list (has 404 only ATM) and extend retrying to e.g. 5 trials.","files":null}]}