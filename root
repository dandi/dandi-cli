{"version":2,"ops":[{"type":1,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1612907935,"metadata":{"github-id":"MDU6SXNzdWU4MDQ5NjI2Nzc=","github-url":"https://github.com/dandi/dandi-cli/issues/376","origin":"github"},"title":"DandiAPIClient.get_dandiset_*assets: add option include_metadata=False","message":"Primary use case is `dandi ls` to quickly display assets with their metadata, and be able to align what we display for local assets and remote assets.  Later it would be of use for `dandi diff` (https://github.com/dandi/dandi-cli/issues/72)\n\nSo, the idea is that if it is set to True, assets in the returned list would have `metadata` field with their metadata.  Two possible strategies (choice is yours) to have it implemented\n\n- do it on the server side (https://github.com/dandi/dandi-api/issues/100) and just pass that option to the endpoint call.  But according to @dchiquito that might require django trickery to switch serializers depending on the parameter, so might apparently be \"a more involved solution\" than it seems to blissfully django-ignorant me.\n- do it on `dandi-cli` side:  iterate through assets and query their metadata via `dandisets_versions_assets_read` endpoint (I guess could be done via asyncio/threading/whatnot to get some speedup).  We will be able to RF it away later whenever implemented on the server side\n\nIn either case, a unittest should ensure that we are getting metadata whenever we request it.","files":null}]}