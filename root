{"version":2,"ops":[{"type":1,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1615570170,"metadata":{"github-id":"MDU6SXNzdWU4MzAzMTc1NjE=","github-url":"https://github.com/dandi/dandi-cli/issues/469","origin":"github"},"title":"meta: provide \"provenance\" for the produced json schema","message":"We should accompany converted schema in e.g. https://github.com/dandi/schema/tree/master/releases/1.0.0-rc1 with provenance information on the schema itself.  ATM it is just present in the bot's commit messages in that repo, e.g. \"DANDI Bot Publish model schemata as of dandi-cli 0.10.0-275-gcbdd48f\". So I think we need to make a pydantic model `SchemaMeta` which would be something like\n\n```python\nclass SchemaMeta(DandiBaseModel):\n   wasDerivedFrom: Optional[List[Software]] = Field(None, nskey=\"prov\")\n   wasGeneratedBy: Optional[List[Activity]] = Field(None, nskey=\"prov\")\n   hasMember: Optional[List[???to point to produced dandiset.json and asset.json]] = Field(None, nskey=\"prov\")\n```\nwhere `Software` above is to be the `dandi-cli` or may be we could point more specifically to `models.py`?  and then it would be used to produce `schema.json` and also the actual populated record e.g. in `_schema.yaml` (not the schema, but actual populated record; better location?) in the corresponding release folder.\n\nSo this would contain information about what version of dandi-cli contains that models.py . For more \"pragmatic\" usage of that information (e.g. for dandi-cli or dandi-api) to be able to let user know which version of dandi-cli is needed for some (newer) version of schema, we should produce some top level file (e.g. `metadata.json`) which would contain more readily \"readable\" extract across all versions, e.g.\n```json\n{\n   \"releases\": {\n      \"1.0.0-rc1\": {\n         \"dandi-cli\": {\n           \"first\": \"0.9.0+1.g?????\",\n           \"release\": \"0.9.2\",\n           \"last\": \"0.11.0+8.g5330508\"\n      }\n   }\n}\n```\nwhich would get updated upon every regeneration.  This would make it clear in which version(s) of dandi-cli any given schema version was \"active\".  May be such information actually could/should be present/updated in the aforementioned SchemaMeta itself ?\n\nWDYT @satra @jwodder ?","files":null}]}