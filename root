{"version":2,"ops":[{"type":1,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1724681351,"metadata":{"github-id":"I_kwDODBZtRc6UPDWY","github-url":"https://github.com/dandi/dandi-cli/issues/1493","origin":"github"},"title":"upload: if any file/path is skipped due to not part of DANDI layout -- log WARNING upon completion or ask","message":"Might need to be implemented along with\n\n- https://github.com/dandi/dandi-cli/issues/119\n\nand overall provide partial (UX) resolution to e.g.\n\n- https://github.com/dandi/dandi-cli/issues/1464\n\nwhere \"non-DANDI layout\" file is found to be not uploaded.\n\nI think overall implementation, upon processing command upload for a specific (sub)`path (could be top of dandiset), and having obtained list of paths which were uploaded, should then call `find_unused_paths(path, used_paths)`, which would `os.walk` that `path`, and if encountering folder, check if any path among `user_paths` is under that folder path, if not -- add entire folder path into result, if some is, descend into that folder (recurse); if encountering a non-folder, see if was among `used_paths` and if not -- add to result.\n\nCommon known to be ignored paths (like vcs folders and some OSX trash folders) should be ignored altogether.\n\nThen WARNING could report total number of skipped entities (folders of files) with some (up to 10?), and log the rest  at DEBUG level (into log file).","files":null}]}