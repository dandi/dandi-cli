{"version":2,"ops":[{"type":1,"author":{"id":"d8203afd43c9e0a9d07c45dd62b58a81d53a2ebe"},"timestamp":1758223015,"metadata":{"github-id":"I_kwDODBZtRc7Mit5F","github-url":"https://github.com/dandi/dandi-cli/issues/1709","origin":"github"},"title":"403 error when uploading an embargoed Zarr asset","message":"I am uploading Zarr assets to an embargoed Dandiset and am receiving 403 errors just for the Zarr assets.  I have tried this a few times but no luck. I have correctly entered my API key and am an owner of the Dandiset.\n\n@yarikoptic @CodyCBakerPhD Any ideas? Thanks.\n\ncc @satra \n\nTerminal output:\n\n```bash\n19:09 $ DANDI_DEVEL=1 dandi upload --allow-any-path --validation ignore .\n2025-09-18 19:09:30,762 [    INFO] Found 26 files to consider\nPATH                                  SIZE     ERRORS PROGRESS STATUS              MESSAGE            \ndandiset.yaml                         1.1 kB                   skipped             should be edited...\n...ld_1-epoch=82-val_loss=0.5101.ckpt 710.3 MB   0             skipped             file exists        \n...ld_2-epoch=85-val_loss=0.4167.ckpt 710.3 MB   0             skipped             file exists        \n...d_3-epoch=166-val_loss=0.4527.ckpt 710.3 MB   0             skipped             file exists        \n...d_4-epoch=100-val_loss=0.3755.ckpt 710.3 MB   0             skipped             file exists        \n...ld_5-epoch=93-val_loss=0.3843.ckpt 710.3 MB   0             skipped             file exists        \n...inetuning_checkpoints/last-v1.ckpt 710.3 MB   0             skipped             file exists        \n...inetuning_checkpoints/last-v2.ckpt 710.3 MB   0             skipped             file exists        \n...inetuning_checkpoints/last-v3.ckpt 710.3 MB   0             skipped             file exists        \n...inetuning_checkpoints/last-v4.ckpt 710.3 MB   0             skipped             file exists        \n...n/finetuning_checkpoints/last.ckpt 710.3 MB   0             skipped             file exists        \n...on/unet_pretrained_checkpoint.ckpt 710.3 MB   0             skipped             file exists        \n...4_sample-IC_acq-overview_XPCT.json 77 Bytes   0             done                                   \n...mple-IC_acq-overview_XPCT.ome.zarr 89.9 GB    0             ERROR               Error 403 while ...\n...ple-IC_acq-zoom_chunk-01_XPCT.json 74 Bytes   0             done                                   \n...IC_acq-zoom_chunk-01_XPCT.ome.zarr                          pre-validating                         \n...ple-IC_acq-zoom_chunk-02_XPCT.json 74 Bytes   0             done                                   \n...IC_acq-zoom_chunk-02_XPCT.ome.zarr                          pre-validating                         \n...ple-IC_acq-zoom_chunk-03_XPCT.json 74 Bytes   0             done                                   \n...IC_acq-zoom_chunk-03_XPCT.ome.zarr            0             traversing local...                    \n...sample-hemi_acq-overview_XPCT.json 77 Bytes   0             done                                   \n...le-hemi_acq-overview_XPCT.ome.zarr                          pre-validating                         \n...e-hemi_acq-zoom_chunk-01_XPCT.json 74 Bytes   0             done                                   \n...mi_acq-zoom_chunk-01_XPCT.ome.zarr                          pre-validating                         \n...e-hemi_acq-zoom_chunk-02_XPCT.json                                                                 \n...mi_acq-zoom_chunk-02_XPCT.ome.zarr                                                                 \nSummary:                              97.7 GB                  12 skipped          1 should be edit...\n                                                               6 done              11 file exists     \n                                                               1 ERROR             1 Error some whi...\n                                                               4 pre-validating                       \n                                                               1 traversing loc...    \n```\n\nPortion of the log file:\n```\n2025-09-18T19:10:37+0000 [DEBUG   ] dandi.support.digests 1418:140350448117440 Estimating digests for /home/kabilar/20250915/001602/sourcedata/raw/sub-I74/micr/sub-I74_sample-IC_acq-overview_XPCT.ome.zarr/0/0/28/29\n2025-09-18T19:10:37+0000 [DEBUG   ] dandi.support.digests 1418:140350427137728 Estimating digests for /home/kabilar/20250915/001602/sourcedata/raw/sub-I74/micr/sub-I74_sample-IC_acq-overview_XPCT.ome.zarr/0/0/28/38\n2025-09-18T19:10:37+0000 [DEBUG   ] urllib3.connectionpool 1418:140349761640128 https://dandiarchive.s3.amazonaws.com:443 \"PUT /zarr/a620802e-e7f7-4003-bf3c-1f2f3d9239e1/4/.zarray?X-Amz-Algorithm=AWS4-HMAC-SHA256\u0026X-Amz-Credential=AKIAUBRWC5GAEKH3223E%2F20250918%2Fus-east-2%2Fs3%2Faws4_request\u0026X-Amz-Date=20250918T191037Z\u0026X-Amz-Expires=21600\u0026X-Amz-SignedHeaders=content-md5%3Bhost%3Bx-amz-tagging\u0026X-Amz-Signature=ffe7f6bb79dd0aed9c753072c1cc48789c1df133688ed1e00eaa16211bbeff65 HTTP/1.1\" 403 None\n2025-09-18T19:10:37+0000 [DEBUG   ] dandi.support.digests 1418:140350437627584 Estimating digests for /home/kabilar/20250915/001602/sourcedata/raw/sub-I74/micr/sub-I74_sample-IC_acq-overview_XPCT.ome.zarr/0/0/28/25\n2025-09-18T19:10:37+0000 [DEBUG   ] dandi 1418:140349761640128 Response: 403\n2025-09-18T19:10:37+0000 [DEBUG   ] urllib3.connectionpool 1418:140349599119040 https://dandiarchive.s3.amazonaws.com:443 \"PUT /zarr/a620802e-e7f7-4003-bf3c-1f2f3d9239e1/3/.zarray?X-Amz-Algorithm=AWS4-HMAC-SHA256\u0026X-Amz-Credential=AKIAUBRWC5GAEKH3223E%2F20250918%2Fus-east-2%2Fs3%2Faws4_request\u0026X-Amz-Date=20250918T191037Z\u0026X-Amz-Expires=21600\u0026X-Amz-SignedHeaders=content-md5%3Bhost%3Bx-amz-tagging\u0026X-Amz-Signature=10b8e02e62c18afca1aa08a720184564e526a385a4e1ca1e6935e094cfc007c0 HTTP/1.1\" 403 None\n2025-09-18T19:10:37+0000 [DEBUG   ] urllib3.connectionpool 1418:140349588629184 https://dandiarchive.s3.amazonaws.com:443 \"PUT /zarr/a620802e-e7f7-4003-bf3c-1f2f3d9239e1/.zattrs?X-Amz-Algorithm=AWS4-HMAC-SHA256\u0026X-Amz-Credential=AKIAUBRWC5GAEKH3223E%2F20250918%2Fus-east-2%2Fs3%2Faws4_request\u0026X-Amz-Date=20250918T191037Z\u0026X-Amz-Expires=21600\u0026X-Amz-SignedHeaders=content-md5%3Bhost%3Bx-amz-tagging\u0026X-Amz-Signature=f8d0a6031305c96fd01fce406c70d97f2a0df9b50a6da60c9d1a843e4e9e6f55 HTTP/1.1\" 403 None\n2025-09-18T19:10:37+0000 [DEBUG   ] charset_normalizer 1418:140349761640128 Encoding detection: utf_8 is most likely the one.\n2025-09-18T19:10:37+0000 [DEBUG   ] urllib3.connectionpool 1418:140349751150272 https://dandiarchive.s3.amazonaws.com:443 \"PUT /zarr/a620802e-e7f7-4003-bf3c-1f2f3d9239e1/1/.zarray?X-Amz-Algorithm=AWS4-HMAC-SHA256\u0026X-Amz-Credential=AKIAUBRWC5GAEKH3223E%2F20250918%2Fus-east-2%2Fs3%2Faws4_request\u0026X-Amz-Date=20250918T191037Z\u0026X-Amz-Expires=21600\u0026X-Amz-SignedHeaders=content-md5%3Bhost%3Bx-amz-tagging\u0026X-Amz-Signature=68ddb5a708d89f5456ff147e3d8c10d4dd27ec66613449b23633818c9103a961 HTTP/1.1\" 403 None\n2025-09-18T19:10:37+0000 [DEBUG   ] dandi 1418:140349599119040 Response: 403\n2025-09-18T19:10:37+0000 [DEBUG   ] urllib3.connectionpool 1418:140349578139328 https://dandiarchive.s3.amazonaws.com:443 \"PUT /zarr/a620802e-e7f7-4003-bf3c-1f2f3d9239e1/0/0/0/26?X-Amz-Algorithm=AWS4-HMAC-SHA256\u0026X-Amz-Credential=AKIAUBRWC5GAEKH3223E%2F20250918%2Fus-east-2%2Fs3%2Faws4_request\u0026X-Amz-Date=20250918T191037Z\u0026X-Amz-Expires=21600\u0026X-Amz-SignedHeaders=content-md5%3Bhost%3Bx-amz-tagging\u0026X-Amz-Signature=0f4a56a2922a1df2b9443c6eff9d8a8b11b61b472b8124e96972489727e09a77 HTTP/1.1\" 403 None\n2025-09-18T19:10:37+0000 [ERROR   ] dandi 1418:140349761640128 Error 403 while sending PUT request to https://dandiarchive.s3.amazonaws.com/zarr/a620802e-e7f7-4003-bf3c-1f2f3d9239e1/4/.zarray?X-Amz-Algorithm=AWS4-HMAC-SHA256\u0026X-Amz-Credential=AKIAUBRWC5GAEKH3223E%2F20250918%2Fus-east-2%2Fs3%2Faws4_request\u0026X-Amz-Date=20250918T191037Z\u0026X-Amz-Expires=21600\u0026X-Amz-SignedHeaders=content-md5%3Bhost%3Bx-amz-tagging\u0026X-Amz-Signature=ffe7f6bb79dd0aed9c753072c1cc48789c1df133688ed1e00eaa16211bbeff65: \u003c?xml version=\"1.0\" encoding=\"UTF-8\"?\u003e\n\u003cError\u003e\u003cCode\u003eAccessDenied\u003c/Code\u003e\u003cMessage\u003eThere were headers present in the request which were not signed\u003c/Message\u003e\u003cHeadersNotSigned\u003ex-amz-acl\u003c/HeadersNotSigned\u003e\u003cRequestId\u003eVABC9NQC5C262PN4\u003c/RequestId\u003e\u003cHostId\u003e7lc7Ut/sDgaxSVviq6ThHse7nB2wLtwHdcqjFkufL7D6uzxvhDxVgbH1ojfLkdgsb6BT/Zb/ZSWsdb+rRI87GYGs5mOhggDE59nLE0Rxp8k=\u003c/HostId\u003e\u003c/Error\u003e\n2025-09-18T19:10:37+0000 [DEBUG   ] dandi.support.digests 1418:140350458607296 Estimating digests for /home/kabilar/20250915/001602/sourcedata/raw/sub-I74/micr/sub-I74_sample-IC_acq-overview_XPCT.ome.zarr/0/0/28/34\n2025-09-18T19:10:37+0000 [DEBUG   ] dandi 1418:140349751150272 Response: 403\n2025-09-18T19:10:37+0000 [DEBUG   ] charset_normalizer 1418:140349599119040 Encoding detection: utf_8 is most likely the one.\n2025-09-18T19:10:37+0000 [DEBUG   ] dandi 1418:140349588629184 Response: 403\n2025-09-18T19:10:37+0000 [DEBUG   ] dandi.support.digests 1418:140350427137728 Estimating digests for /home/kabilar/20250915/001602/sourcedata/raw/sub-I74/micr/sub-I74_sample-IC_acq-overview_XPCT.ome.zarr/0/0/28/7\n2025-09-18T19:10:37+0000 [DEBUG   ] dandi.support.digests 1418:140350437627584 Estimating digests for /home/kabilar/20250915/001602/sourcedata/raw/sub-I74/micr/sub-I74_sample-IC_acq-overview_XPCT.ome.zarr/0/0/28/16\n2025-09-18T19:10:37+0000 [DEBUG   ] dandi.support.digests 1418:140350513718976 Estimating digests for /home/kabilar/20250915/001602/sourcedata/raw/sub-I74/micr/sub-I74_sample-IC_acq-overview_XPCT.ome.zarr/0/0/19/0\n2025-09-18T19:10:37+0000 [DEBUG   ] charset_normalizer 1418:140349761640128 Encoding detection: utf_8 is most likely the one.\n2025-09-18T19:10:37+0000 [DEBUG   ] dandi.support.digests 1418:140350448117440 Estimating digests for /home/kabilar/20250915/001602/sourcedata/raw/sub-I74/micr/sub-I74_sample-IC_acq-overview_XPCT.ome.zarr/0/0/19/26\n2025-09-18T19:10:37+0000 [DEBUG   ] dandi 1418:140349578139328 Response: 403\n2025-09-18T19:10:37+0000 [DEBUG   ] charset_normalizer 1418:140349751150272 Encoding detection: utf_8 is most likely the one.\n2025-09-18T19:10:37+0000 [ERROR   ] dandi 1418:140349599119040 Error 403 while sending PUT request to https://dandiarchive.s3.amazonaws.com/zarr/a620802e-e7f7-4003-bf3c-1f2f3d9239e1/3/.zarray?X-Amz-Algorithm=AWS4-HMAC-SHA256\u0026X-Amz-Credential=AKIAUBRWC5GAEKH3223E%2F20250918%2Fus-east-2%2Fs3%2Faws4_request\u0026X-Amz-Date=20250918T191037Z\u0026X-Amz-Expires=21600\u0026X-Amz-SignedHeaders=content-md5%3Bhost%3Bx-amz-tagging\u0026X-Amz-Signature=10b8e02e62c18afca1aa08a720184564e526a385a4e1ca1e6935e094cfc007c0: \u003c?xml version=\"1.0\" encoding=\"UTF-8\"?\u003e\n\u003cError\u003e\u003cCode\u003eAccessDenied\u003c/Code\u003e\u003cMessage\u003eThere were headers present in the request which were not signed\u003c/Message\u003e\u003cHeadersNotSigned\u003ex-amz-acl\u003c/HeadersNotSigned\u003e\u003cRequestId\u003eVABFQAGWYXJZA5H6\u003c/RequestId\u003e\u003cHostId\u003e4m/zUGUFP7dqEFTtT0a/e6wNC2mDpZrL8u5RouG9LCFtiyowFM9q+Or6VUFyist1fjy2Egca+mztnl+F8qkiUI83RWc7XYOWZkUiX5CKGmk=\u003c/HostId\u003e\u003c/Error\u003e\n2025-09-18T19:10:37+0000 [DEBUG   ] charset_normalizer 1418:140349588629184 Encoding detection: utf_8 is most likely the one.\n2025-09-18T19:10:37+0000 [DEBUG   ] charset_normalizer 1418:140349761640128 Encoding detection: utf_8 is most likely the one.\n2025-09-18T19:10:37+0000 [DEBUG   ] charset_normalizer 1418:140349578139328 Encoding detection: utf_8 is most likely the one.\n2025-09-18T19:10:37+0000 [ERROR   ] dandi 1418:140349751150272 Error 403 while sending PUT request to https://dandiarchive.s3.amazonaws.com/zarr/a620802e-e7f7-4003-bf3c-1f2f3d9239e1/1/.zarray?X-Amz-Algorithm=AWS4-HMAC-SHA256\u0026X-Amz-Credential=AKIAUBRWC5GAEKH3223E%2F20250918%2Fus-east-2%2Fs3%2Faws4_request\u0026X-Amz-Date=20250918T191037Z\u0026X-Amz-Expires=21600\u0026X-Amz-SignedHeaders=content-md5%3Bhost%3Bx-amz-tagging\u0026X-Amz-Signature=68ddb5a708d89f5456ff147e3d8c10d4dd27ec66613449b23633818c9103a961: \u003c?xml version=\"1.0\" encoding=\"UTF-8\"?\u003e\n\u003cError\u003e\u003cCode\u003eAccessDenied\u003c/Code\u003e\u003cMessage\u003eThere were headers present in the request which were not signed\u003c/Message\u003e\u003cHeadersNotSigned\u003ex-amz-acl\u003c/HeadersNotSigned\u003e\u003cRequestId\u003eVABE48QJNMTY8GVN\u003c/RequestId\u003e\u003cHostId\u003eJzDiuGfQQMkaQ1QfhXHjnin3Kir192u97i744T28sPK9h/UyvVhKroN4fB8Zr9Hx9OFZOGjHrQlfaY9taYlE1uaeUGa+BnsZmrmbiYIZxvs=\u003c/HostId\u003e\u003c/Error\u003e\n2025-09-18T19:10:37+0000 [DEBUG   ] dandi.support.digests 1418:140350458607296 Estimating digests for /home/kabilar/20250915/001602/sourcedata/raw/sub-I74/micr/sub-I74_sample-IC_acq-overview_XPCT.ome.zarr/0/0/19/35\n2025-09-18T19:10:37+0000 [DEBUG   ] charset_normalizer 1418:140349599119040 Encoding detection: utf_8 is most likely the one.\n2025-09-18T19:10:37+0000 [ERROR   ] dandi 1418:140349588629184 Error 403 while sending PUT request to https://dandiarchive.s3.amazonaws.com/zarr/a620802e-e7f7-4003-bf3c-1f2f3d9239e1/.zattrs?X-Amz-Algorithm=AWS4-HMAC-SHA256\u0026X-Amz-Credential=AKIAUBRWC5GAEKH3223E%2F20250918%2Fus-east-2%2Fs3%2Faws4_request\u0026X-Amz-Date=20250918T191037Z\u0026X-Amz-Expires=21600\u0026X-Amz-SignedHeaders=content-md5%3Bhost%3Bx-amz-tagging\u0026X-Amz-Signature=f8d0a6031305c96fd01fce406c70d97f2a0df9b50a6da60c9d1a843e4e9e6f55: \u003c?xml version=\"1.0\" encoding=\"UTF-8\"?\u003e\n\u003cError\u003e\u003cCode\u003eAccessDenied\u003c/Code\u003e\u003cMessage\u003eThere were headers present in the request which were not signed\u003c/Message\u003e\u003cHeadersNotSigned\u003ex-amz-acl\u003c/HeadersNotSigned\u003e\u003cRequestId\u003eVABFFS283083XBKE\u003c/RequestId\u003e\u003cHostId\u003eStqlLepVy0HV0dzuh8mRqpaC5bDuny5D8RsGGC5t8AR7Zk8w11/gHlVFYWzFoeVHoz0M3hSu3tZiRgQKGvHqE4NWAr+BHmvwHdHZsgGdelg=\u003c/HostId\u003e\u003c/Error\u003e\n2025-09-18T19:10:37+0000 [ERROR   ] dandi 1418:140349578139328 Error 403 while sending PUT request to https://dandiarchive.s3.amazonaws.com/zarr/a620802e-e7f7-4003-bf3c-1f2f3d9239e1/0/0/0/26?X-Amz-Algorithm=AWS4-HMAC-SHA256\u0026X-Amz-Credential=AKIAUBRWC5GAEKH3223E%2F20250918%2Fus-east-2%2Fs3%2Faws4_request\u0026X-Amz-Date=20250918T191037Z\u0026X-Amz-Expires=21600\u0026X-Amz-SignedHeaders=content-md5%3Bhost%3Bx-amz-tagging\u0026X-Amz-Signature=0f4a56a2922a1df2b9443c6eff9d8a8b11b61b472b8124e96972489727e09a77: \u003c?xml version=\"1.0\" encoding=\"UTF-8\"?\u003e\n\u003cError\u003e\u003cCode\u003eAccessDenied\u003c/Code\u003e\u003cMessage\u003eThere were headers present in the request which were not signed\u003c/Message\u003e\u003cHeadersNotSigned\u003ex-amz-acl\u003c/HeadersNotSigned\u003e\u003cRequestId\u003eVABF8S9HSN4ZBDY1\u003c/RequestId\u003e\u003cHostId\u003eZ5CCeEVXSPPvaUtKfdSm+MR9CrFkvzpynMhAgNKOqsVlsgr/8B6JB/Ys6YPFLxHxg3epoWTX+r4vD7H0t+mcigTdXuQ54NUcEPIwYeojQKc=\u003c/HostId\u003e\u003c/Error\u003e\n2025-09-18T19:10:37+0000 [DEBUG   ] charset_normalizer 1418:140349751150272 Encoding detection: utf_8 is most likely the one.\n2025-09-18T19:10:37+0000 [DEBUG   ] dandi.support.digests 1418:140350437627584 Estimating digests for /home/kabilar/20250915/001602/sourcedata/raw/sub-I74/micr/sub-I74_sample-IC_acq-overview_XPCT.ome.zarr/0/0/19/8\n2025-09-18T19:10:37+0000 [DEBUG   ] charset_normalizer 1418:140349599119040 Encoding detection: utf_8 is most likely the one.\n2025-09-18T19:10:37+0000 [DEBUG   ] dandi.support.digests 1418:140350427137728 Estimating digests for /home/kabilar/20250915/001602/sourcedata/raw/sub-I74/micr/sub-I74_sample-IC_acq-overview_XPCT.ome.zarr/0/0/19/17\n2025-09-18T19:10:37+0000 [DEBUG   ] charset_normalizer 1418:140349588629184 Encoding detection: utf_8 is most likely the one.\n2025-09-18T19:10:37+0000 [DEBUG   ] dandi 1418:140350477768384 Error uploading zarr: HTTPError: Error 403 while sending PUT request to https://dandiarchive.s3.amazonaws.com/zarr/a620802e-e7f7-4003-bf3c-1f2f3d9239e1/4/.zarray?X-Amz-Algorithm=AWS4-HMAC-SHA256\u0026X-Amz-Credential=AKIAUBRWC5GAEKH3223E%2F20250918%2Fus-east-2%2Fs3%2Faws4_request\u0026X-Amz-Date=20250918T191037Z\u0026X-Amz-Expires=21600\u0026X-Amz-SignedHeaders=content-md5%3Bhost%3Bx-amz-tagging\u0026X-Amz-Signature=ffe7f6bb79dd0aed9c753072c1cc48789c1df133688ed1e00eaa16211bbeff65: \u003c?xml version=\"1.0\" encoding=\"UTF-8\"?\u003e\n\u003cError\u003e\u003cCode\u003eAccessDenied\u003c/Code\u003e\u003cMessage\u003eThere were headers present in the request which were not signed\u003c/Message\u003e\u003cHeadersNotSigned\u003ex-amz-acl\u003c/HeadersNotSigned\u003e\u003cRequestId\u003eVABC9NQC5C262PN4\u003c/RequestId\u003e\u003cHostId\u003e7lc7Ut/sDgaxSVviq6ThHse7nB2wLtwHdcqjFkufL7D6uzxvhDxVgbH1ojfLkdgsb6BT/Zb/ZSWsdb+rRI87GYGs5mOhggDE59nLE0Rxp8k=\u003c/HostId\u003e\u003c/Error\u003e\n2025-09-18T19:10:37+0000 [DEBUG   ] charset_normalizer 1418:140349578139328 Encoding detection: utf_8 is most likely the one.\n2025-09-18T19:10:37+0000 [DEBUG   ] charset_normalizer 1418:140349751150272 Encoding detection: utf_8 is most likely the one.\n2025-09-18T19:10:37+0000 [DEBUG   ] dandi 1418:140349761640128 PUT https://dandiarchive.s3.amazonaws.com/zarr/a620802e-e7f7-4003-bf3c-1f2f3d9239e1/0/0/0/8?X-Amz-Algorithm=AWS4-HMAC-SHA256\u0026X-Amz-Credential=AKIAUBRWC5GAEKH3223E%2F20250918%2Fus-east-2%2Fs3%2Faws4_request\u0026X-Amz-Date=20250918T191037Z\u0026X-Amz-Expires=21600\u0026X-Amz-SignedHeaders=content-md5%3Bhost%3Bx-amz-tagging\u0026X-Amz-Signature=2aa20299a9003bb671f778c6e604e88dc660fa28354f4dd313e234f68e165957\n2025-09-18T19:10:37+0000 [DEBUG   ] charset_normalizer 1418:140349588629184 Encoding detection: utf_8 is most likely the one.\n2025-09-18T19:10:37+0000 [DEBUG   ] dandi 1418:140350477768384 Cancelling upload\n2025-09-18T19:10:37+0000 [DEBUG   ] charset_normalizer 1418:140349578139328 Encoding detection: utf_8 is most likely the one.\n2025-09-18T19:10:37+0000 [DEBUG   ] urllib3.connectionpool 1418:140349761640128 Resetting dropped connection: dandiarchive.s3.amazonaws.com\n2025-09-18T19:10:37+0000 [DEBUG   ] dandi 1418:140349599119040 PUT https://dandiarchive.s3.amazonaws.com/zarr/a620802e-e7f7-4003-bf3c-1f2f3d9239e1/0/.zarray?X-Amz-Algorithm=AWS4-HMAC-SHA256\u0026X-Amz-Credential=AKIAUBRWC5GAEKH3223E%2F20250918%2Fus-east-2%2Fs3%2Faws4_request\u0026X-Amz-Date=20250918T191037Z\u0026X-Amz-Expires=21600\u0026X-Amz-SignedHeaders=content-md5%3Bhost%3Bx-amz-tagging\u0026X-Amz-Signature=e571fa63134dcc73459ee8d9690b61da38476ca1d619fcc4f7e63d8a21c440c3\n2025-09-18T19:10:37+0000 [DEBUG   ] urllib3.connectionpool 1418:140349599119040 Resetting dropped connection: dandiarchive.s3.amazonaws.com\n2025-09-18T19:10:37+0000 [DEBUG   ] dandi.support.digests 1418:140350513718976 Estimating digests for /home/kabilar/20250915/001602/sourcedata/raw/sub-I74/micr/sub-I74_sample-IC_acq-overview_XPCT.ome.zarr/0/0/19/22\n2025-09-18T19:10:37+0000 [DEBUG   ] dandi.support.digests 1418:140350448117440 Estimating digests for /home/kabilar/20250915/001602/sourcedata/raw/sub-I74/micr/sub-I74_sample-IC_acq-overview_XPCT.ome.zarr/0/0/19/31\n2025-09-18T19:10:37+0000 [DEBUG   ] dandi.support.digests 1418:140350458607296 Estimating digests for /home/kabilar/20250915/001602/sourcedata/raw/sub-I74/micr/sub-I74_sample-IC_acq-overview_XPCT.ome.zarr/0/0/19/4\n2025-09-18T19:10:37+0000 [DEBUG   ] dandi.support.digests 1418:140350437627584 Estimating digests for /home/kabilar/20250915/001602/sourcedata/raw/sub-I74/micr/sub-I74_sample-IC_acq-overview_XPCT.ome.zarr/0/0/19/13\n2025-09-18T19:10:37+0000 [DEBUG   ] dandi.support.digests 1418:140350427137728 Estimating digests for /home/kabilar/20250915/001602/sourcedata/raw/sub-I74/micr/sub-I74_sample-IC_acq-overview_XPCT.ome.zarr/0/0/19/39\n2025-09-18T19:10:37+0000 [DEBUG   ] dandi.support.digests 1418:140350513718976 Estimating digests for /home/kabilar/20250915/001602/sourcedata/raw/sub-I74/micr/sub-I74_sample-IC_acq-overview_XPCT.ome.zarr/0/0/19/20\n2025-09-18T19:10:37+0000 [DEBUG   ] dandi.support.digests 1418:140350448117440 Estimating digests for /home/kabilar/20250915/001602/sourcedata/raw/sub-I74/micr/sub-I74_sample-IC_acq-overview_XPCT.ome.zarr/0/0/19/2\n2025-09-18T19:10:37+0000 [DEBUG   ] urllib3.connectionpool 1418:140349599119040 https://dandiarchive.s3.amazonaws.com:443 \"PUT /zarr/a620802e-e7f7-4003-bf3c-1f2f3d9239e1/0/.zarray?X-Amz-Algorithm=AWS4-HMAC-SHA256\u0026X-Amz-Credential=AKIAUBRWC5GAEKH3223E%2F20250918%2Fus-east-2%2Fs3%2Faws4_request\u0026X-Amz-Date=20250918T191037Z\u0026X-Amz-Expires=21600\u0026X-Amz-SignedHeaders=content-md5%3Bhost%3Bx-amz-tagging\u0026X-Amz-Signature=e571fa63134dcc73459ee8d9690b61da38476ca1d619fcc4f7e63d8a21c440c3 HTTP/1.1\" 403 None\n2025-09-18T19:10:37+0000 [DEBUG   ] dandi 1418:140349599119040 Response: 403\n2025-09-18T19:10:37+0000 [DEBUG   ] charset_normalizer 1418:140349599119040 Encoding detection: utf_8 is most likely the one.\n2025-09-18T19:10:37+0000 [ERROR   ] dandi 1418:140349599119040 Error 403 while sending PUT request to https://dandiarchive.s3.amazonaws.com/zarr/a620802e-e7f7-4003-bf3c-1f2f3d9239e1/0/.zarray?X-Amz-Algorithm=AWS4-HMAC-SHA256\u0026X-Amz-Credential=AKIAUBRWC5GAEKH3223E%2F20250918%2Fus-east-2%2Fs3%2Faws4_request\u0026X-Amz-Date=20250918T191037Z\u0026X-Amz-Expires=21600\u0026X-Amz-SignedHeaders=content-md5%3Bhost%3Bx-amz-tagging\u0026X-Amz-Signature=e571fa63134dcc73459ee8d9690b61da38476ca1d619fcc4f7e63d8a21c440c3: \u003c?xml version=\"1.0\" encoding=\"UTF-8\"?\u003e\n\u003cError\u003e\u003cCode\u003eAccessDenied\u003c/Code\u003e\u003cMessage\u003eThere were headers present in the request which were not signed\u003c/Message\u003e\u003cHeadersNotSigned\u003ex-amz-acl\u003c/HeadersNotSigned\u003e\u003cRequestId\u003eVAB42KCTYHPKDAEK\u003c/RequestId\u003e\u003cHostId\u003eFp3b7y4xWNrCiD+P562RDE2kHHtGxteguLw///KU+G8COcdRT+9l5lf809lbeWJXwwqxnQkOOqU=\u003c/HostId\u003e\u003c/Error\u003e\n2025-09-18T19:10:37+0000 [DEBUG   ] charset_normalizer 1418:140349599119040 Encoding detection: utf_8 is most likely the one.\n2025-09-18T19:10:37+0000 [DEBUG   ] charset_normalizer 1418:140349599119040 Encoding detection: utf_8 is most likely the one.\n2025-09-18T19:10:37+0000 [DEBUG   ] urllib3.connectionpool 1418:140349761640128 https://dandiarchive.s3.amazonaws.com:443 \"PUT /zarr/a620802e-e7f7-4003-bf3c-1f2f3d9239e1/0/0/0/8?X-Amz-Algorithm=AWS4-HMAC-SHA256\u0026X-Amz-Credential=AKIAUBRWC5GAEKH3223E%2F20250918%2Fus-east-2%2Fs3%2Faws4_request\u0026X-Amz-Date=20250918T191037Z\u0026X-Amz-Expires=21600\u0026X-Amz-SignedHeaders=content-md5%3Bhost%3Bx-amz-tagging\u0026X-Amz-Signature=2aa20299a9003bb671f778c6e604e88dc660fa28354f4dd313e234f68e165957 HTTP/1.1\" 403 None\n2025-09-18T19:10:37+0000 [DEBUG   ] dandi 1418:140349761640128 Response: 403\n2025-09-18T19:10:37+0000 [DEBUG   ] dandi.support.digests 1418:140350458607296 Estimating digests for /home/kabilar/20250915/001602/sourcedata/raw/sub-I74/micr/sub-I74_sample-IC_acq-overview_XPCT.ome.zarr/0/0/19/11\n2025-09-18T19:10:37+0000 [DEBUG   ] charset_normalizer 1418:140349761640128 Encoding detection: utf_8 is most likely the one.\n2025-09-18T19:10:37+0000 [ERROR   ] dandi 1418:140349761640128 Error 403 while sending PUT request to https://dandiarchive.s3.amazonaws.com/zarr/a620802e-e7f7-4003-bf3c-1f2f3d9239e1/0/0/0/8?X-Amz-Algorithm=AWS4-HMAC-SHA256\u0026X-Amz-Credential=AKIAUBRWC5GAEKH3223E%2F20250918%2Fus-east-2%2Fs3%2Faws4_request\u0026X-Amz-Date=20250918T191037Z\u0026X-Amz-Expires=21600\u0026X-Amz-SignedHeaders=content-md5%3Bhost%3Bx-amz-tagging\u0026X-Amz-Signature=2aa20299a9003bb671f778c6e604e88dc660fa28354f4dd313e234f68e165957: \u003c?xml version=\"1.0\" encoding=\"UTF-8\"?\u003e\n\u003cError\u003e\u003cCode\u003eAccessDenied\u003c/Code\u003e\u003cMessage\u003eThere were headers present in the request which were not signed\u003c/Message\u003e\u003cHeadersNotSigned\u003ex-amz-acl\u003c/HeadersNotSigned\u003e\u003cRequestId\u003eVABFRJEFMP9NWQDW\u003c/RequestId\u003e\u003cHostId\u003e4/PyuCIuIrcdZHcKbAeRX/Kk5z0y6PVwCdN28DROH+hKJskwT7ke6UuQA92eOznTKK/jTGnF3Vg=\u003c/HostId\u003e\u003c/Error\u003e\n2025-09-18T19:10:37+0000 [DEBUG   ] charset_normalizer 1418:140349761640128 Encoding detection: utf_8 is most likely the one.\n2025-09-18T19:10:37+0000 [DEBUG   ] charset_normalizer 1418:140349761640128 Encoding detection: utf_8 is most likely the one.\n2025-09-18T19:10:37+0000 [DEBUG   ] dandi.support.digests 1418:140350427137728 Estimating digests for /home/kabilar/20250915/001602/sourcedata/raw/sub-I74/micr/sub-I74_sample-IC_acq-overview_XPCT.ome.zarr/0/0/19/28\n2025-09-18T19:10:37+0000 [DEBUG   ] dandi.support.digests 1418:140350437627584 Estimating digests for /home/kabilar/20250915/001602/sourcedata/raw/sub-I74/micr/sub-I74_sample-IC_acq-overview_XPCT.ome.zarr/0/0/19/37\n2025-09-18T19:10:37+0000 [ERROR   ] dandi 1418:140350477768384 Error uploading /home/kabilar/20250915/001602/sourcedata/raw/sub-I74/micr/sub-I74_sample-IC_acq-overview_XPCT.ome.zarr:\nTraceback (most recent call last):\n  File \"/home/conda/nebari-git/1435a3fc-1752013420-36-dandi/lib/python3.12/site-packages/dandi/upload.py\", line 359, in process_path\n    for r in dfile.iter_upload(\n  File \"/home/conda/nebari-git/1435a3fc-1752013420-36-dandi/lib/python3.12/site-packages/dandi/files/zarr.py\", line 748, in iter_upload\n    size = fut.result()\n           ^^^^^^^^^^^^\n  File \"/home/conda/nebari-git/1435a3fc-1752013420-36-dandi/lib/python3.12/concurrent/futures/_base.py\", line 449, in result\n    return self.__get_result()\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/home/conda/nebari-git/1435a3fc-1752013420-36-dandi/lib/python3.12/concurrent/futures/_base.py\", line 401, in __get_result\n    raise self._exception\n  File \"/home/conda/nebari-git/1435a3fc-1752013420-36-dandi/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/conda/nebari-git/1435a3fc-1752013420-36-dandi/lib/python3.12/site-packages/dandi/files/zarr.py\", line 829, in _upload_zarr_file\n    storage_session.put(\n  File \"/home/conda/nebari-git/1435a3fc-1752013420-36-dandi/lib/python3.12/site-packages/dandi/dandiapi.py\", line 323, in put\n    return self.request(\"PUT\", path, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/conda/nebari-git/1435a3fc-1752013420-36-dandi/lib/python3.12/site-packages/dandi/dandiapi.py\", line 287, in request\n    raise requests.HTTPError(msg, response=result)\nrequests.exceptions.HTTPError: Error 403 while sending PUT request to https://dandiarchive.s3.amazonaws.com/zarr/a620802e-e7f7-4003-bf3c-1f2f3d9239e1/4/.zarray?X-Amz-Algorithm=AWS4-HMAC-SHA256\u0026X-Amz-Credential=AKIAUBRWC5GAEKH3223E%2F20250918%2Fus-east-2%2Fs3%2Faws4_request\u0026X-Amz-Date=20250918T191037Z\u0026X-Amz-Expires=21600\u0026X-Amz-SignedHeaders=content-md5%3Bhost%3Bx-amz-tagging\u0026X-Amz-Signature=ffe7f6bb79dd0aed9c753072c1cc48789c1df133688ed1e00eaa16211bbeff65: \u003c?xml version=\"1.0\" encoding=\"UTF-8\"?\u003e\n\u003cError\u003e\u003cCode\u003eAccessDenied\u003c/Code\u003e\u003cMessage\u003eThere were headers present in the request which were not signed\u003c/Message\u003e\u003cHeadersNotSigned\u003ex-amz-acl\u003c/HeadersNotSigned\u003e\u003cRequestId\u003eVABC9NQC5C262PN4\u003c/RequestId\u003e\u003cHostId\u003e7lc7Ut/sDgaxSVviq6ThHse7nB2wLtwHdcqjFkufL7D6uzxvhDxVgbH1ojfLkdgsb6BT/Zb/ZSWsdb+rRI87GYGs5mOhggDE59nLE0Rxp8k=\u003c/HostId\u003e\u003c/Error\u003e\n```","files":null}]}