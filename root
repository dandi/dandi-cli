{"version":2,"ops":[{"type":1,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1611159546,"metadata":{"github-id":"MDU6SXNzdWU3OTAxMjUwNDg=","github-url":"https://github.com/dandi/dandi-cli/issues/332","origin":"github"},"title":"add testing that a prototypical dandiset metadata validates using converted to json schema","message":"`tools/pubschemata.py` publishes schema as json schema to https://github.com/dandi/schema .  Conversion to json might \"mutate\" it so a correct according to pydantic's model metadata would not validate using that json schema and `jsonschema` python package (is that what you were using @dchiquit? found no jsonschema import in dandi-api though).\n\n- move `publish_model_schemata` from `tools/pubschemata.py`  into `dandi/metadata.py`\n- add a function to validate metadata given provided json schema directory (as produced by `publish_model_schemata`)\n- verify that metadata validates using that schema and jsonschema:\n   - add tests: in http://github.com/dandi/dandi-cli/blob/HEAD/dandi/tests/test_metadata.py we already have some quite detailed sample cases for dandiset level metadata migration.","files":null}]}