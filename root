{"version":2,"ops":[{"type":1,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1612461459,"metadata":{"github-id":"MDU6SXNzdWU4MDE1MTE5MDY=","github-url":"https://github.com/dandi/dandi-cli/issues/360","origin":"github"},"title":"\"migrate\" existing dandisets (only dandiset.yaml for now) to new API  server","message":"Blockers (AFAIK should be easy to address, so may be just send a PR @jwodder ):\n- [ ] https://github.com/dandi/dandi-api/issues/57\n\nOverall workflow:\n\n- Given a full collection of dandisets (so later we could upload data files as well), which is at `dandi@drogon:/mnt/backup/dandi/dandisets` or for now (since no data) just on a local copy which could be obtained quickly using `datalad install -r -J5 https://github.com/dandi/dandisets`\n- make a script which takes path(s) of dandisets to operate on, and for each given dandiset, \n  - uses `POST ​/dandisets​/`  to create a new one (with some ID above 1000s)\n  - uses https://github.com/dandi/dandi-cli/pull/357 version to upload dandiset.yaml to that new dandiset (I am still a bit reluctant to merge it in, but we could do that if would make things easier)\n  - uses `POST ​/scripts​/map_ids​/{dandiset_id}​/` to make API server map into the dandiset with original ID (not sure what would happen if that dandiset already exists).  \n    - @dchiquito - do we need to `DELETE` dandiset we are mapping into first?  Can we delete all those existing \"low number\" dandisets?\n    - @dchiquito would @jwodder need to be promoted to \"admin\" on api for those end points?","files":null}]}