{"version":2,"ops":[{"type":1,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1666883205,"metadata":{"github-id":"I_kwDODBZtRc5U-_yY","github-url":"https://github.com/dandi/dandi-cli/issues/1146","origin":"github"},"title":"digest -d zarr-checksum seems to take some .dotdirs like .git or .dandi into account whenever it should skip those","message":"```\n(dandisets) dandi@drogon:/mnt/backup/dandi/tmp/fc3f8c83-f4a9-48e4-a67c-aa24b530f82a$ fg\ndandi digest -d zarr-checksum .\n.: 0cbd5bcf66e160716528bbe02ee9ef15-133468--110916702211\n```\n\nwhenever\n\n```\n(dandisets) dandi@drogon:/mnt/backup/dandi/tmp/fc3f8c83-f4a9-48e4-a67c-aa24b530f82a$ find . | grep -v  -e '\\.dandi' -e '\\.git' -e '\\.datalad' | nl | tail -n 1\n 32601  ./info\n```\nand without directories\n```\n(base) dandi@drogon:/mnt/backup/dandi/tmp/fc3f8c83-f4a9-48e4-a67c-aa24b530f82a$ find . \\! -type d | grep -v  -e '\\.dandi' -e '\\.git' -e '\\.datalad' | wc -l\n32385\n```\n\nNB: local and archive stored checksum is completely off:\n\n```\n(dandisets) dandi@drogon:/mnt/backup/dandi/tmp/fc3f8c83-f4a9-48e4-a67c-aa24b530f82a$ cat .dandi/zarr-checksum \nedfb9e937142aceca60acef5fe5ba98a-4845--7049299697\n```\n\nrelated:\n- https://github.com/dandi/dandi-archive/issues/1347 since apparently archive also doesn't have correct zarr\n- this is the zarr which caused our `verify` run on that zarr to fail in https://github.com/dandi/dandisets/issues/286","files":null}]}