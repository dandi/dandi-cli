{"version":2,"ops":[{"type":1,"author":{"id":"34bb3b7763ea6d04cae1c21ede40209df34305b5"},"timestamp":1717102363,"metadata":{"github-id":"I_kwDODBZtRc6Kq_FO","github-url":"https://github.com/dandi/dandi-cli/issues/1447","origin":"github"},"title":"Make zarr download begin as soon as initial page of zarr files is obtained","message":"This is continuation to work done in \n- https://github.com/dandi/dandi-cli/pull/1443\n\nwhere I thought that `interleave()` would be a generator which starts yielding without delaying for a full list of zarr files to be retrieved first. @jwodder [mentioned](https://github.com/dandi/dandi-cli/pull/1443#discussion_r1607161555) that my assumption was wrong  and that it would need additional refactoring to make it behave as desired.\n\nWhile addressing this it might be worth checking if `interleave` could natively provide support for desired use case where it takes care about running that thread with \"producer\" iterator.  It is somewhat similar to how I have done for [`ProducerConsumer` in datalad](https://github.com/datalad/datalad/blob/HEAD/datalad/support/parallel.py#L71) where Producer is ran into a separate thread as well IIRC.","files":null}]}