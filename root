{"version":2,"ops":[{"type":1,"author":{"id":"f3557c4ceea08ee5e22c6aab1e8604bfb798bfa4"},"timestamp":1745431443,"metadata":{"github-id":"I_kwDODBZtRc6zs0Fr","github-url":"https://github.com/dandi/dandi-cli/issues/1617","origin":"github"},"title":"Duplicate errors in `dandi validate` output","message":"Output from `dandi validate` contains duplicates of the same errors.\n\nGiven \n\n\u003cdetails\u003e\n\u003csummary\u003edandiset.yaml\u003c/summary\u003e\n\n```yml\n# DO NOT EDIT THIS FILE LOCALLY. ALL LOCAL UPDATES WILL BE LOST.\n# It can be edited online at https://dandiarchive.org/dandiset/000027\n# and obtained from the dandiarchive.\n'@context': https://raw.githubusercontent.com/dandi/schema/master/releases/0.4.4/context.json\nabout: []\naccess:\n- contactPoint:\n    email: team@dandiarchive.org\n    schemaKey: ContactPoint\n    url: https://dandiarchive.org\n  schemaKey: AccessRequirements\n  status: dandi:OpenAccess\nassetsSummary:\n  approach: []\n  dataStandard:\n  - identifier: RRID:SCR_015242\n    name: Neurodata Without Borders (NWB)\n    schemaKey: StandardsType\n  measurementTechnique: []\n  numberOfBytes: 18792\n  numberOfFiles: 1\n  numberOfSubjects: 2\n  schemaKey: AssetsSummary\n  species:\n  - identifier: http://purl.obolibrary.org/obo/NCBITaxon_10116\n    name: Brown rat\n    schemaKey: SpeciesType\n  variableMeasured: []\ncitation: Halchenko, Yaroslav O. (2022) Test dataset for testing dandi-cli (Version\n  0.210831.2033) [Data set]. DANDI archive. https://doi.org/10.48324/dandi.000027/0.210831.2033\ncontributor:\n- affiliation:\n  - identifier: https://ror.org/049s0rh22\n    name: Dartmouth College\n    schemaKey: Affiliation\n  email: yoh@dartmouth.edu\n  identifier: 0000-0003-3456-2493\n  includeInCitation: true\n  name: Halchenko, Yaroslav O.\n  roleName:\n  - dcite:Conceptualization\n  - dcite:Author\n  - dcite:Maintainer\n  - dcite:ProjectMember\n  - dcite:ContactPerson\n  schemaKey: Person\n  url: http://centerforopenneuroscience.org/\ndateCreated: '2020-07-08T21:54:42.543000+00:00'\ndatePublished: '2021-08-31T20:33:59.583352+00:00'\ndescription: 'Should be ignored by regular mortals.\n\n\n  ATM contains only a few files from http://github.com/dandi-datasets/nwb_test_data\n  which more or less appropriate (do not lack critical metadata) for testing'\ndoi: 10.48324/dandi.000027/0.210831.2033\nethicsApproval: []\nid: DANDI:000027/0.210831.2033\nidentifier: DANDI:000027\nkeywords:\n- development\nlicense:\n- spdx:CC0-1.0\nmanifestLocation:\n- https://dandiarchive.s3.amazonaws.com/dandisets/000027/0.210831.2033/assets.yaml\nname: Test dataset for testing dandi-cli.\nprotocol: []\npublishedBy:\n  endDate: '2021-08-31T20:33:59.583352+00:00'\n  id: urn:uuid:9144120e-1681-4106-a155-49117db2cece\n  name: DANDI publish\n  schemaKey: PublishActivity\n  startDate: '2021-08-31T20:33:59.583352+00:00'\n  wasAssociatedWith:\n  - id: urn:uuid:dd4c8326-504c-4bf3-b0a6-24ceb70a9830\n    identifier: RRID:SCR_017571\n    name: DANDI API\n    schemaKey: Software\n    version: 0.1.0\nrelatedResource: []\nrepository: https://dandiarchive.org/\nschemaKey: Dandiset\nschemaVersion: 0.4.4\nstudyTarget: []\nurl: https://dandiarchive.org/dandiset/000027/0.210831.2033\nversion: 0.210831.2033\nwasGeneratedBy: []\n```\n\n\u003c/details\u003e\n\nRun\n```shell\ngit clone https://github.com/bids-standard/bids-error-examples \u0026\u0026 cp dandiset.yaml bids-error-examples/invalid_asl003/ \u0026\u0026 dandi validate bids-error-examples/invalid_asl003\n```\n\nProduces the following output which has duplication of a `[BIDS.NON_BIDS_PATH_PLACEHOLDER]` error\n```shell\n(dandi-cli) ➜  workshop git clone https://github.com/bids-standard/bids-error-examples \u0026\u0026 cp dandiset.yaml bids-error-examples/invalid_asl003/ \u0026\u0026 dandi validate bids-error-examples/invalid_asl003\nCloning into 'bids-error-examples'...\nremote: Enumerating objects: 175, done.\nremote: Counting objects: 100% (175/175), done.\nremote: Compressing objects: 100% (137/137), done.\nremote: Total 175 (delta 39), reused 170 (delta 34), pack-reused 0 (from 0)\nReceiving objects: 100% (175/175), 366.38 KiB | 2.38 MiB/s, done.\nResolving deltas: 100% (39/39), done.\n2025-04-23 10:59:09,375 [ WARNING] No BIDS reference root provided.\n2025-04-23 10:59:09,375 [    INFO] No schema path specified, defaulting to the bundled schema, `/Users/isaac/.pyenv/versions/3.11.7/envs/dandi-cli/lib/python3.11/site-packages/bidsschematools/data/schema`.\n2025-04-23 10:59:09,947 [ WARNING] The `/Users/isaac/Developer/Dartmouth/workshop/bids-error-examples/invalid_asl003/sub-Sub1/perf/sub-Sub1_headshape.jpg` file was not matched by any regex schema entry.\n[BIDS.NON_BIDS_PATH_PLACEHOLDER] /Users/isaac/Developer/Dartmouth/workshop/bids-error-examples/invalid_asl003/sub-Sub1/perf/sub-Sub1_headshape.jpg — File does not match any pattern known to BIDS.\n[BIDS.NON_BIDS_PATH_PLACEHOLDER] /Users/isaac/Developer/Dartmouth/workshop/bids-error-examples/invalid_asl003/sub-Sub1/perf/sub-Sub1_headshape.jpg — File does not match any pattern known to BIDS.\n2025-04-23 10:59:09,953 [    INFO] Logs saved in /Users/isaac/Library/Logs/dandi-cli/2025.04.23-17.59.08Z-11312.log\n```\n\nThe environment has bidsschematools at 1.0.5 and the dandi-cli at the current master at commit 6518334b60c541890d83e293d000f350280dfbad.","files":null}]}