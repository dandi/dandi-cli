{"version":2,"ops":[{"type":1,"author":{"id":"d8203afd43c9e0a9d07c45dd62b58a81d53a2ebe"},"timestamp":1762363363,"metadata":{"github-id":"I_kwDODBZtRc7WGtyw","github-url":"https://github.com/dandi/dandi-cli/issues/1734","origin":"github"},"title":"Conflicting logging levels for BIDS validation errors","message":"During a recent upload to https://lincbrain.org/ by a collaborator, we received the following errors/warnings with `dandi==0.71.2` and `dandischema==0.11.0`. One `ERROR` was noted from the `dandi upload` command.  When looking at the log file, all 5 BIDS validation errors were logged as `WARNING` but then the last line says the `dataset_description.json` was actually an `ERROR`. Perhaps errors 1-4 should be `ERROR`.\n\n\n\n```bash\n...\nSummary:                                                                                               20.5 GB   1 with errors   8.3 kB/s 5416 skipped          1 should be edited online\n                                                                                                                                          1 ERROR               1 failed validation\n                                                                                                                                          1 done                5415 file exists\n2025-10-30 15:06:20,115 [ WARNING] One or more assets failed validation.  Consult the logfile for details.\n2025-10-30 15:06:25,227 [    INFO] Logs saved in /home/bglickman/.local/state/dandi-cli/log/2025.10.30-18.58.29Z-21478.log\nError: failed validation\n\n(linc) bglickman@DESKTOP-JN732VL:~/I74_uCT_Lichtman/000049$ grep \"ERROR\" /home/bglickman/.local/state/dandi-cli/log/2025.10.30-18.58.29Z-21478.log\n\n2025-10-30T14:58:37-0400 [WARNING ] dandi 21478:126210317428416  Error 1: id='BIDS.JSON_SCHEMA_VALIDATION_ERROR' origin=Origin(type=\u003cOriginType.VALIDATION: 'VALIDATION'\u003e, validator=\u003cValidator.bids_validator_deno: 'bids-validator-deno'\u003e, validator_version='2.2.1', standard=\u003cStandard.BIDS: 'BIDS'\u003e, standard_version=None, standard_schema_version='1.1.0') scope=\u003cScope.FILE: 'file'\u003e origin_result=Issue(code='JSON_SCHEMA_VALIDATION_ERROR', subCode='Authors', severity=\u003cSeverity.error: 'error'\u003e, location='/dataset_description.json', issueMessage='must be array\\n\\nField description: List of individuals who contributed to the creation/curation of the dataset.\\n', suggestion=None, affects=None, rule='rules.dataset_metadata.dataset_description', line=None, character=None) severity=\u003cSeverity.ERROR: 40\u003e asset_paths=None within_asset_paths=None dandiset_path=PosixPath('/home/bglickman/I74_uCT_Lichtman/000049') dataset_path=PosixPath('/home/bglickman/I74_uCT_Lichtman/000049') message='Invalid JSON sidecar file. The sidecar is not formatted according the schema.\\nsubCode: Authors\\nissueMessage: must be array\\n\\nField description: List of individuals who contributed to the creation/curation of the dataset.\\n' metadata=None path=PosixPath('/home/bglickman/I74_uCT_Lichtman/000049/dataset_description.json') path_regex=None\n2025-10-30T14:58:37-0400 [WARNING ] dandi 21478:126210317428416  Error 2: id='BIDS.JSON_SCHEMA_VALIDATION_ERROR' origin=Origin(type=\u003cOriginType.VALIDATION: 'VALIDATION'\u003e, validator=\u003cValidator.bids_validator_deno: 'bids-validator-deno'\u003e, validator_version='2.2.1', standard=\u003cStandard.BIDS: 'BIDS'\u003e, standard_version=None, standard_schema_version='1.1.0') scope=\u003cScope.FILE: 'file'\u003e origin_result=Issue(code='JSON_SCHEMA_VALIDATION_ERROR', subCode='Funding', severity=\u003cSeverity.error: 'error'\u003e, location='/dataset_description.json', issueMessage='must be array\\n\\nField description: List of sources of funding (grant numbers).\\n', suggestion=None, affects=None, rule='rules.dataset_metadata.dataset_description', line=None, character=None) severity=\u003cSeverity.ERROR: 40\u003e asset_paths=None within_asset_paths=None dandiset_path=PosixPath('/home/bglickman/I74_uCT_Lichtman/000049') dataset_path=PosixPath('/home/bglickman/I74_uCT_Lichtman/000049') message='Invalid JSON sidecar file. The sidecar is not formatted according the schema.\\nsubCode: Funding\\nissueMessage: must be array\\n\\nField description: List of sources of funding (grant numbers).\\n' metadata=None path=PosixPath('/home/bglickman/I74_uCT_Lichtman/000049/dataset_description.json') path_regex=None\n2025-10-30T14:58:37-0400 [WARNING ] dandi 21478:126210317428416  Error 3: id='BIDS.JSON_SCHEMA_VALIDATION_ERROR' origin=Origin(type=\u003cOriginType.VALIDATION: 'VALIDATION'\u003e, validator=\u003cValidator.bids_validator_deno: 'bids-validator-deno'\u003e, validator_version='2.2.1', standard=\u003cStandard.BIDS: 'BIDS'\u003e, standard_version=None, standard_schema_version='1.1.0') scope=\u003cScope.FILE: 'file'\u003e origin_result=Issue(code='JSON_SCHEMA_VALIDATION_ERROR', subCode='ReferencesAndLinks', severity=\u003cSeverity.error: 'error'\u003e, location='/dataset_description.json', issueMessage='must be array\\n\\nField description: List of references to publications that contain information on the dataset.\\nA reference may be textual or a\\n[URI](SPEC_ROOT/common-principles.md#uniform-resource-indicator).\\n', suggestion=None, affects=None, rule='rules.dataset_metadata.dataset_description', line=None, character=None) severity=\u003cSeverity.ERROR: 40\u003e asset_paths=None within_asset_paths=None dandiset_path=PosixPath('/home/bglickman/I74_uCT_Lichtman/000049') dataset_path=PosixPath('/home/bglickman/I74_uCT_Lichtman/000049') message='Invalid JSON sidecar file. The sidecar is not formatted according the schema.\\nsubCode: ReferencesAndLinks\\nissueMessage: must be array\\n\\nField description: List of references to publications that contain information on the dataset.\\nA reference may be textual or a\\n[URI](SPEC_ROOT/common-principles.md#uniform-resource-indicator).\\n' metadata=None path=PosixPath('/home/bglickman/I74_uCT_Lichtman/000049/dataset_description.json') path_regex=None\n2025-10-30T14:58:37-0400 [WARNING ] dandi 21478:126210317428416  Error 4: id='BIDS.JSON_SCHEMA_VALIDATION_ERROR' origin=Origin(type=\u003cOriginType.VALIDATION: 'VALIDATION'\u003e, validator=\u003cValidator.bids_validator_deno: 'bids-validator-deno'\u003e, validator_version='2.2.1', standard=\u003cStandard.BIDS: 'BIDS'\u003e, standard_version=None, standard_schema_version='1.1.0') scope=\u003cScope.FILE: 'file'\u003e origin_result=Issue(code='JSON_SCHEMA_VALIDATION_ERROR', subCode='Authors', severity=\u003cSeverity.error: 'error'\u003e, location='/dataset_description.json', issueMessage='must be array\\n\\nField description: List of individuals who contributed to the creation/curation of the dataset.\\n', suggestion=None, affects=None, rule='rules.dataset_metadata.dataset_authors', line=None, character=None) severity=\u003cSeverity.ERROR: 40\u003e asset_paths=None within_asset_paths=None dandiset_path=PosixPath('/home/bglickman/I74_uCT_Lichtman/000049') dataset_path=PosixPath('/home/bglickman/I74_uCT_Lichtman/000049') message='Invalid JSON sidecar file. The sidecar is not formatted according the schema.\\nsubCode: Authors\\nissueMessage: must be array\\n\\nField description: List of individuals who contributed to the creation/curation of the dataset.\\n' metadata=None path=PosixPath('/home/bglickman/I74_uCT_Lichtman/000049/dataset_description.json') path_regex=None\n2025-10-30T14:58:37-0400 [WARNING ] dandi 21478:126210317428416  Error 5: id='BIDS.NOT_INCLUDED' origin=Origin(type=\u003cOriginType.VALIDATION: 'VALIDATION'\u003e, validator=\u003cValidator.bids_validator_deno: 'bids-validator-deno'\u003e, validator_version='2.2.1', standard=\u003cStandard.BIDS: 'BIDS'\u003e, standard_version=None, standard_schema_version='1.1.0') scope=\u003cScope.FILE: 'file'\u003e origin_result=Issue(code='NOT_INCLUDED', subCode=None, severity=\u003cSeverity.error: 'error'\u003e, location='/dandiset.yaml', issueMessage=None, suggestion=None, affects=None, rule=None, line=None, character=None) severity=\u003cSeverity.ERROR: 40\u003e asset_paths=None within_asset_paths=None dandiset_path=PosixPath('/home/bglickman/I74_uCT_Lichtman/000049') dataset_path=PosixPath('/home/bglickman/I74_uCT_Lichtman/000049') message='Files with such naming scheme are not part of BIDS specification. This error is most commonly caused by typos in file names that make them not BIDS compatible. Please consult the specification and make sure your files are named correctly. If this is not a file naming issue (for example when including files not yet covered by the BIDS specification) you should include a \".bidsignore\" file in your dataset (see https://github.com/bids-standard/bids-validator#bidsignore for details). Please note that derived (processed) data should be placed in /derivatives folder and source data (such as DICOMS or behavioural logs in proprietary formats) should be placed in the /sourcedata folder.' metadata=None path=PosixPath('/home/bglickman/I74_uCT_Lichtman/000049/dandiset.yaml') path_regex=None\n2025-10-30T14:58:37-0400 [ERROR   ] dandi 21478:126210317428416 Error uploading /home/bglickman/I74_uCT_Lichtman/000049/dataset_description.json:\n```","files":null}]}